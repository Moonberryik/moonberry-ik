<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Moonberry Coffee | Y√∂netim Paneli</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.5.0/lz-string.min.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <style>
:root{
    /* Light Mode (Default) */
    --bg:#fafafa;--bg2:#ffffff;--bg3:#f5f5f5;--bg4:#ebebeb;
    --surface:#ffffff;--surface2:#fafafa;--surface3:#f5f5f5;
    --tx:#1a1a1a;--tx2:#555555;--tx3:#888888;
    --txdark:#1a1a1a;--txdark2:#555555;
    --accent:#e07b39;--accent2:#c56a2e;--accentLight:rgba(224,123,57,.12);
    --green:#27ae60;--red:#e74c3c;--yellow:#f39c12;--blue:#3498db;
    --glass:rgba(255,255,255,.98);--glassBorder:rgba(0,0,0,.08);
    --shadow:0 4px 24px rgba(0,0,0,.08);--shadowSm:0 2px 8px rgba(0,0,0,.05);
    --radius:10px;--radiusSm:6px;--radiusLg:16px;
    --transition:.2s ease;
    --font:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;--mono:'JetBrains Mono',monospace;
    --cardBg:#ffffff;--cardBorder:rgba(0,0,0,.06);
    --sectionBg:#ffffff;
    --sidebarBg:#1c1c1e;--sidebarTx:#ffffff;--sidebarTx2:rgba(255,255,255,.65);--sidebarTx3:rgba(255,255,255,.4);
}
/* Dark Mode */
[data-theme="dark"]{
    --bg:#0f0f0f;--bg2:#1a1a1a;--bg3:#242424;--bg4:#333333;
    --surface:#1a1a1a;--surface2:#242424;--surface3:#2e2e2e;
    --tx:#f0f0f0;--tx2:#b0b0b0;--tx3:#707070;
    --txdark:#f0f0f0;--txdark2:#a0a0a0;
    --glass:rgba(30,30,30,.95);--glassBorder:rgba(255,255,255,.1);
    --shadow:0 8px 32px rgba(0,0,0,.4);--shadowSm:0 2px 8px rgba(0,0,0,.3);
    --cardBg:rgba(40,40,40,.95);--cardBorder:rgba(255,255,255,.08);
    --sectionBg:linear-gradient(135deg,rgba(30,30,30,.95),rgba(20,20,20,.9));
    --sidebarBg:#0f0f0f;--sidebarTx:#ffffff;--sidebarTx2:rgba(255,255,255,.6);--sidebarTx3:rgba(255,255,255,.35);
}
[data-theme="dark"] .main{background:var(--bg)!important}
[data-theme="dark"] .page-title,[data-theme="dark"] .page-subtitle{color:var(--tx)!important}
[data-theme="dark"] .form-section{background:var(--bg2)!important;border-color:var(--bg4)!important}
[data-theme="dark"] .form-section-title{color:var(--tx)!important;border-color:var(--bg4)!important}
[data-theme="dark"] .form-label{color:var(--tx2)!important}
[data-theme="dark"] .form-input,[data-theme="dark"] .form-select,[data-theme="dark"] .form-textarea{background:var(--bg3)!important;border-color:var(--bg4)!important;color:var(--tx)!important}
[data-theme="dark"] .type-card{background:var(--bg3)!important;border-color:var(--bg4)!important}
[data-theme="dark"] .type-card-title{color:var(--tx)!important}
[data-theme="dark"] .type-card-sub{color:var(--tx2)!important}
[data-theme="dark"] .alert{background:var(--bg2)!important;border-color:var(--bg4)!important;color:var(--tx2)!important}
[data-theme="dark"] .back-link{color:var(--tx2)!important}
[data-theme="dark"] .admin-list-item{background:var(--bg3)!important;border-color:var(--bg4)!important}
[data-theme="dark"] .admin-list-item:hover{background:var(--bg4)!important}
[data-theme="dark"] .tabs{background:var(--bg3)!important}
[data-theme="dark"] .tab{color:var(--tx2)!important}
[data-theme="dark"] .tab.active{background:var(--bg2)!important;color:var(--accent)!important}
[data-theme="dark"] .dashboard-card{background:var(--cardBg)!important;border-color:var(--cardBorder)!important}
[data-theme="dark"] .dashboard-card-title{color:var(--tx)!important}
[data-theme="dark"] .dashboard-card-desc{color:var(--tx2)!important}
[data-theme="dark"] .section-card{background:var(--sectionBg)!important;border-color:var(--cardBorder)!important}
*{margin:0;padding:0;box-sizing:border-box}
html{font-size:15px}
body{font-family:var(--font);background:var(--bg);color:var(--tx);line-height:1.6;min-height:100vh;overflow-x:hidden}
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--bg4);border-radius:3px}
::-webkit-scrollbar-thumb:hover{background:var(--tx3)}

/* Lock Screen - Login */
.lock-overlay{position:fixed;inset:0;background:var(--bg);z-index:10000;display:flex;align-items:center;justify-content:center;opacity:1;transition:opacity .5s,visibility .5s}
.lock-overlay.hidden{opacity:0;visibility:hidden;pointer-events:none}
.lock-card{background:var(--glass);border:1px solid var(--glassBorder);backdrop-filter:blur(40px);border-radius:var(--radiusLg);padding:48px;text-align:center;max-width:400px;width:90%}
.lock-logo{font-size:3.5rem;margin-bottom:16px;filter:drop-shadow(0 4px 12px rgba(224,123,57,.3))}
.lock-title{font-size:1.4rem;font-weight:700;margin-bottom:6px}
.lock-sub{color:var(--tx2);font-size:.85rem;margin-bottom:32px}
.login-form{display:flex;flex-direction:column;gap:16px;text-align:left}
.login-field{display:flex;flex-direction:column;gap:6px}
.login-field label{font-size:.8rem;color:var(--tx2);font-weight:500}
.login-field input{width:100%;padding:14px 16px;background:var(--bg3);border:2px solid var(--bg4);border-radius:var(--radius);color:var(--tx);font-size:1rem;outline:none;transition:var(--transition)}
.login-field input:focus{border-color:var(--accent);background:var(--bg2)}
.login-field input.error{border-color:var(--red);animation:shake .4s}
.login-btn{padding:14px 24px;background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;border-radius:var(--radius);color:#fff;font-size:1rem;font-weight:600;cursor:pointer;transition:var(--transition);margin-top:8px}
.login-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(224,123,57,.4)}
.login-btn:disabled{opacity:.5;cursor:not-allowed;transform:none}
.lock-error{color:var(--red);font-size:.8rem;height:20px;opacity:0;transition:var(--transition);text-align:center;margin-top:8px}
.lock-error.show{opacity:1}
.lock-info{color:var(--tx3);font-size:.75rem;margin-top:16px}
.lock-locked{background:rgba(231,76,60,.1);border:1px solid var(--red);border-radius:var(--radiusSm);padding:12px;margin-bottom:16px;color:var(--red);font-size:.85rem}

/* App Layout */
.app{display:flex;min-height:100vh}
.sidebar{width:260px;background:var(--sidebarBg);border-right:1px solid rgba(255,255,255,.1);display:flex;flex-direction:column;position:fixed;height:100vh;z-index:100;transition:var(--transition)}
.sidebar-header{padding:24px 20px;border-bottom:1px solid rgba(255,255,255,.1)}
.logo{display:flex;align-items:center;gap:12px}
.logo-icon{width:42px;height:42px;background:linear-gradient(135deg,var(--accent),var(--accent2));border-radius:var(--radius);display:flex;align-items:center;justify-content:center;font-size:1.4rem;box-shadow:0 4px 16px rgba(224,123,57,.3)}
.logo-text{font-size:1.1rem;font-weight:700;letter-spacing:-.02em;color:var(--sidebarTx)}
.logo-sub{font-size:.7rem;color:var(--sidebarTx3);margin-top:2px}
.nav{flex:1;padding:16px 12px;overflow-y:auto}
.nav-group{margin-bottom:20px}
.nav-label{font-size:.65rem;color:var(--sidebarTx3);text-transform:uppercase;letter-spacing:1.5px;padding:0 12px;margin-bottom:8px;font-weight:600}
.nav-item{display:flex;align-items:center;gap:12px;padding:12px 14px;border-radius:var(--radiusSm);cursor:pointer;transition:var(--transition);color:var(--sidebarTx2);font-weight:500;font-size:.9rem;margin-bottom:2px}
.nav-item:hover{background:rgba(255,255,255,.1);color:var(--sidebarTx)}
.nav-item.active{background:var(--accent);color:#fff;box-shadow:0 4px 16px rgba(224,123,57,.25)}
.nav-item .icon{font-size:1.1rem;width:24px;text-align:center;display:flex;align-items:center;justify-content:center}
.nav-item .icon svg{width:20px;height:20px;stroke:currentColor;stroke-width:2;fill:none}
.nav-divider{height:1px;background:rgba(255,255,255,.1);margin:16px 12px}

/* Main Content */
.main{flex:1;margin-left:260px;background:var(--bg);min-height:100vh;position:relative}
.main-header{position:sticky;top:0;right:0;z-index:50;display:flex;justify-content:flex-end;padding:16px 32px;background:var(--bg);border-bottom:1px solid var(--bg4)}
.page{display:none;padding:24px 32px;animation:fadeUp .3s}
.page.active{display:block}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.page-header{margin-bottom:28px}
.page-title{font-size:1.6rem;font-weight:700;color:var(--txdark);letter-spacing:-.02em}
.page-subtitle{color:var(--txdark2);font-size:.9rem;margin-top:4px}
.back-link{display:inline-flex;align-items:center;gap:6px;color:var(--txdark2);font-size:.85rem;font-weight:500;cursor:pointer;margin-bottom:16px;transition:var(--transition)}
.back-link:hover{color:var(--accent)}

/* Cards Grid */
.dashboard-section{margin-bottom:32px}
.section-title{font-size:.75rem;font-weight:600;color:var(--tx3);text-transform:uppercase;letter-spacing:.1em;margin-bottom:16px}
.cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px}
.card{background:rgba(255,255,255,.03);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:20px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;display:flex;align-items:center;gap:16px}
.card:hover{transform:translateY(-2px);background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.12);box-shadow:0 20px 40px rgba(0,0,0,.3)}
.card-icon{width:48px;height:48px;border-radius:14px;display:flex;align-items:center;justify-content:center;color:#fff;flex-shrink:0}
.card-content{flex:1;min-width:0}
.card-title{font-size:.95rem;font-weight:600;color:var(--tx);margin-bottom:4px}
.card-desc{font-size:.8rem;color:var(--tx3);line-height:1.4}

/* Legacy card styles for other pages */
.card-icon.orange{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff}
.card-icon.green{background:linear-gradient(135deg,#27ae60,#2ecc71);color:#fff}
.card-icon.red{background:linear-gradient(135deg,#e74c3c,#c0392b);color:#fff}
.card-icon.blue{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff}
.card-icon.purple{background:linear-gradient(135deg,#9b59b6,#8e44ad);color:#fff}

/* Form Elements */
.form-section{background:var(--surface);border:1px solid var(--surface3);border-radius:var(--radius);padding:24px;margin-bottom:20px}
.form-section-title{font-size:.95rem;font-weight:600;color:var(--txdark);margin-bottom:20px;padding-bottom:12px;border-bottom:1px solid var(--surface3);display:flex;align-items:center;gap:10px}
.form-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
.form-group{display:flex;flex-direction:column;gap:6px}
.form-group.full{grid-column:span 2}
.form-label{font-size:.8rem;font-weight:500;color:var(--txdark2)}
.form-input,.form-select,.form-textarea{padding:12px 14px;background:var(--surface2);border:1.5px solid var(--surface3);border-radius:var(--radiusSm);color:var(--txdark);font-size:.9rem;font-family:var(--font);transition:var(--transition)}
.form-input:focus,.form-select:focus,.form-textarea:focus{outline:none;border-color:var(--accent);background:var(--surface)}
.form-textarea{resize:vertical;min-height:100px}
.form-input::placeholder{color:var(--txdark2);opacity:.6}

/* Type Cards */
.type-cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px}
.type-card{background:var(--surface2);border:2px solid transparent;border-radius:var(--radiusSm);padding:16px;cursor:pointer;transition:var(--transition);text-align:center}
.type-card:hover{border-color:var(--accent);background:var(--surface)}
.type-card.selected{border-color:var(--accent);background:var(--accentLight)}
.type-card-icon{font-size:1.5rem;margin-bottom:8px}
.type-card-title{font-size:.9rem;font-weight:600;color:var(--txdark)}
.type-card-sub{font-size:.75rem;color:var(--txdark2);margin-top:2px}

/* Buttons */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 24px;border-radius:var(--radiusSm);font-size:.9rem;font-weight:600;cursor:pointer;transition:var(--transition);border:none;font-family:var(--font)}
.btn-primary{background:var(--accent);color:#fff}
.btn-primary:hover{background:var(--accent2);box-shadow:0 4px 16px rgba(224,123,57,.3)}
.btn-secondary{background:var(--surface3);color:var(--txdark)}
.btn-secondary:hover{background:var(--surface2)}
.btn-danger{background:var(--red);color:#fff}
.btn-danger:hover{background:#c0392b}
.btn-ghost{background:transparent;color:var(--txdark2);border:1.5px solid var(--surface3)}
.btn-ghost:hover{border-color:var(--accent);color:var(--accent)}
.btn-group{display:flex;gap:12px;margin-top:24px;flex-wrap:wrap}
.btn-sm{padding:8px 16px;font-size:.8rem}

/* Alert Boxes */
.alert{padding:16px 20px;border-radius:var(--radiusSm);margin-bottom:20px;display:flex;align-items:flex-start;gap:12px;font-size:.85rem}
.alert-icon{font-size:1.2rem;flex-shrink:0}
.alert-warning{background:#fef9e7;border:1px solid #f9e79f;color:#7d6608}
.alert-danger{background:#fdedec;border:1px solid #f5b7b1;color:#922b21}
.alert-info{background:#ebf5fb;border:1px solid #aed6f1;color:#1a5276}
.alert-success{background:#e9f7ef;border:1px solid #abebc6;color:#1e8449}

/* Tabs */
.tabs{display:flex;gap:4px;background:var(--surface3);padding:4px;border-radius:var(--radiusSm);margin-bottom:20px}
.tab{flex:1;padding:10px 16px;border:none;background:transparent;color:var(--txdark2);font-size:.85rem;font-weight:600;cursor:pointer;border-radius:6px;transition:var(--transition);font-family:var(--font)}
.tab:hover{color:var(--txdark)}
.tab.active{background:var(--surface);color:var(--accent);box-shadow:var(--shadowSm)}

/* Violation List */
.violation-list{display:flex;flex-direction:column;gap:10px}
.violation-item{background:var(--surface2);border:1px solid var(--surface3);border-radius:var(--radiusSm);padding:16px;cursor:pointer;transition:var(--transition)}
.violation-item:hover{border-color:var(--accent);background:var(--surface)}
.violation-header{display:flex;align-items:center;justify-content:space-between}
.violation-title{font-weight:600;font-size:.9rem;color:var(--txdark)}
.violation-badge{padding:4px 10px;border-radius:20px;font-size:.7rem;font-weight:600;text-transform:uppercase}
.violation-badge.low{background:#d5f5e3;color:#1e8449}
.violation-badge.medium{background:#fef9e7;color:#7d6608}
.violation-badge.high{background:#fdedec;color:#922b21}
.violation-legal{font-size:.8rem;color:var(--txdark2);margin-top:6px}

/* Dashboard Cards */
.dashboard-card{transition:all .25s cubic-bezier(.4,0,.2,1)!important}
.dashboard-card:hover{transform:translateY(-4px);box-shadow:0 12px 24px rgba(0,0,0,.12)!important;border-color:var(--accent)!important}
.dashboard-section{margin-bottom:32px}

/* Preview */
.preview-container{background:var(--surface);border:1px solid var(--surface3);border-radius:var(--radius);overflow:hidden}
.preview-toolbar{background:var(--surface2);padding:14px 20px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--surface3)}
.preview-title{font-weight:600;font-size:.9rem;color:var(--txdark)}
.preview-actions{display:flex;gap:8px}
.preview-content{padding:40px;background:#fff;min-height:500px}

/* Document Styles - PDF Optimized */
.doc{max-width:800px;margin:0 auto;font-size:10pt;line-height:1.6;color:#000;font-family:'Times New Roman',serif}
.doc-header{text-align:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #000}
.doc-company{font-size:10pt;font-weight:700}
.doc-company-info{font-size:8pt;color:#444;margin-top:2px}
.doc-title{font-size:12pt;font-weight:700;margin:15px 0;text-decoration:underline}
.doc-section{margin-bottom:12px}
.doc-section-title{font-size:10pt;font-weight:700;margin-bottom:6px;border-bottom:1px solid #ccc;padding-bottom:3px}
.doc-article{margin-bottom:8px}
.doc-article-title{font-weight:700;margin-bottom:2px;font-size:10pt}
.doc-article-content{margin-left:10px;text-align:justify;font-size:9.5pt;line-height:1.4}
.doc-article-content p{margin:4px 0}
.doc-signature-area{display:grid;grid-template-columns:1fr 1fr;gap:40px;margin-top:35px}
.doc-signature-block{text-align:center}
.doc-signature-title{font-weight:600;margin-bottom:40px;font-size:10pt}
.doc-signature-line{border-top:1px solid #000;padding-top:5px;font-size:9pt}
.doc p{margin:4px 0;font-size:9.5pt}
.no-break{page-break-inside:avoid}

/* Modal System */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);backdrop-filter:blur(8px);z-index:9000;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:var(--transition)}
.modal-overlay.show{opacity:1;visibility:visible}
.modal{background:var(--surface);border-radius:var(--radiusLg);max-width:480px;width:90%;max-height:90vh;overflow:hidden;transform:scale(.9);transition:var(--transition);box-shadow:var(--shadow)}
.modal-overlay.show .modal{transform:scale(1)}
.modal-header{padding:20px 24px;border-bottom:1px solid var(--surface3);display:flex;align-items:center;justify-content:space-between}
.modal-title{font-size:1.1rem;font-weight:700;color:var(--txdark)}
.modal-close{width:32px;height:32px;border-radius:50%;border:none;background:var(--surface3);color:var(--txdark2);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.2rem;transition:var(--transition)}
.modal-close:hover{background:var(--red);color:#fff}
.modal-body{padding:24px;max-height:60vh;overflow-y:auto}
.modal-footer{padding:16px 24px;border-top:1px solid var(--surface3);display:flex;justify-content:flex-end;gap:12px}
.modal-icon{width:64px;height:64px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;margin:0 auto 20px}
.modal-icon.success{background:#e9f7ef;color:var(--green)}
.modal-icon.warning{background:#fef9e7;color:var(--yellow)}
.modal-icon.danger{background:#fdedec;color:var(--red)}
.modal-icon.info{background:#ebf5fb;color:var(--blue)}
.modal-message{text-align:center;color:var(--txdark2);font-size:.95rem;line-height:1.6}

/* Toast */
.toast-container{position:fixed;bottom:24px;right:24px;z-index:9999;display:flex;flex-direction:column;gap:10px}
.toast{background:var(--bg2);color:var(--tx);padding:14px 20px;border-radius:var(--radiusSm);font-size:.85rem;font-weight:500;box-shadow:var(--shadow);display:flex;align-items:center;gap:10px;transform:translateX(120%);transition:var(--transition);border-left:3px solid var(--accent)}
.toast.show{transform:translateX(0)}
.toast.success{border-color:var(--green)}
.toast.error{border-color:var(--red)}
.toast-icon{font-size:1.1rem}

/* Admin Panel */
.admin-tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:24px}
.admin-tab{padding:10px 20px;background:var(--surface2);border:1.5px solid var(--surface3);border-radius:var(--radiusSm);color:var(--txdark2);font-size:.85rem;font-weight:600;cursor:pointer;transition:var(--transition)}
.admin-tab:hover{border-color:var(--accent);color:var(--accent)}
.admin-tab.active{background:var(--accent);border-color:var(--accent);color:#fff}
.admin-section{display:none;animation:fadeUp .3s}
.admin-section.active{display:block}
.admin-card{background:var(--surface2);border:1px solid var(--surface3);border-radius:var(--radiusSm);padding:20px;margin-bottom:16px}
.admin-card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
.admin-card-title{font-weight:600;color:var(--txdark);font-size:.95rem}
.admin-list{display:flex;flex-direction:column;gap:8px}
.admin-list-item{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:var(--surface);border:1px solid var(--surface3);border-radius:6px}
.admin-list-item-text{font-size:.9rem;color:var(--txdark)}
.admin-list-item-actions{display:flex;gap:8px}
.admin-btn-icon{width:32px;height:32px;border-radius:6px;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:var(--transition);font-size:.9rem}
.admin-btn-edit{background:var(--surface3);color:var(--txdark2)}
.admin-btn-edit:hover{background:var(--accent);color:#fff}
.admin-btn-delete{background:var(--surface3);color:var(--txdark2)}
.admin-btn-delete:hover{background:var(--red);color:#fff}
.sync-code-area{background:var(--bg2);border:1px solid var(--bg4);border-radius:var(--radiusSm);padding:16px;margin:16px 0}
.sync-code-text{width:100%;min-height:120px;background:var(--bg);border:1px solid var(--bg4);border-radius:6px;padding:12px;color:var(--tx);font-family:var(--mono);font-size:.8rem;resize:vertical}
.sync-actions{display:flex;gap:12px;margin-top:12px}

/* Responsive */
@media(max-width:768px){
    .sidebar{transform:translateX(-100%)}
    .sidebar.open{transform:translateX(0)}
    .main{margin-left:0}
    .form-grid{grid-template-columns:1fr}
    .form-group.full{grid-column:span 1}
    .cards{grid-template-columns:1fr}
}
@media print{
    .sidebar,.back-link,.preview-toolbar,.btn-group{display:none!important}
    .main{margin:0;background:#fff}
    .page{padding:0}
    .preview-container{border:none;box-shadow:none}
}
    </style>
</head>
<body>
    <!-- Lock Screen - Login -->
    <div class="lock-overlay" id="lockOverlay">
        <div class="lock-card">
            <img src="https://static.wixstatic.com/media/760af2_cb121a61291f4f07adb48cfb70f3e2d9~mv2.png/v1/fill/w_94,h_82,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/beyazwhitelogo-min1.png" alt="Moonberry Coffee" class="lock-logo-img" style="width:80px;height:auto;margin-bottom:16px">
            <div class="lock-title">Moonberry Coffee</div>
            <div class="lock-sub">Y√∂netim Paneli'ne giri≈ü yapƒ±n</div>
            <div id="lockLocked" class="lock-locked" style="display:none">
                ‚ö†Ô∏è √áok fazla hatalƒ± deneme. <span id="lockTimer">30:00</span> bekleyin.
            </div>
            <form class="login-form" id="loginForm" onsubmit="handleLogin(event)">
                <div class="login-field">
                    <label>E-posta</label>
                    <input type="email" id="loginEmail" placeholder="ornek@moonberrycoffee.com" autocomplete="email" required>
                </div>
                <div class="login-field">
                    <label>≈ûifre</label>
                    <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" required>
                </div>
                <button type="submit" class="login-btn" id="loginBtn">Giri≈ü Yap</button>
            </form>
            <div class="lock-error" id="lockError">E-posta veya ≈üifre hatalƒ±</div>
            <div style="margin-top:16px;text-align:center">
                <a href="#" onclick="showForgotPassword(event)" style="color:var(--accent);font-size:.85rem;text-decoration:none">≈ûifremi Unuttum</a>
            </div>
        </div>
    </div>

    <!-- Modal System -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">Modal</div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
            <div class="modal-footer" id="modalFooter"></div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- App -->
    <div class="app">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo" onclick="goTo('dashboard')" style="cursor:pointer" title="Ana Sayfaya D√∂n">
                    <img src="https://static.wixstatic.com/media/760af2_cb121a61291f4f07adb48cfb70f3e2d9~mv2.png/v1/fill/w_94,h_82,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/beyazwhitelogo-min1.png" alt="Logo" style="width:40px;height:auto">
                    <div>
                        <div class="logo-text">Moonberry</div>
                        <div class="logo-sub">Y√∂netim Paneli</div>
                    </div>
                </div>
            </div>
            <nav class="nav">
                <div class="nav-group">
                    <div class="nav-label">Ana Men√º</div>
                    <div class="nav-item active" data-page="dashboard" onclick="goTo('dashboard')">
                        <span class="icon"><svg viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></span> Ana Sayfa
                    </div>
                </div>
                <div class="nav-group">
                    <div class="nav-label">Personel</div>
                    <div class="nav-item" data-page="personel" onclick="goTo('personel')">
                        <span class="icon"><svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg></span> Personel Listesi
                    </div>
                    <div class="nav-item" data-page="puantaj" onclick="goTo('puantaj')">
                        <span class="icon"><svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></span> Puantaj
                    </div>
                    <div class="nav-item" data-page="shift" onclick="goTo('shift')">
                        <span class="icon"><svg viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></span> Shift Planƒ±
                    </div>
                </div>
                <div class="nav-group">
                    <div class="nav-label">Belgeler</div>
                    <div class="nav-item" data-page="sozlesme" onclick="goTo('sozlesme')">
                        <span class="icon"><svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg></span> ƒ∞≈ü S√∂zle≈ümeleri
                    </div>
                    <div class="nav-item" data-page="tutanak" onclick="goTo('tutanak')">
                        <span class="icon"><svg viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></span> Tutanak
                    </div>
                    <div class="nav-item" data-page="savunma" onclick="goTo('savunma')">
                        <span class="icon"><svg viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></span> Savunma ƒ∞steme
                    </div>
                    <div class="nav-item" data-page="fesih" onclick="goTo('fesih')">
                        <span class="icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg></span> Fesih
                    </div>
                    <div class="nav-item" data-page="borc" onclick="goTo('borc')">
                        <span class="icon"><svg viewBox="0 0 24 24"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg></span> Bor√ß ƒ∞krar
                    </div>
                    <div class="nav-item" data-page="avans" onclick="goTo('avans')">
                        <span class="icon"><svg viewBox="0 0 24 24"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg></span> Avans Talebi
                    </div>
                    <div class="nav-item" data-page="zimmet" onclick="goTo('zimmet')">
                        <span class="icon"><svg viewBox="0 0 24 24"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg></span> Zimmet Formu
                    </div>
                </div>
                <div class="nav-group">
                    <div class="nav-label">Rehber</div>
                    <div class="nav-item" data-page="katalog" onclick="goTo('katalog')">
                        <span class="icon"><svg viewBox="0 0 24 24"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg></span> ƒ∞hlal Kataloƒüu
                    </div>
                </div>
                <div class="nav-divider"></div>
                <div class="nav-group">
                    <div class="nav-item" data-page="admin" onclick="openAdminWithPin()">
                        <span class="icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg></span> Y√∂netim
                    </div>
                </div>
                <!-- Kullanƒ±cƒ± Bilgisi ve √áƒ±kƒ±≈ü -->
                <div style="margin-top:auto;padding:16px 20px;border-top:1px solid rgba(255,255,255,.1)">
                    <div id="userInfo" style="display:flex;align-items:center;gap:12px;margin-bottom:12px">
                        <div style="width:36px;height:36px;border-radius:50%;background:var(--accent);display:flex;align-items:center;justify-content:center;font-size:.9rem;color:#fff;font-weight:600" id="userAvatar">üë§</div>
                        <div style="flex:1;overflow:hidden">
                            <div id="userName" style="color:var(--sidebarTx);font-size:.85rem;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Y√ºkleniyor...</div>
                            <div id="userRole" style="color:var(--sidebarTx2);font-size:.7rem">-</div>
                        </div>
                    </div>
                    <button onclick="logout()" style="width:100%;padding:10px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.15);border-radius:8px;color:var(--sidebarTx2);font-size:.8rem;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:8px" onmouseover="this.style.background='rgba(231,76,60,.2)';this.style.borderColor='rgba(231,76,60,.4)';this.style.color='#e74c3c'" onmouseout="this.style.background='rgba(255,255,255,.1)';this.style.borderColor='rgba(255,255,255,.15)';this.style.color='var(--sidebarTx2)'">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                        √áƒ±kƒ±≈ü Yap
                    </button>
                </div>
            </nav>
        </aside>

        <main class="main">
            <!-- Global Header with Breadcrumb and Dark Mode -->
            <div class="main-header" style="display:flex;justify-content:space-between;align-items:center;padding:16px 32px;background:var(--bg2);border-bottom:1px solid var(--bg4)">
                <div id="breadcrumb" style="display:flex;align-items:center;gap:10px;font-size:.9rem">
                    <a onclick="goTo('dashboard')" style="color:var(--accent);font-weight:600;cursor:pointer;text-decoration:none;display:flex;align-items:center;gap:6px">
                        <span style="font-size:1.1rem">‚òï</span> Moonberry
                    </a>
                    <span style="color:var(--tx3);font-size:.8rem">‚Ä∫</span>
                    <span id="currentPageName" style="color:var(--tx);font-weight:500">Ana Sayfa</span>
                </div>
                <button onclick="toggleDarkMode()" id="darkModeBtn" style="background:var(--bg3);border:1px solid var(--bg4);border-radius:8px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s" title="Karanlƒ±k/Aydƒ±nlƒ±k Mod">
                    <svg id="darkModeIcon" width="18" height="18" fill="none" stroke="var(--tx)" stroke-width="2" viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
                </button>
            </div>
            
            <!-- Dashboard -->
            <div class="page active" id="page-dashboard">
                <div class="page-header" style="margin-bottom:24px">
                    <div class="page-title">üè† Y√∂netim Paneli</div>
                    <div class="page-subtitle" id="companyName">Y√ºkleniyor...</div>
                </div>
                
                <!-- Personel Y√∂netimi -->
                <div class="dashboard-section" style="margin-bottom:28px">
                    <div style="font-size:.8rem;font-weight:600;color:var(--tx2);text-transform:uppercase;letter-spacing:.08em;margin-bottom:16px;padding-left:4px">üë• Personel Y√∂netimi</div>
                    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px">
                        <div class="dashboard-card" onclick="goTo('personel')" style="background:var(--cardBg);border:1px solid var(--cardBorder);border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:16px">
                            <div style="font-size:2rem">üë•</div>
                            <div>
                                <div style="font-weight:600;color:var(--tx)">Personel</div>
                                <div style="font-size:.75rem;color:var(--tx2)">Liste & Y√∂netim</div>
                            </div>
                        </div>
                        <div class="dashboard-card" onclick="goTo('puantaj')" style="background:var(--cardBg);border:1px solid var(--cardBorder);border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:16px">
                            <div style="font-size:2rem">‚≠ê</div>
                            <div>
                                <div style="font-weight:600;color:var(--tx)">Puantaj</div>
                                <div style="font-size:.75rem;color:var(--tx2)">Performans</div>
                            </div>
                        </div>
                        <div class="dashboard-card" onclick="goTo('shift')" style="background:var(--cardBg);border:1px solid var(--cardBorder);border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:16px">
                            <div style="font-size:2rem">üìÖ</div>
                            <div>
                                <div style="font-weight:600;color:var(--tx)">Shift Planƒ±</div>
                                <div style="font-size:.75rem;color:var(--tx2)">Haftalƒ±k Vardiya</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Belgeler -->
                <div class="dashboard-section" style="margin-bottom:28px">
                    <div style="font-size:.8rem;font-weight:600;color:var(--tx2);text-transform:uppercase;letter-spacing:.08em;margin-bottom:16px;padding-left:4px">üìÑ Belgeler</div>
                    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px">
                        <div class="dashboard-card" onclick="goTo('sozlesme')" style="background:var(--cardBg);border:1px solid var(--cardBorder);border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:16px">
                            <div style="font-size:2rem">üìã</div>
                            <div>
                                <div style="font-weight:600;color:var(--tx)">S√∂zle≈üme</div>
                                <div style="font-size:.75rem;color:var(--tx2)">ƒ∞≈ü S√∂zle≈ümesi</div>
                            </div>
                        </div>
                        <div class="dashboard-card" onclick="goTo('tutanak')" style="background:var(--cardBg);border:1px solid var(--cardBorder);border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:16px">
                            <div style="font-size:2rem">üìù</div>
                            <div>
                                <div style="font-weight:600;color:var(--tx)">Tutanak</div>
                                <div style="font-size:.75rem;color:var(--tx2)">Olay Tespit</div>
                            </div>
                        </div>
                        <div class="dashboard-card" onclick="goTo('savunma')" style="background:var(--cardBg);border:1px solid var(--cardBorder);border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:16px">
                            <div style="font-size:2rem">üí¨</div>
                            <div>
                                <div style="font-weight:600;color:var(--tx)">Savunma</div>
                                <div style="font-size:.75rem;color:var(--tx2)">Savunma ƒ∞steme</div>
                            </div>
                        </div>
                        <div class="dashboard-card" onclick="goTo('fesih')" style="background:var(--cardBg);border:1px solid var(--cardBorder);border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:16px">
                            <div style="font-size:2rem">‚õî</div>
                            <div>
                                <div style="font-weight:600;color:var(--tx)">Fesih</div>
                                <div style="font-size:.75rem;color:var(--tx2)">ƒ∞≈ü Akdi Fesih</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Formlar -->
                <div class="dashboard-section" style="margin-bottom:28px">
                    <div style="font-size:.8rem;font-weight:600;color:var(--tx2);text-transform:uppercase;letter-spacing:.08em;margin-bottom:16px;padding-left:4px">üìë Formlar</div>
                    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px">
                        <div class="dashboard-card" onclick="goTo('borc')" style="background:var(--cardBg);border:1px solid var(--cardBorder);border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:16px">
                            <div style="font-size:2rem">üí∞</div>
                            <div>
                                <div style="font-weight:600;color:var(--tx)">Bor√ß ƒ∞krar</div>
                                <div style="font-size:.75rem;color:var(--tx2)">Kesinti Onayƒ±</div>
                            </div>
                        </div>
                        <div class="dashboard-card" onclick="goTo('avans')" style="background:var(--cardBg);border:1px solid var(--cardBorder);border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:16px">
                            <div style="font-size:2rem">üíµ</div>
                            <div>
                                <div style="font-weight:600;color:var(--tx)">Avans</div>
                                <div style="font-size:.75rem;color:var(--tx2)">Avans Talebi</div>
                            </div>
                        </div>
                        <div class="dashboard-card" onclick="goTo('zimmet')" style="background:var(--cardBg);border:1px solid var(--cardBorder);border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:16px">
                            <div style="font-size:2rem">üì¶</div>
                            <div>
                                <div style="font-weight:600;color:var(--tx)">Zimmet</div>
                                <div style="font-size:.75rem;color:var(--tx2)">Demirba≈ü Teslim</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Diƒüer -->
                <div class="dashboard-section">
                    <div style="font-size:.8rem;font-weight:600;color:var(--tx2);text-transform:uppercase;letter-spacing:.08em;margin-bottom:16px;padding-left:4px">üìö Diƒüer</div>
                    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px">
                        <div class="dashboard-card" onclick="goTo('katalog')" style="background:var(--cardBg);border:1px solid var(--cardBorder);border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:16px">
                            <div style="font-size:2rem">üìö</div>
                            <div>
                                <div style="font-weight:600;color:var(--tx)">ƒ∞hlal Kataloƒüu</div>
                                <div style="font-size:.75rem;color:var(--tx2)">Yasal Dayanaklar</div>
                            </div>
                        </div>
                        <div class="dashboard-card" onclick="openAdminWithPin()" style="background:var(--cardBg);border:1px solid var(--cardBorder);border-radius:12px;padding:20px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:16px">
                            <div style="font-size:2rem">‚öôÔ∏è</div>
                            <div>
                                <div style="font-weight:600;color:var(--tx)">Y√∂netim</div>
                                <div style="font-size:.75rem;color:var(--tx2)">Sistem Ayarlarƒ±</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- S√∂zle≈üme -->
            <div class="page" id="page-sozlesme">
                <div class="back-link" onclick="goTo('dashboard')">‚Üê Ana Sayfa</div>
                <div class="page-header">
                    <div class="page-title">ƒ∞≈ü S√∂zle≈ümesi</div>
                    <div class="page-subtitle">Pozisyona √∂zel s√∂zle≈üme olu≈ütur</div>
                </div>
                <div class="form-section">
                    <div class="form-section-title">üë§ Pozisyon Se√ß</div>
                    <div class="type-cards" id="sozlesmePozisyonlar"></div>
                </div>
                <div class="form-section">
                    <div class="form-section-title">üìã Personel Bilgileri</div>
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">Ad Soyad</label><input type="text" id="soz_ad" class="form-input" placeholder="Personel adƒ±"></div>
                        <div class="form-group"><label class="form-label">TC Kimlik</label><input type="text" id="soz_tc" class="form-input" placeholder="11 hane" maxlength="11"></div>
                        <div class="form-group full"><label class="form-label">Adres</label><input type="text" id="soz_adres" class="form-input" placeholder="ƒ∞kametgah adresi"></div>
                        <div class="form-group"><label class="form-label">Cep Telefonu</label><input type="text" id="soz_telefon" class="form-input" placeholder="+90 5XX XXX XX XX"></div>
                        <div class="form-group"><label class="form-label">IBAN</label><input type="text" id="soz_iban" class="form-input" placeholder="TR..."></div>
                        <div class="form-group"><label class="form-label">ƒ∞≈üe Ba≈ülama</label><input type="date" id="soz_baslama" class="form-input"></div>
                        <div class="form-group"><label class="form-label">Br√ºt √úcret (TL)</label><input type="text" id="soz_ucret" class="form-input" placeholder="25.000"></div>
                        <div class="form-group"><label class="form-label">≈ûube</label><select id="soz_sube" class="form-select"></select></div>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="generateSozlesme()">üìÑ S√∂zle≈üme Olu≈ütur</button>
                    <button class="btn btn-ghost" onclick="clearForm('soz')">Temizle</button>
                </div>
            </div>

            <!-- Tutanak -->
            <div class="page" id="page-tutanak">
                <div class="back-link" onclick="goTo('dashboard')">‚Üê Ana Sayfa</div>
                <div class="page-header">
                    <div class="page-title">Tutanak Olu≈ütur</div>
                </div>
                <div class="form-section">
                    <div class="form-section-title">üìã Tutanak T√ºr√º</div>
                    <div class="type-cards">
                        <div class="type-card" data-type="olay" onclick="selectType('tutanak','olay',this)"><div class="type-card-icon">üìù</div><div class="type-card-title">Olay Tespit</div></div>
                        <div class="type-card" data-type="devamsizlik" onclick="selectType('tutanak','devamsizlik',this)"><div class="type-card-icon">üìÖ</div><div class="type-card-title">Devamsƒ±zlƒ±k</div></div>
                        <div class="type-card" data-type="kasa" onclick="selectType('tutanak','kasa',this)"><div class="type-card-icon">üí∞</div><div class="type-card-title">Kasa A√ßƒ±ƒüƒ±</div></div>
                        <div class="type-card" data-type="imza" onclick="selectType('tutanak','imza',this)"><div class="type-card-icon">‚úçÔ∏è</div><div class="type-card-title">ƒ∞mzadan ƒ∞mtina</div></div>
                    </div>
                </div>
                <div class="form-section">
                    <div class="form-section-title">üìù Bilgiler</div>
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">Personel</label><input type="text" id="tut_personel" class="form-input"></div>
                        <div class="form-group"><label class="form-label">Pozisyon</label><select id="tut_pozisyon" class="form-select"></select></div>
                        <div class="form-group"><label class="form-label">Olay Tarihi</label><input type="date" id="tut_tarih" class="form-input"></div>
                        <div class="form-group"><label class="form-label">Olay Saati</label><input type="time" id="tut_saat" class="form-input"></div>
                        <div class="form-group"><label class="form-label">D√ºzenleme Tarihi</label><input type="date" id="tut_duz_tarih" class="form-input"></div>
                        <div class="form-group"><label class="form-label">D√ºzenleme Saati</label><input type="time" id="tut_duz_saat" class="form-input"></div>
                        <div class="form-group"><label class="form-label">≈ûube</label><select id="tut_sube" class="form-select"></select></div>
                        <div class="form-group" id="tut_kasa_field" style="display:none"><label class="form-label">A√ßƒ±k Tutarƒ± (TL)</label><input type="text" id="tut_kasa" class="form-input"></div>
                        <div class="form-group full"><label class="form-label">A√ßƒ±klama</label><textarea id="tut_aciklama" class="form-textarea" placeholder="Olayƒ± a√ßƒ±klayƒ±n..."></textarea></div>
                        <div class="form-group"><label class="form-label">1. ≈ûahit</label><input type="text" id="tut_sahit1" class="form-input"></div>
                        <div class="form-group"><label class="form-label">2. ≈ûahit</label><input type="text" id="tut_sahit2" class="form-input"></div>
                        <div class="form-group"><label class="form-label">D√ºzenleyen</label><input type="text" id="tut_duzenleyen" class="form-input"></div>
                        <div class="form-group"><label class="form-label">G√∂revi</label><input type="text" id="tut_gorev" class="form-input"></div>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="generateTutanak()">üìÑ Tutanak Olu≈ütur</button>
                    <button class="btn btn-ghost" onclick="clearForm('tut')">Temizle</button>
                </div>
            </div>

            <!-- Savunma -->
            <div class="page" id="page-savunma">
                <div class="back-link" onclick="goTo('dashboard')">‚Üê Ana Sayfa</div>
                <div class="page-header">
                    <div class="page-title">Savunma ƒ∞steme</div>
                </div>
                <div class="alert alert-warning"><span class="alert-icon">‚ö†Ô∏è</span><div>ƒ∞≈ü Kanunu Md. 19: Fesih √∂ncesi savunma almak zorunludur.</div></div>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">Personel</label><input type="text" id="sav_personel" class="form-input"></div>
                        <div class="form-group"><label class="form-label">Pozisyon</label><select id="sav_pozisyon" class="form-select"></select></div>
                        <div class="form-group"><label class="form-label">ƒ∞hlal Tarihi</label><input type="date" id="sav_tarih" class="form-input"></div>
                        <div class="form-group"><label class="form-label">≈ûube</label><select id="sav_sube" class="form-select"></select></div>
                        <div class="form-group"><label class="form-label">D√ºzenleme Tarihi</label><input type="date" id="sav_duz_tarih" class="form-input"></div>
                        <div class="form-group"><label class="form-label">D√ºzenleme Saati</label><input type="time" id="sav_duz_saat" class="form-input"></div>
                        <div class="form-group full"><label class="form-label">ƒ∞snat Edilen Eylem</label><textarea id="sav_isnat" class="form-textarea" placeholder="Detaylƒ± a√ßƒ±klayƒ±n..."></textarea></div>
                        <div class="form-group"><label class="form-label">Savunma S√ºresi</label><select id="sav_sure" class="form-select"><option value="1" selected>1 ƒ∞≈ü G√ºn√º (Minimum)</option><option value="2">2 ƒ∞≈ü G√ºn√º</option><option value="3">3 ƒ∞≈ü G√ºn√º</option><option value="5">5 ƒ∞≈ü G√ºn√º</option></select></div>
                        <div class="form-group"><label class="form-label">Yetkili</label><input type="text" id="sav_yetkili" class="form-input"></div>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="generateSavunma()">üìÑ Belge Olu≈ütur</button>
                </div>
            </div>

            <!-- Fesih -->
            <div class="page" id="page-fesih">
                <div class="back-link" onclick="goTo('dashboard')">‚Üê Ana Sayfa</div>
                <div class="page-header">
                    <div class="page-title">Fesih ƒ∞≈ülemleri</div>
                </div>
                <div class="form-section">
                    <div class="form-section-title">‚öñÔ∏è Fesih T√ºr√º</div>
                    <div class="type-cards">
                        <div class="type-card" data-type="hakli" onclick="selectFesihType('hakli',this)"><div class="type-card-icon">‚ö†Ô∏è</div><div class="type-card-title">Haklƒ± Fesih</div><div class="type-card-sub">Md. 25/II - Tazminatsƒ±z</div></div>
                        <div class="type-card" data-type="gecerli" onclick="selectFesihType('gecerli',this)"><div class="type-card-icon">üìã</div><div class="type-card-title">Ge√ßerli Fesih</div><div class="type-card-sub">Md. 18 - Tazminatlƒ±</div></div>
                        <div class="type-card" data-type="deneme" onclick="selectFesihType('deneme',this)"><div class="type-card-icon">üîÑ</div><div class="type-card-title">Deneme Feshi</div><div class="type-card-sub">Bildirimsiz</div></div>
                    </div>
                </div>
                <div id="fesih_6gun_alert" class="alert alert-danger" style="display:none"><span class="alert-icon">üö®</span><div><strong>6 ƒ∞≈ü G√ºn√º Uyarƒ±sƒ±!</strong> Haklƒ± fesih i√ßin s√ºre dolmu≈ü olabilir. Yine de belge olu≈üturabilirsiniz.</div></div>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">Personel</label><input type="text" id="fes_personel" class="form-input"></div>
                        <div class="form-group"><label class="form-label">Pozisyon</label><select id="fes_pozisyon" class="form-select"></select></div>
                        <div class="form-group"><label class="form-label">≈ûube</label><select id="fes_sube" class="form-select"></select></div>
                        <div class="form-group" id="fes_ogrenme_field"><label class="form-label">√ñƒürenme Tarihi</label><input type="date" id="fes_ogrenme" class="form-input" onchange="check6Gun()"></div>
                        <div class="form-group"><label class="form-label">ƒ∞≈üe Giri≈ü</label><input type="date" id="fes_giris" class="form-input"></div>
                        <div class="form-group"><label class="form-label">Fesih Tarihi</label><input type="date" id="fes_tarih" class="form-input"></div>
                        <div class="form-group full"><label class="form-label">Gerek√ße</label><textarea id="fes_gerekce" class="form-textarea"></textarea></div>
                        <div class="form-group"><label class="form-label">Dayanak</label><select id="fes_dayanak" class="form-select"></select></div>
                        <div class="form-group"><label class="form-label">Yetkili</label><input type="text" id="fes_yetkili" class="form-input"></div>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-danger" onclick="generateFesih()">‚õî Fesih Olu≈ütur</button>
                </div>
            </div>

            <!-- Bor√ß ƒ∞krar -->
            <div class="page" id="page-borc">
                <div class="back-link" onclick="goTo('dashboard')">‚Üê Ana Sayfa</div>
                <div class="page-header">
                    <div class="page-title">Bor√ß ƒ∞krar Muvafakatnamesi</div>
                </div>
                <div class="alert alert-info"><span class="alert-icon">‚ÑπÔ∏è</span><div>TBK 407/2: Her olay i√ßin ayrƒ± muvafakatname gerekir.</div></div>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">Personel</label><input type="text" id="borc_personel" class="form-input"></div>
                        <div class="form-group"><label class="form-label">TC</label><input type="text" id="borc_tc" class="form-input" maxlength="11"></div>
                        <div class="form-group"><label class="form-label">≈ûube</label><select id="borc_sube" class="form-select"></select></div>
                        <div class="form-group"><label class="form-label">Bor√ß T√ºr√º</label><select id="borc_tur" class="form-select"><option value="kasa">Kasa A√ßƒ±ƒüƒ±</option><option value="zimmet">Zimmet Hasarƒ±</option><option value="stok">Stok Kaybƒ±</option></select></div>
                        <div class="form-group"><label class="form-label">Tutar (TL)</label><input type="text" id="borc_tutar" class="form-input"></div>
                        <div class="form-group"><label class="form-label">Olay Tarihi</label><input type="date" id="borc_tarih" class="form-input"></div>
                        <div class="form-group"><label class="form-label">√ñdeme</label><select id="borc_odeme" class="form-select"><option value="tek">Tek Seferde</option><option value="taksit">Taksitle</option></select></div>
                        <div class="form-group"><label class="form-label">D√ºzenleme Tarihi</label><input type="date" id="borc_duz_tarih" class="form-input"></div>
                        <div class="form-group full"><label class="form-label">A√ßƒ±klama</label><textarea id="borc_aciklama" class="form-textarea"></textarea></div>
                        <div class="form-group"><label class="form-label">≈ûahit</label><input type="text" id="borc_sahit" class="form-input"></div>
                        <div class="form-group"><label class="form-label">Yetkili</label><input type="text" id="borc_yetkili" class="form-input"></div>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="generateBorc()">üìÑ Muvafakatname Olu≈ütur</button>
                </div>
            </div>

            <!-- Avans Talebi -->
            <div class="page" id="page-avans">
                <div class="back-link" onclick="goTo('dashboard')">‚Üê Ana Sayfa</div>
                <div class="page-header">
                    <div class="page-title">Avans Talebi Formu</div>
                </div>
                <div class="alert alert-info"><span class="alert-icon">‚ÑπÔ∏è</span><div>Personel avans talebini bu form ile iletir. ƒ∞≈üveren onayƒ± ile √∂deme yapƒ±lƒ±r.</div></div>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">Personel Adƒ± Soyadƒ±</label><input type="text" id="avans_personel" class="form-input"></div>
                        <div class="form-group"><label class="form-label">TC Kimlik No</label><input type="text" id="avans_tc" class="form-input" maxlength="11"></div>
                        <div class="form-group"><label class="form-label">≈ûube</label><select id="avans_sube" class="form-select"></select></div>
                        <div class="form-group"><label class="form-label">Pozisyon</label><select id="avans_pozisyon" class="form-select"></select></div>
                        <div class="form-group"><label class="form-label">IBAN</label><input type="text" id="avans_iban" class="form-input" placeholder="TR00 0000 0000 0000 0000 0000 00"></div>
                        <div class="form-group"><label class="form-label">Talep Edilen Tutar (TL)</label><input type="text" id="avans_tutar" class="form-input"></div>
                        <div class="form-group"><label class="form-label">Talep Tarihi</label><input type="date" id="avans_tarih" class="form-input"></div>
                        <div class="form-group"><label class="form-label">Geri √ñdeme ≈ûekli</label><input type="text" id="avans_odeme" class="form-input" value="Gelecek ay maa≈üƒ±ndan tek seferde kesilecektir" readonly style="background:#f5f5f5"></div>
                        <div class="form-group full"><label class="form-label">Avans Talebi Gerek√ßesi</label><textarea id="avans_gerekce" class="form-textarea" placeholder="Avans talebinizin nedenini kƒ±saca a√ßƒ±klayƒ±nƒ±z..."></textarea></div>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="generateAvans()">üìÑ Avans Talebi Olu≈ütur</button>
                </div>
            </div>

            <!-- Zimmet Formu -->
            <div class="page" id="page-zimmet">
                <div class="back-link" onclick="goTo('dashboard')">‚Üê Ana Sayfa</div>
                <div class="page-header">
                    <div class="page-title">Zimmet (Demirba≈ü Teslim) Formu</div>
                </div>
                <div class="alert alert-info"><span class="alert-icon">‚ÑπÔ∏è</span><div>TBK Md. 390 ve 462: ƒ∞≈ü√ßi, i≈üverenin mallarƒ±nƒ± √∂zenle korumakla y√ºk√ºml√ºd√ºr. Zimmet tutanaƒüƒ± ile teslim edilen e≈üyalar i√ßin personel mali sorumluluk ta≈üƒ±r.</div></div>
                <div class="form-section">
                    <div class="form-section-title">üìã Personel Bilgileri</div>
                    <div class="form-grid">
                        <div class="form-group"><label class="form-label">Personel Adƒ± Soyadƒ±</label><input type="text" id="zimmet_personel" class="form-input"></div>
                        <div class="form-group"><label class="form-label">TC Kimlik No</label><input type="text" id="zimmet_tc" class="form-input" maxlength="11"></div>
                        <div class="form-group"><label class="form-label">≈ûube</label><select id="zimmet_sube" class="form-select"></select></div>
                        <div class="form-group"><label class="form-label">Pozisyon</label><select id="zimmet_pozisyon" class="form-select"></select></div>
                        <div class="form-group"><label class="form-label">Teslim Tarihi</label><input type="date" id="zimmet_tarih" class="form-input"></div>
                        <div class="form-group"><label class="form-label">ƒ∞≈ülem T√ºr√º</label><select id="zimmet_islem" class="form-select"><option value="teslim">Teslim (Zimmet)</option><option value="iade">ƒ∞ade</option></select></div>
                    </div>
                </div>
                <div class="form-section">
                    <div class="form-section-title">üì¶ Zimmet Edilecek E≈üyalar</div>
                    <div id="zimmetListesi"></div>
                    <button class="btn btn-ghost" onclick="zimmetEkle()" style="margin-top:10px">+ E≈üya Ekle</button>
                </div>
                <div class="form-section">
                    <div class="form-group full"><label class="form-label">Ek Notlar / √ñzel Ko≈üullar</label><textarea id="zimmet_notlar" class="form-textarea" placeholder="Varsa √∂zel kullanƒ±m ko≈üullarƒ±, kƒ±sƒ±tlamalar..."></textarea></div>
                    <div class="form-group"><label class="form-label">Teslim Eden Yetkili</label><input type="text" id="zimmet_yetkili" class="form-input"></div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="generateZimmet()">üìÑ Zimmet Formu Olu≈ütur</button>
                </div>
            </div>

            <!-- Katalog -->
            <div class="page" id="page-katalog">
                <div class="back-link" onclick="goTo('dashboard')">‚Üê Ana Sayfa</div>
                <div class="page-header">
                    <div class="page-title">ƒ∞hlal Kataloƒüu</div>
                </div>
                <div class="tabs" id="katalogTabs">
                    <button class="tab active" onclick="filterKatalog('all',this)">T√ºm√º</button>
                    <button class="tab" onclick="filterKatalog('low',this)">D√º≈ü√ºk</button>
                    <button class="tab" onclick="filterKatalog('medium',this)">Orta</button>
                    <button class="tab" onclick="filterKatalog('high',this)">Y√ºksek</button>
                </div>
                <div class="violation-list" id="violationList"></div>
            </div>

            <!-- Personel Listesi -->
            <div class="page" id="page-personel">
                <div class="back-link" onclick="goTo('dashboard')">‚Üê Ana Sayfa</div>
                <div class="page-header">
                    <div class="page-title">üë• Personel Listesi</div>
                    <div class="page-subtitle">T√ºm personeli g√∂r√ºnt√ºle ve y√∂net</div>
                </div>
                <div class="form-section">
                    <div class="form-section-title" style="justify-content:space-between">
                        <span>üìã Kayƒ±tlƒ± Personel</span>
                        <button class="btn btn-primary btn-sm" onclick="showAddPersonelModal()">+ Yeni Personel</button>
                    </div>
                    <div class="form-group">
                        <input type="text" id="personelSearch" class="form-input" placeholder="üîç ƒ∞sim, TC veya ≈üube ara..." oninput="filterPersonel()">
                    </div>
                    <div id="personelListContainer" style="margin-top:16px">
                        <p style="color:var(--tx2);text-align:center;padding:40px">Hen√ºz personel kaydƒ± yok. "Yeni Personel" butonuna tƒ±klayarak ekleyin.</p>
                    </div>
                </div>
            </div>

            <!-- Shift Planƒ± -->
            <div class="page" id="page-shift">
                <div class="back-link" onclick="goTo('dashboard')">‚Üê Ana Sayfa</div>
                <div class="page-header">
                    <div class="page-title">üìÖ Shift Planƒ±</div>
                    <div class="page-subtitle">Haftalƒ±k vardiya planlamasƒ±</div>
                </div>
                <div class="form-section">
                    <div class="form-section-title">üìç Maƒüaza ve D√∂nem Se√ßimi</div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Maƒüaza</label>
                            <select id="shiftSube" class="form-select" onchange="loadShiftList()"></select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Hafta</label>
                            <select id="shiftHafta" class="form-select" onchange="loadShiftWeek()">
                                <option value="">-- √ñnce Maƒüaza Se√ßin --</option>
                            </select>
                        </div>
                        <div class="form-group" style="display:flex;align-items:flex-end;gap:8px">
                            <button class="btn btn-primary" onclick="showNewShiftModal()">+ Yeni Hafta</button>
                        </div>
                    </div>
                    <!-- Y√∂netici i√ßin Excel Y√ºkleme (gizli) -->
                    <div id="adminExcelUpload" style="display:none;margin-top:16px;padding:12px;background:var(--bg3);border-radius:8px;border:1px dashed var(--bg4)">
                        <div style="display:flex;align-items:center;justify-content:space-between">
                            <span style="font-size:.8rem;color:var(--tx2)">üîß Y√∂netici: Excel verilerini i√ße aktar</span>
                            <button class="btn btn-ghost btn-sm" onclick="uploadExcelToFirebase()" style="font-size:.75rem">üì• Excel Y√ºkle</button>
                        </div>
                    </div>
                </div>
                
                <!-- Shift Tablosu -->
                <div class="form-section">
                    <div class="form-section-title">üìã Shift Tablosu</div>
                    <div id="shiftTableContainer">
                        <p style="color:var(--tx2);text-align:center;padding:40px">‚¨ÜÔ∏è Yukarƒ±dan maƒüaza ve hafta se√ßerek shift planƒ±nƒ± g√∂r√ºnt√ºleyin.</p>
                    </div>
                </div>
                
                <!-- Ge√ßmi≈ü Shiftler -->
                <div class="form-section">
                    <div class="form-section-title">üìö Ge√ßmi≈ü Shiftler</div>
                    <div id="shiftHistoryContainer">
                        <p style="color:var(--tx2);text-align:center;padding:20px">Maƒüaza se√ßerek ge√ßmi≈ü shiftleri g√∂r√ºnt√ºleyin.</p>
                    </div>
                </div>
            </div>

            <!-- Puantaj -->
            <div class="page" id="page-puantaj">
                <div class="back-link" onclick="goTo('dashboard')">‚Üê Ana Sayfa</div>
                <div class="page-header">
                    <div class="page-title">‚≠ê Puantaj Sistemi</div>
                    <div class="page-subtitle">Personel performans deƒüerlendirme</div>
                </div>
                <div class="form-section">
                    <div class="form-section-title">üìÖ Puantaj D√∂nemi</div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Ay</label>
                            <select id="puantajAy" class="form-select" onchange="loadPuantaj()">
                                <option value="01">Ocak</option>
                                <option value="02">≈ûubat</option>
                                <option value="03">Mart</option>
                                <option value="04">Nisan</option>
                                <option value="05">Mayƒ±s</option>
                                <option value="06">Haziran</option>
                                <option value="07">Temmuz</option>
                                <option value="08">Aƒüustos</option>
                                <option value="09">Eyl√ºl</option>
                                <option value="10">Ekim</option>
                                <option value="11">Kasƒ±m</option>
                                <option value="12">Aralƒ±k</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Yƒ±l</label>
                            <select id="puantajYil" class="form-select" onchange="loadPuantaj()">
                                <option value="2026">2026</option>
                                <option value="2025">2025</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">≈ûube</label>
                            <select id="puantajSube" class="form-select" onchange="loadPuantaj()"></select>
                        </div>
                    </div>
                </div>
                <div class="form-section">
                    <div class="form-section-title" style="justify-content:space-between">
                        <span>‚≠ê Puantaj Tablosu</span>
                        <button class="btn btn-sm btn-ghost" onclick="showPuantajRules()">üìã Kurallar</button>
                    </div>
                    <div id="puantajTableContainer">
                        <p style="color:var(--tx2);text-align:center;padding:40px">Puantaj verisi y√ºkleniyor...</p>
                    </div>
                </div>
            </div>

            <!-- Preview -->
            <div class="page" id="page-preview">
                <div class="back-link" onclick="goBack()">‚Üê Geri</div>
                <div class="preview-container">
                    <div class="preview-toolbar">
                        <div class="preview-title" id="previewTitle">√ñnizleme</div>
                        <div class="preview-actions">
                            <button class="btn btn-sm btn-ghost" onclick="printDoc()">üñ®Ô∏è Yazdƒ±r</button>
                            <button class="btn btn-sm btn-primary" onclick="downloadPDF()">üì• PDF</button>
                        </div>
                    </div>
                    <div class="preview-content" id="previewContent"></div>
                </div>
            </div>

            <!-- Admin Panel -->
            <div class="page" id="page-admin">
                <div class="back-link" onclick="goTo('dashboard')">‚Üê Ana Sayfa</div>
                <div class="page-header">
                    <div class="page-title">‚öôÔ∏è Y√∂netim Paneli</div>
                    <div class="page-subtitle">Sistem ayarlarƒ±nƒ± y√∂netin</div>
                </div>
                <div class="admin-tabs">
                    <button class="admin-tab active" onclick="showAdminTab('genel',this)">Genel</button>
                    <button class="admin-tab" onclick="showAdminTab('kullanicilar',this)">Kullanƒ±cƒ±lar</button>
                    <button class="admin-tab" onclick="showAdminTab('puantajKurallar',this)">Puantaj Kurallarƒ±</button>
                    <button class="admin-tab" onclick="showAdminTab('subeler',this)">≈ûubeler</button>
                    <button class="admin-tab" onclick="showAdminTab('pozisyonlar',this)">Pozisyonlar</button>
                    <button class="admin-tab" onclick="showAdminTab('ihlaller',this)">ƒ∞hlaller</button>
                    <button class="admin-tab" onclick="showAdminTab('sablonlar',this)">S√∂zle≈üme ≈ûablonlarƒ±</button>
                    <button class="admin-tab" onclick="showAdminTab('belgeler',this)">Belge ≈ûablonlarƒ±</button>
                </div>
                
                <!-- Genel -->
                <div class="admin-section active" id="admin-genel">
                    <div class="admin-card" id="companySettingsCard">
                        <div class="admin-card-header"><div class="admin-card-title">≈ûirket Bilgileri</div></div>
                        <div class="form-grid">
                            <div class="form-group full"><label class="form-label">≈ûirket Adƒ±</label><input type="text" id="admin_company_name" class="form-input"></div>
                            <div class="form-group"><label class="form-label">MERSƒ∞S No</label><input type="text" id="admin_mersis" class="form-input"></div>
                            <div class="form-group full"><label class="form-label">Adres</label><input type="text" id="admin_address" class="form-input"></div>
                        </div>
                        <div class="btn-group"><button class="btn btn-primary btn-sm" onclick="saveCompany()">Kaydet</button></div>
                    </div>
                    <!-- Admin ≈ûifre Deƒüi≈ütirme - Sadece admin g√∂recek -->
                    <div class="admin-card" id="adminPasswordCard" style="margin-top:20px;display:none">
                        <div class="admin-card-header"><div class="admin-card-title">üîê Y√∂netici Giri≈ü Bilgileri</div></div>
                        <p style="color:var(--tx2);font-size:.85rem;margin-bottom:16px">Y√∂netici hesabƒ±nƒ±n kullanƒ±cƒ± adƒ± ve ≈üifresini deƒüi≈ütirin.</p>
                        <div class="form-grid">
                            <div class="form-group"><label class="form-label">Yeni Kullanƒ±cƒ± Adƒ±</label><input type="text" id="admin_new_username" class="form-input" placeholder="Mevcut: admin"></div>
                            <div class="form-group"><label class="form-label">Yeni ≈ûifre</label><input type="password" id="admin_new_password" class="form-input" placeholder="Yeni ≈üifre girin"></div>
                            <div class="form-group"><label class="form-label">≈ûifre Tekrar</label><input type="password" id="admin_confirm_password" class="form-input" placeholder="≈ûifreyi tekrar girin"></div>
                        </div>
                        <div class="btn-group"><button class="btn btn-primary btn-sm" onclick="updateAdminCredentials()">üîë G√ºncelle</button></div>
                    </div>
                    <!-- Veri Temizleme - Sadece admin g√∂recek -->
                    <div class="admin-card" id="dataCleanupCard" style="margin-top:20px;display:none">
                        <div class="admin-card-header"><div class="admin-card-title">üßπ Veri Temizleme</div></div>
                        <p style="color:var(--tx2);font-size:.85rem;margin-bottom:16px">Duplicate kayƒ±tlarƒ± temizleyin ve veri tutarlƒ±lƒ±ƒüƒ±nƒ± saƒülayƒ±n.</p>
                        <div style="display:flex;gap:12px;flex-wrap:wrap">
                            <button class="btn btn-ghost btn-sm" onclick="cleanDuplicatePersonel()">üë• Duplicate Personel Temizle</button>
                            <button class="btn btn-ghost btn-sm" onclick="cleanDuplicateShifts()">üìÖ Duplicate Shift Temizle</button>
                        </div>
                        <div id="cleanupResults" style="margin-top:12px;padding:12px;background:var(--bg3);border-radius:8px;display:none"></div>
                    </div>
                    <!-- Rol √ñnizleme - Sadece admin g√∂recek -->
                    <div class="admin-card" id="rolePreviewCard" style="margin-top:20px;display:none">
                        <div class="admin-card-header"><div class="admin-card-title">üëÅÔ∏è Rol √ñnizleme</div></div>
                        <p style="color:var(--tx2);font-size:.85rem;margin-bottom:16px">Diƒüer kullanƒ±cƒ± rollerinin aray√ºzde neleri g√∂rebileceƒüini √∂nizleyin.</p>
                        <div id="rolePreviewContent">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">√ñnizlenecek Rol</label>
                                    <select id="previewRoleSelect" class="form-input">
                                        <option value="">-- Rol Se√ßin --</option>
                                        <option value="bolge_muduru">B√∂lge M√ºd√ºr√º</option>
                                        <option value="magaza_muduru">Maƒüaza M√ºd√ºr√º</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">√ñnizleme ≈ûubesi</label>
                                    <select id="previewBranchSelect" class="form-input">
                                        <option value="">-- ≈ûube Se√ßin --</option>
                                        <option value="≈ûi≈üli">≈ûi≈üli</option>
                                        <option value="Tuzla">Tuzla</option>
                                    </select>
                                </div>
                            </div>
                            <div class="btn-group" style="margin-top:16px">
                                <button class="btn btn-primary btn-sm" onclick="startRolePreview()">üëÅÔ∏è √ñnizlemeyi Ba≈ülat</button>
                            </div>
                        </div>
                        <div id="rolePreviewActive" style="display:none;padding:16px;background:var(--accent);border-radius:10px;text-align:center">
                            <div style="color:#fff;font-weight:600;font-size:.95rem;margin-bottom:8px">üîç √ñnizleme Modu Aktif</div>
                            <div style="color:rgba(255,255,255,.8);font-size:.85rem;margin-bottom:12px">
                                <span id="previewRoleName">-</span> olarak g√∂r√ºnt√ºl√ºyorsunuz
                                (<span id="previewBranchName">-</span>)
                            </div>
                            <button class="btn btn-ghost btn-sm" style="background:rgba(255,255,255,.2);color:#fff;border-color:rgba(255,255,255,.3)" onclick="stopRolePreview()">‚úï √ñnizlemeyi Sonlandƒ±r</button>
                        </div>
                    </div>
                </div>

                <!-- Kullanƒ±cƒ±lar -->
                <div class="admin-section" id="admin-kullanicilar">
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <div class="admin-card-title">Sistem Kullanƒ±cƒ±larƒ±</div>
                            <button class="btn btn-sm btn-primary" onclick="showAddUserModal()">+ Yeni Kullanƒ±cƒ±</button>
                        </div>
                        <p style="color:var(--tx2);font-size:.85rem;margin-bottom:16px">Sisteme giri≈ü yapabilecek kullanƒ±cƒ±larƒ± y√∂netin.</p>
                        <div class="admin-list" id="userList">
                            <p style="color:var(--tx2);text-align:center;padding:20px">Kullanƒ±cƒ±lar y√ºkleniyor...</p>
                        </div>
                    </div>
                    <div class="admin-card" style="margin-top:20px">
                        <div class="admin-card-header"><div class="admin-card-title">Rol Yetkileri</div></div>
                        <p style="color:var(--tx2);font-size:.85rem;margin-bottom:16px">Her rol√ºn hangi sayfalara eri≈üebileceƒüini belirleyin.</p>
                        <div class="form-group">
                            <label class="form-label">Rol Se√ß</label>
                            <select id="roleSelect" class="form-select" onchange="loadRolePermissions()">
                                <option value="bolge_muduru">B√∂lge M√ºd√ºr√º</option>
                                <option value="magaza_muduru">Maƒüaza M√ºd√ºr√º</option>
                            </select>
                        </div>
                        <div id="permissionsContainer" style="margin-top:16px"></div>
                        <div class="btn-group" style="margin-top:16px"><button class="btn btn-primary btn-sm" onclick="saveRolePermissions()">Yetkileri Kaydet</button></div>
                    </div>
                </div>

                <!-- Puantaj Kurallarƒ± -->
                <div class="admin-section" id="admin-puantajKurallar">
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <div class="admin-card-title">‚≠ê Puantaj Kurallarƒ±</div>
                            <button class="btn btn-sm btn-primary" onclick="showAddPuantajRuleModal()">+ Kural Ekle</button>
                        </div>
                        <p style="color:var(--txdark2);font-size:.85rem;margin-bottom:16px">Puantaj deƒüerlendirmesinde kullanƒ±lacak kurallarƒ± belirleyin. Kurallar otomatik olarak prim hesaplamasƒ±nƒ± etkiler.</p>
                        <div class="admin-list" id="puantajRulesList">
                            <p style="color:var(--tx2);text-align:center;padding:20px">Kurallar y√ºkleniyor...</p>
                        </div>
                    </div>
                </div>

                <!-- ≈ûubeler -->
                <div class="admin-section" id="admin-subeler">
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <div class="admin-card-title">üìç ≈ûubeler</div>
                            <button class="btn btn-sm btn-primary" onclick="addBranch()">+ Ekle</button>
                        </div>
                        <div class="admin-list" id="branchList"></div>
                    </div>
                </div>

                <!-- Pozisyonlar -->
                <div class="admin-section" id="admin-pozisyonlar">
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <div class="admin-card-title">üëî Pozisyonlar</div>
                            <button class="btn btn-sm btn-primary" onclick="addPosition()">+ Ekle</button>
                        </div>
                        <div class="admin-list" id="positionList"></div>
                    </div>
                </div>

                <!-- ƒ∞hlaller -->
                <div class="admin-section" id="admin-ihlaller">
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <div class="admin-card-title">‚ö†Ô∏è ƒ∞hlal Kataloƒüu</div>
                            <button class="btn btn-sm btn-primary" onclick="addViolation()">+ Ekle</button>
                        </div>
                        <div class="admin-list" id="violationAdminList"></div>
                    </div>
                </div>

                <!-- ≈ûablonlar -->
                <div class="admin-section" id="admin-sablonlar">
                    <div class="admin-card">
                        <div class="admin-card-header"><div class="admin-card-title">üìÑ S√∂zle≈üme ≈ûablonlarƒ±</div></div>
                        <p style="color:var(--txdark2);font-size:.85rem;margin-bottom:16px">Her pozisyon i√ßin HTML ≈üablon d√ºzenleyin. Placeholder'lar: <code style="background:var(--surface3);padding:2px 6px;border-radius:4px">{{AD_SOYAD}}</code>, <code style="background:var(--surface3);padding:2px 6px;border-radius:4px">{{TC}}</code>, <code style="background:var(--surface3);padding:2px 6px;border-radius:4px">{{ADRES}}</code>, <code style="background:var(--surface3);padding:2px 6px;border-radius:4px">{{IBAN}}</code>, <code style="background:var(--surface3);padding:2px 6px;border-radius:4px">{{UCRET}}</code>, <code style="background:var(--surface3);padding:2px 6px;border-radius:4px">{{BASLAMA}}</code>, <code style="background:var(--surface3);padding:2px 6px;border-radius:4px">{{SUBE}}</code></p>
                        <div class="form-group">
                            <label class="form-label">Pozisyon Se√ß</label>
                            <select id="template_pozisyon" class="form-select" onchange="loadTemplate()"></select>
                        </div>
                        <div class="form-group" style="margin-top:16px">
                            <label class="form-label">≈ûablon ƒ∞√ßeriƒüi (HTML)</label>
                            <textarea id="template_content" class="form-textarea" style="min-height:300px;font-family:var(--mono);font-size:.8rem"></textarea>
                        </div>
                        <div class="btn-group"><button class="btn btn-primary btn-sm" onclick="saveTemplate()">≈ûablonu Kaydet</button></div>
                    </div>
                </div>

                <!-- Belge ≈ûablonlarƒ± -->
                <div class="admin-section" id="admin-belgeler">
                    <div class="admin-card">
                        <div class="admin-card-header">
                            <div class="admin-card-title">üìù Belge ≈ûablonlarƒ± D√ºzenleyici</div>
                            <div id="docTemplateUnsaved" style="display:none;color:var(--yellow);font-size:.8rem;font-weight:500">‚ö†Ô∏è Kaydedilmemi≈ü deƒüi≈üiklikler</div>
                        </div>
                        <p style="color:var(--txdark2);font-size:.85rem;margin-bottom:16px">Tutanak, savunma, fesih ve bor√ß ikrar belgelerinin i√ßeriklerini d√ºzenleyin. Deƒüi≈üiklikler kaydedilmezse varsayƒ±lan ≈üablonlar kullanƒ±lƒ±r.</p>
                        
                        <div style="display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px">
                            <button class="btn btn-sm btn-primary" onclick="selectDocTemplateCategory('tutanak')">üìã Tutanak</button>
                            <button class="btn btn-sm btn-ghost" onclick="selectDocTemplateCategory('savunma')">üìù Savunma</button>
                            <button class="btn btn-sm btn-ghost" onclick="selectDocTemplateCategory('fesih')">‚ö†Ô∏è Fesih</button>
                            <button class="btn btn-sm btn-ghost" onclick="selectDocTemplateCategory('borc')">üí∞ Bor√ß ƒ∞krar</button>
                        </div>
                        
                        <!-- Tutanak Alt T√ºrleri -->
                        <div id="docTemplate-tutanak" class="doc-template-panel">
                            <div class="form-group">
                                <label class="form-label">Tutanak T√ºr√º</label>
                                <select class="form-select" id="tutanak_sub_type" onchange="loadDocTemplate('tutanak', this.value)">
                                    <option value="olay">Olay Tespit Tutanaƒüƒ±</option>
                                    <option value="devamsizlik">Devamsƒ±zlƒ±k Tutanaƒüƒ±</option>
                                    <option value="kasa">Kasa A√ßƒ±ƒüƒ± Tutanaƒüƒ±</option>
                                    <option value="imza">ƒ∞mzadan ƒ∞mtina Tutanaƒüƒ±</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Savunma -->
                        <div id="docTemplate-savunma" class="doc-template-panel" style="display:none">
                            <p style="color:var(--txdark2);font-size:.85rem">Savunma isteme yazƒ±sƒ± ≈üablonu</p>
                        </div>
                        
                        <!-- Fesih Alt T√ºrleri -->
                        <div id="docTemplate-fesih" class="doc-template-panel" style="display:none">
                            <div class="form-group">
                                <label class="form-label">Fesih T√ºr√º</label>
                                <select class="form-select" id="fesih_sub_type" onchange="loadDocTemplate('fesih', this.value)">
                                    <option value="hakli">Haklƒ± Fesih (25/II)</option>
                                    <option value="gecerli">Ge√ßerli Fesih (18)</option>
                                    <option value="deneme">Deneme S√ºresi Feshi</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Bor√ß ƒ∞krar -->
                        <div id="docTemplate-borc" class="doc-template-panel" style="display:none">
                            <p style="color:var(--txdark2);font-size:.85rem">Bor√ß ikrar ve mahsup muvafakatnamesi ≈üablonu</p>
                        </div>
                        
                        <div class="form-group" style="margin-top:16px">
                            <label class="form-label">≈ûablon A√ßƒ±klamasƒ± <span style="color:var(--txdark2);font-size:.75rem">(Yer tutucular: {{PERSONEL}}, {{TC}}, {{SUBE}}, {{TARIH}}, {{SAAT}}, {{ACIKLAMA}}, {{DAYANAK}})</span></label>
                            <textarea id="doc_template_content" class="form-textarea" style="min-height:250px;font-family:var(--mono);font-size:.8rem" oninput="trackDocTemplateChanges()"></textarea>
                        </div>
                        
                        <div class="btn-group" style="display:flex;gap:8px;flex-wrap:wrap">
                            <button class="btn btn-primary btn-sm" onclick="saveDocTemplate()">üíæ ≈ûablonu Kaydet</button>
                            <button class="btn btn-ghost btn-sm" onclick="previewDocTemplate()">üëÅÔ∏è √ñnizle</button>
                            <button class="btn btn-sm" style="background:var(--yellow);color:#000" onclick="resetDocTemplate()">üîÑ Varsayƒ±lana D√∂n</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script>
// ==================== FIREBASE CONFIG ====================
const firebaseConfig = {
    apiKey: "AIzaSyCbc-8oWwOj2eR0J19f3T-UYT9vGI8PL7M",
    authDomain: "moonberry-ik.firebaseapp.com",
    projectId: "moonberry-ik",
    storageBucket: "moonberry-ik.firebasestorage.app",
    messagingSenderId: "4872042742",
    appId: "1:4872042742:web:24a9e5935e2b5591a794d7"
};

// Firebase deƒüi≈ükenleri - DOMContentLoaded'da initialize edilecek
let db = null;

// ==================== AUTH & SESSION ====================
let currentUser = null;
let loginAttempts = 0;
let lockoutUntil = null;
const MAX_ATTEMPTS = 5;
const LOCKOUT_DURATION = 30 * 60 * 1000; // 30 dakika

// Varsayƒ±lan kullanƒ±cƒ±lar (Firebase'de yoksa olu≈üturulacak)
const DEFAULT_USERS = [
    { username: 'admin', password: 'moonberry2024', role: 'yonetici', name: 'Y√∂netici', branch: 'all' }
];

// Varsayƒ±lan puantaj kurallarƒ±
const DEFAULT_PUANTAJ_RULES = [
    { id: 'R01', title: '5x "1 Yƒ±ldƒ±z"', effect: 'prim_yok', desc: 'Aynƒ± ay i√ßinde 5 kez 1 yƒ±ldƒ±z alan personel prim hakkƒ±nƒ± kaybeder' },
    { id: 'R02', title: 'Online ‚â§2 Yƒ±ldƒ±z', effect: '-1', desc: 'Online platformlarda (Google, Yemeksepeti vb.) 2 veya altƒ± yƒ±ldƒ±z alƒ±nmasƒ±' },
    { id: 'R03', title: 'Mazeretsiz Devamsƒ±zlƒ±k', effect: '-2', desc: 'Mazeretsiz devamsƒ±zlƒ±k yapƒ±lmasƒ±' },
    { id: 'R04', title: 'M√º≈üteri ≈ûikayeti', effect: '-1', desc: 'Doƒürulanmƒ±≈ü m√º≈üteri ≈üikayeti' }
];

// Varsayƒ±lan rol yetkileri
const DEFAULT_PERMISSIONS = {
    yonetici: { all: true },
    bolge_muduru: { 
        dashboard: true, personel: true, puantaj: true, sozlesme: true, 
        tutanak: true, savunma: true, fesih: true, borc: true, avans: true, 
        zimmet: true, katalog: true, admin: true,
        admin_kullanicilar: true, admin_puantajKurallar: true, admin_subeler: true,
        admin_pozisyonlar: true, admin_ihlaller: true, admin_sablonlar: true, admin_belgeler: true
    },
    magaza_muduru: { 
        dashboard: true, personel: true, puantaj: true, sozlesme: true, 
        tutanak: true, savunma: true, fesih: true, borc: true, avans: true, 
        zimmet: true, katalog: true, admin: false,
        admin_kullanicilar: false, admin_sablonlar: false
    }
};

// ==================== DEFAULT STATE ====================
const DEFAULT_STATE = {
    pin: '2632',
    company: {
        name: 'TAMASLAN KAFE RESTORAN VE GIDA Hƒ∞ZMETLERƒ∞ SANAYƒ∞ ƒ∞√á VE DI≈û Tƒ∞CARET Lƒ∞Mƒ∞TED ≈ûƒ∞RKETƒ∞',
        short: 'MOONBERRY COFFEE',
        mersis: '0817072351000001',
        address: 'DUATEPE MAH. ERGENEKON CAD. KONAK APT NO: 109 C ≈ûƒ∞≈ûLƒ∞ / ƒ∞STANBUL',
        tel: '+90 533 486 63 66',
        email: 'info@moonberrycoffee.com',
        vergiNo: '8170723510',
        vergiDairesi: '≈ûi≈üli',
        kep: 'tamaslan@hs01.kep.tr'
    },
    branches: ['≈ûi≈üli (Merkez)', 'Tuzla Port'],
    branchCodes: {'≈ûi≈üli (Merkez)': 'SIS', 'Tuzla Port': 'TZL'},
    positions: [
        {id: 'barista', name: 'Barista / Servis', type: 'Mavi Yaka'},
        {id: 'mudur_yardimcisi', name: 'M√ºd√ºr Yardƒ±mcƒ±sƒ±', type: 'Gri Yaka'},
        {id: 'magaza_muduru', name: 'Maƒüaza M√ºd√ºr√º', type: 'Beyaz Yaka'},
        {id: 'bolge_muduru', name: 'B√∂lge M√ºd√ºr√º', type: 'Stratejik'}
    ],
    violations: [
        {id:'V01',title:'Telefon Kullanƒ±mƒ±',risk:'low',legal:'ƒ∞≈ü K. 25/II-h',steps:['S√∂zl√º uyarƒ±','Yazƒ±lƒ± uyarƒ±','ƒ∞htar'],desc:'Mesai saatinde telefon kullanƒ±mƒ±'},
        {id:'V02',title:'Ge√ß Kalma (<30dk)',risk:'low',legal:'ƒ∞≈ü K. 25/II-h',steps:['S√∂zl√º uyarƒ±','Tekrarda yazƒ±lƒ±','ƒ∞htar'],desc:'30 dakika altƒ± ge√ß kalma'},
        {id:'V03',title:'Ge√ß Kalma (>30dk)',risk:'medium',legal:'ƒ∞≈ü K. 25/II-g',steps:['Tutanak','Savunma','ƒ∞htar','Fesih'],desc:'30 dakika √ºst√º ge√ß kalma'},
        {id:'V04',title:'1 G√ºn Devamsƒ±zlƒ±k',risk:'medium',legal:'ƒ∞≈ü K. 25/II-g',steps:['Tutanak','Savunma','ƒ∞htar'],desc:'Mazeretsiz 1 g√ºn devamsƒ±zlƒ±k'},
        {id:'V05',title:'2+ G√ºn Devamsƒ±zlƒ±k',risk:'high',legal:'ƒ∞≈ü K. 25/II-g',steps:['Her g√ºn tutanak','Savunma','6 i≈ü g√ºn√º i√ßinde fesih'],desc:'Ardƒ± ardƒ±na 2+ g√ºn mazeretsiz devamsƒ±zlƒ±k - Haklƒ± fesih sebebi'},
        {id:'V06',title:'Kasa A√ßƒ±ƒüƒ±',risk:'medium',legal:'TBK 407',steps:['Sayƒ±m tutanaƒüƒ±','Savunma','Bor√ß ƒ∞krar'],desc:'Kasada nakit eksikliƒüi tespit edilmesi'},
        {id:'V07',title:'√úr√ºn G√∂t√ºrme',risk:'high',legal:'ƒ∞≈ü K. 25/II-e',steps:['Tutanak','Kamera kayƒ±t','Savunma','Fesih'],desc:'ƒ∞zinsiz √ºr√ºn g√∂t√ºrme - G√ºveni k√∂t√ºye kullanma'},
        {id:'V08',title:'M√º≈üteriye Hakaret',risk:'high',legal:'ƒ∞≈ü K. 25/II-d',steps:['Tutanak','≈ûikayet kaydƒ±','Savunma','Fesih'],desc:'M√º≈üteriye kaba davranƒ±≈ü veya hakaret'},
        {id:'V09',title:'ƒ∞≈üyerinde Kavga',risk:'high',legal:'ƒ∞≈ü K. 25/II-d',steps:['ƒ∞ki taraf tutanak','≈ûahit ifadeleri','Savunma','Fesih'],desc:'ƒ∞≈üyerinde fiziksel veya s√∂zl√º kavga'},
        {id:'V10',title:'Hijyen ƒ∞hlali',risk:'high',legal:'ƒ∞≈ü K. 25/II-ƒ±',steps:['Tutanak','Savunma','Derhal fesih'],desc:'El yƒ±kamama, SKT ihlali, √ßapraz bula≈üma'},
        {id:'V11',title:'Alkol/Uyu≈üturucu',risk:'high',legal:'ƒ∞≈ü K. 25/II-d',steps:['Tutanak (2 ≈üahit)','Derhal fesih'],desc:'ƒ∞≈üe alkoll√º veya uyu≈üturucu etkisinde gelme'},
        {id:'V12',title:'ƒ∞≈ü Reddi',risk:'medium',legal:'ƒ∞≈ü K. 25/II-h',steps:['Tutanak','Savunma','ƒ∞htar','Fesih'],desc:'Verilen g√∂revi reddetme - "Benim i≈üim deƒüil" tutumu'},
        {id:'V13',title:'Ticari Sƒ±r ƒ∞f≈üasƒ±',risk:'high',legal:'TCK 239',steps:['Delil toplama','Tutanak','Fesih + Su√ß duyurusu'],desc:'Re√ßete, maliyet, tedarik√ßi bilgisi payla≈üƒ±mƒ±'},
        {id:'V14',title:'Sosyal Medya ƒ∞hlali',risk:'medium',legal:'ƒ∞≈ü K. 25/II-b',steps:['Ekran g√∂r√ºnt√ºs√º','Tutanak','Savunma'],desc:'ƒ∞≈üveren aleyhine sosyal medya payla≈üƒ±mƒ±'},
        {id:'V15',title:'ƒ∞mzadan ƒ∞mtina',risk:'low',legal:'Yargƒ±tay i√ßtihatƒ±',steps:['ƒ∞mtina tutanaƒüƒ±','2 ≈üahit imzasƒ±'],desc:'Belge imzalamaktan ka√ßƒ±nma'},
        {id:'V16',title:'Kƒ±lƒ±k Kƒ±yafet',risk:'low',legal:'ƒ∞≈ü K. 25/II-h',steps:['S√∂zl√º uyarƒ±','Yazƒ±lƒ± uyarƒ±','ƒ∞htar'],desc:'√úniforma giymeme veya uygunsuz kƒ±yafet'},
        {id:'V17',title:'Demirba≈ü Hasarƒ±',risk:'medium',legal:'TBK 407',steps:['Hasar tutanaƒüƒ±','Savunma','Bor√ß ƒ∞krar'],desc:'POS, tablet, ekipman hasarƒ±'},
        {id:'V18',title:'Yetkisiz ƒ∞ndirim',risk:'high',legal:'ƒ∞≈ü K. 25/II-e',steps:['POS kaydƒ± kontrol√º','Tutanak','Fesih'],desc:'ƒ∞zinsiz √ºcretsiz √ºr√ºn verme veya indirim yapma'},
        {id:'V19',title:'Hƒ±rsƒ±zlƒ±k',risk:'high',legal:'ƒ∞≈ü K. 25/II-e + TCK 141',steps:['Tutanak','Kamera kayƒ±t','Kolluk bildirimi','Derhal fesih + Su√ß duyurusu'],desc:'ƒ∞≈üyerinden para, √ºr√ºn veya malzeme √ßalma'},
        {id:'V20',title:'Zimmet',risk:'high',legal:'TCK 247',steps:['Mali denetim','Tutanak','Fesih + Su√ß duyurusu'],desc:'Kendisine tevdi edilen ≈üirket malƒ±nƒ± sahiplenme'},
        {id:'V21',title:'Sahte Belge',risk:'high',legal:'TCK 204 + ƒ∞≈ü K. 25/II-a',steps:['Belge incelemesi','Tutanak','Fesih + Su√ß duyurusu'],desc:'Sahte rapor, diploma veya evrak sunma'},
        {id:'V22',title:'ƒ∞zinsiz ƒ∞≈üten Ayrƒ±lma',risk:'high',legal:'ƒ∞≈ü K. 25/II-g',steps:['Devamsƒ±zlƒ±k tutanaƒüƒ±','Noter ihtarƒ±','Fesih'],desc:'Haber vermeden i≈üi terk etme'},
        {id:'V23',title:'Cinsel Taciz',risk:'high',legal:'ƒ∞≈ü K. 25/II-c + TCK 105',steps:['≈ûikayet kaydƒ±','ƒ∞fade alma','Fesih + Su√ß duyurusu'],desc:'ƒ∞≈üyerinde cinsel taciz'},
        {id:'V24',title:'S√∂zl√º Taciz',risk:'medium',legal:'ƒ∞≈ü K. 25/II-d',steps:['Tutanak','≈ûahit ifadeleri','Savunma','Fesih'],desc:'S√∂zl√º sarkƒ±ntƒ±lƒ±k, uygunsuz espri veya laf atma'},
        {id:'V25',title:'Tehdit',risk:'high',legal:'ƒ∞≈ü K. 25/II-d + TCK 106',steps:['Tutanak','≈ûahit ifadeleri','Fesih + Su√ß duyurusu'],desc:'ƒ∞≈ü arkada≈üƒ± veya y√∂neticiye tehdit'},
        {id:'V26',title:'Mobbing Uygulama',risk:'high',legal:'ƒ∞≈ü K. 25/II-d + TBK 417',steps:['≈ûikayet kaydƒ±','Soru≈üturma','Savunma','Fesih'],desc:'Sistematik psikolojik baskƒ± uygulama'},
        {id:'V27',title:'G√ºvenlik Kuralƒ± ƒ∞hlali',risk:'high',legal:'ƒ∞≈ü K. 25/II-ƒ±',steps:['Tutanak','Savunma','ƒ∞htar veya Fesih'],desc:'ƒ∞≈ü g√ºvenliƒüi kurallarƒ±nƒ± ihlal etme'},
        {id:'V28',title:'Yangƒ±n G√ºvenliƒüi ƒ∞hlali',risk:'high',legal:'ƒ∞≈ü K. 25/II-ƒ±',steps:['Tutanak','Savunma','Derhal fesih'],desc:'Yangƒ±n √ßƒ±kƒ±≈üƒ±nƒ± engelleme, yangƒ±n s√∂nd√ºr√ºc√º ile oynama'},
        {id:'V29',title:'ƒ∞≈ü Kazasƒ± Gizleme',risk:'high',legal:'5510 SK + ƒ∞≈ü K. 25/II',steps:['Tutanak','SGK bildirimi','Savunma','Fesih'],desc:'ƒ∞≈ü kazasƒ±nƒ± bildirmeme veya gizleme'},
        {id:'V30',title:'M√º≈üteri Verisi Payla≈üma',risk:'high',legal:'KVKK + ƒ∞≈ü K. 25/II-e',steps:['Delil toplama','Tutanak','Fesih'],desc:'M√º≈üteri bilgilerini izinsiz payla≈üma'},
        {id:'V31',title:'R√º≈üvet/Komisyon',risk:'high',legal:'TCK 252 + ƒ∞≈ü K. 25/II-e',steps:['Delil toplama','Tutanak','Fesih + Su√ß duyurusu'],desc:'Tedarik√ßi veya m√º≈üteriden r√º≈üvet/komisyon alma'},
        {id:'V32',title:'Rakiple ƒ∞≈übirliƒüi',risk:'high',legal:'TBK 396 + ƒ∞≈ü K. 25/II-e',steps:['Delil toplama','Tutanak','Fesih'],desc:'Rakip firma ile gizli i≈übirliƒüi'},
        {id:'V33',title:'Dedikodu/Fitne',risk:'low',legal:'ƒ∞≈ü K. 25/II-d',steps:['S√∂zl√º uyarƒ±','Tutanak','Savunma','ƒ∞htar'],desc:'ƒ∞≈üyeri huzurunu bozucu dedikodu yayma'},
        {id:'V34',title:'Mal Kabul Usuls√ºzl√ºƒü√º',risk:'high',legal:'ƒ∞≈ü K. 25/II-e',steps:['Stok kontrol√º','Tutanak','Fesih'],desc:'Teslim alƒ±nmayan malƒ± kabul etmi≈ü gibi g√∂sterme'},
        {id:'V35',title:'Eƒüitime Katƒ±lmama',risk:'low',legal:'ƒ∞≈ü K. 25/II-h',steps:['S√∂zl√º uyarƒ±','Yazƒ±lƒ± uyarƒ±','ƒ∞htar'],desc:'Zorunlu eƒüitimlere mazeretsiz katƒ±lmama'},
        {id:'V36',title:'ƒ∞zinsiz Fotoƒüraf/Video',risk:'medium',legal:'KVKK + ƒ∞≈ü K. 25/II-e',steps:['Tutanak','Savunma','ƒ∞htar veya Fesih'],desc:'ƒ∞≈üyerinde izinsiz fotoƒüraf veya video √ßekme'},
        {id:'V37',title:'Mesai Saati Manip√ºlasyonu',risk:'high',legal:'ƒ∞≈ü K. 25/II-e',steps:['PDKS kaydƒ±','Tutanak','Fesih'],desc:'Giri≈ü-√ßƒ±kƒ±≈ü saatlerini manip√ºle etme'},
        {id:'V38',title:'Sahte Mazeret',risk:'medium',legal:'ƒ∞≈ü K. 25/II-a',steps:['Belge doƒürulama','Tutanak','Savunma','Fesih'],desc:'Ger√ßek dƒ±≈üƒ± mazeret beyan etme'}
    ],
    templates: {
        barista: `<div class="doc-article"><div class="doc-article-title">MADDE 2: G√ñREV TANIMI, YETKƒ∞ VE SORUMLULUKLAR</div><div class="doc-article-content">
<p><strong>2.1. Pozisyonun Niteliƒüi:</strong> Personel, i≈ületmede "BARƒ∞STA VE MAƒûAZA OPERASYON SORUMLUSU" unvanƒ± ile istihdam edilmi≈ütir. Taraflar, bu pozisyonun doƒüasƒ± gereƒüi sadece i√ßecek hazƒ±rlamayƒ± deƒüil; maƒüazanƒ±n genel d√ºzenini, hijyenini, lojistiƒüini ve operasyonel akƒ±≈üƒ±nƒ± saƒülamayƒ± kapsayan b√ºt√ºnle≈üik bir g√∂rev olduƒüu konusunda mutabƒ±ktƒ±r.</p>
<p><strong>2.2. Asli G√∂revler (√áok Y√∂nl√º √áalƒ±≈üma Taahh√ºd√º):</strong> Personel, a≈üaƒüƒ±da belirtilen g√∂revlerin i≈ü tanƒ±mƒ±nƒ±n asli unsurlarƒ± olduƒüunu, bu g√∂revlerin kendisinden talep edilmesinin 4857 sayƒ±lƒ± ƒ∞≈ü Kanunu'nun 22. maddesi kapsamƒ±nda "√ßalƒ±≈üma ko≈üullarƒ±nda esaslƒ± deƒüi≈üiklik" sayƒ±lmayacaƒüƒ±nƒ± pe≈üinen kabul ve taahh√ºt eder:</p>
<p>a) <strong>√úretim ve Servis:</strong> ƒ∞≈ületmenin standart re√ßetelerine (gramaj, ƒ±sƒ±, sunum) birebir uyarak kahve, soƒüuk/sƒ±cak i√ßecek ve yiyecek hazƒ±rlamak; m√º≈üteriyi kar≈üƒ±lamak, sipari≈ü almak, masaya servis yapmak ve bo≈ülarƒ± toplamak.</p>
<p>b) <strong>Sanitasyon ve Temizlik:</strong> Gƒ±da g√ºvenliƒüi (HACCP) ve i≈ületme standartlarƒ± gereƒüi; bar istasyonu, espresso makinesi, m√º≈üteri masalarƒ±, zeminler, depo alanlarƒ±, camlar ve maƒüaza tuvaletlerinin (WC) hijyen planƒ±na uygun olarak periyodik temizliƒüini, dezenfeksiyonunu ve kontrol√ºn√º bizzat yapmak.</p>
<p>c) <strong>Lojistik ve Stok:</strong> Mal kabul√º yapmak, kolileri ta≈üƒ±mak, raflarƒ± d√ºzenlemek, FIFO (ƒ∞lk Giren ƒ∞lk √áƒ±kar) kuralƒ±na g√∂re stok takibi ve Son Kullanma Tarihi (SKT) kontrollerini ger√ßekle≈ütirmek.</p>
<p>d) <strong>Destek Hizmetleri (Kurye/Valet):</strong> ƒ∞≈üverenin talep etmesi ve Personelin gerekli yasal ehliyet ve yetkinlik belgelerine (S√ºr√ºc√º Belgesi, SRC, Psikoteknik vb.) sahip olmasƒ± kaydƒ±yla; paket servis lojistiƒüi ve otopark d√ºzeni konularƒ±nda destek vermek. Personel, bu g√∂revleri ifa ederken Karayollarƒ± Trafik Kanunu'na ve ƒ∞SG kurallarƒ±na tam uyum saƒülamakla y√ºk√ºml√ºd√ºr.</p>
<p><strong>2.3. Nakil Yetkisi:</strong> ƒ∞≈üveren, operasyonel gereklilikler halinde Personel'i, aynƒ± il sƒ±nƒ±rlarƒ± i√ßerisindeki mevcut veya ileride a√ßƒ±lacak diƒüer "Moonberry Coffee" ≈üubelerinde, unvanƒ± ve √ºcreti korunmak kaydƒ±yla ge√ßici veya s√ºrekli olarak g√∂revlendirme hakkƒ±na sahiptir. Personel, bu deƒüi≈üikliƒüi pe≈üinen kabul eder.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 3: √áALI≈ûMA S√úRESƒ∞, FAZLA MESAƒ∞ VE √úCRET</div><div class="doc-article-content">
<p><strong>3.1. √áalƒ±≈üma S√ºresi:</strong> Haftalƒ±k √ßalƒ±≈üma s√ºresi yasal sƒ±nƒ±r olan 45 saattir. ƒ∞≈üveren, bu s√ºreyi i≈üyerinin a√ßƒ±lƒ±≈ü-kapanƒ±≈ü saatlerine ve yoƒüunluƒüuna g√∂re, g√ºnde 11 saati a≈ümamak kaydƒ±yla haftanƒ±n √ßalƒ±≈üƒ±lan g√ºnlerine farklƒ± ≈üekillerde b√∂lebilir. ƒ∞≈üveren, ƒ∞≈ü Kanunu m. 63 uyarƒ±nca 2 (iki) aylƒ±k s√ºreler i√ßinde "Denkle≈ütirme" uygulayabilir.</p>
<p><strong>3.2. √úcret ve Fazla Mesai (Yƒ±llƒ±k 270 Saat Dahil):</strong></p>
<p>a) Personelin aylƒ±k maktu br√ºt √ºcreti {{UCRET}} TL'dir.</p>
<p>b) Belirlenen bu √ºcret, yasal asgari √ºcretin √ºzerinde (emsal √ºcret) tespit edilmi≈ütir. Taraflar; ƒ∞≈ü Kanunu'nun 41. maddesi uyarƒ±nca yapƒ±labilecek yƒ±llƒ±k 270 saate kadar olan fazla √ßalƒ±≈ümalarƒ±n ile ulusal bayram ve genel tatil g√ºnlerindeki √ßalƒ±≈ümalarƒ±n kar≈üƒ±lƒ±ƒüƒ±nƒ±n, kararla≈ütƒ±rƒ±lan bu aylƒ±k √ºcrete dahil olduƒüu hususunda mutabƒ±k kalmƒ±≈ülardƒ±r.</p>
<p>c) Personel, yƒ±llƒ±k 270 saati a≈ümayan bu √ßalƒ±≈ümalar i√ßin aylƒ±k maa≈üƒ± dƒ±≈üƒ±nda ayrƒ±ca bir fazla mesai √ºcreti talep etmeyeceƒüini beyan eder.</p>
<p>d) Yƒ±llƒ±k 270 saati a≈üan fazla √ßalƒ±≈ümalarƒ±n √ºcreti, ƒ∞≈ü Kanunu h√ºk√ºmleri uyarƒ±nca ayrƒ±ca √∂denir veya mevzuata uygun olarak serbest zaman ≈üeklinde kullandƒ±rƒ±lƒ±r.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 4: KASA TAZMƒ∞NATI VE A√áIKLAR (TBK m. 407/2 Uyumlu)</div><div class="doc-article-content">
<p><strong>4.1. Kasa Tazminatƒ±:</strong> Kasa sorumluluƒüu verilen Personele, √ºstlendiƒüi finansal riskin ve √∂zen borcunun kar≈üƒ±lƒ±ƒüƒ± olarak, aylƒ±k √ºcret bordrosunda "Kasa Tazminatƒ±" adƒ± altƒ±nda ayrƒ± bir ek √∂deme yapƒ±lƒ±r.</p>
<p><strong>4.2. A√ßƒ±klarƒ±n Mahsubu:</strong> Kasada olu≈üacak nakit veya hesaben a√ßƒ±klar, √∂ncelikle ve m√ºnhasƒ±ran o ay Personele tahakkuk ettirilen Kasa Tazminatƒ± tutarƒ±ndan mahsup edilir.</p>
<p><strong>4.3. Tazminatƒ± A≈üan A√ßƒ±klar:</strong> Kasa a√ßƒ±ƒüƒ±nƒ±n, √∂denen kasa tazminatƒ± tutarƒ±nƒ± a≈ümasƒ± halinde; Personel, s√∂z konusu a√ßƒ±ƒüƒ±n kendi kusurundan veya ihmalinden (hatalƒ± i≈ülem, eksik tahsilat, kayƒ±p vb.) kaynaklandƒ±ƒüƒ±nƒ± kabul ettiƒüi takdirde, ilgili tutarƒ±n √ºcretinin yasal olarak haczedilebilir kƒ±smƒ±ndan (1/4 oranƒ±nda) kesilmesine her somut olayda ayrƒ±ca yazƒ±lƒ± onay verecektir. Personelin rƒ±zasƒ±nƒ±n olmadƒ±ƒüƒ± veya kasƒ±t/aƒüƒ±r ihmal ≈ü√ºphesinin bulunduƒüu durumlarda ƒ∞≈üverenin yasal yollara ba≈üvurma hakkƒ± saklƒ±dƒ±r.</p>
<p><strong>4.4. Bah≈üi≈ü (Tip) Politikasƒ±:</strong> ƒ∞≈ületmede m√º≈üteriler tarafƒ±ndan bƒ±rakƒ±lan bah≈üi≈üler (tip), ƒ∞≈üveren tarafƒ±ndan verilen bir √ºcret veya √ºcret eki deƒüildir. ƒ∞≈üveren, kredi kartƒ± veya nakit olarak toplanan bah≈üi≈ülerin personele daƒüƒ±tƒ±lmasƒ±nda sadece "aracƒ±" sƒ±fatƒ±na sahiptir. Bah≈üi≈ü gelirleri, kƒ±dem ve ihbar tazminatƒ± hesabƒ±na dahil edilen giydirilmi≈ü √ºcret kavramƒ±na dahil edilmez.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 5: Eƒûƒ∞Tƒ∞M Gƒ∞DERLERƒ∞ VE CEZAƒ∞ ≈ûART</div><div class="doc-article-content">
<p><strong>5.1.</strong> ƒ∞≈üveren tarafƒ±ndan Personele, mesleki geli≈üimini saƒülamak amacƒ±yla verilecek olan sertifikalƒ± barista eƒüitimleri, √∂zel kahve teknikleri kurslarƒ± ve benzeri y√ºksek maliyetli eƒüitimler kar≈üƒ±lƒ±ƒüƒ±nda; Personel, eƒüitimin tamamlandƒ±ƒüƒ± tarihten itibaren en az 12 (on iki) ay s√ºreyle ƒ∞≈üveren nezdinde √ßalƒ±≈ümayƒ± taahh√ºt eder.</p>
<p><strong>5.2.</strong> Personelin, bu s√ºre dolmadan haklƒ± bir neden olmaksƒ±zƒ±n istifa etmesi veya ƒ∞≈üveren tarafƒ±ndan haklƒ± nedenle (ƒ∞≈ü K. m. 25/II - Ahlak ve iyi niyet kurallarƒ±na aykƒ±rƒ±lƒ±k) i≈üten √ßƒ±karƒ±lmasƒ± halinde; Personel, kendisine yapƒ±lan belgelendirilmi≈ü eƒüitim masraflarƒ±nƒ± (eƒüitmen √ºcreti, kurs bedeli, materyal vb.), kalan √ßalƒ±≈üma s√ºresiyle orantƒ±lƒ± olarak ƒ∞≈üverene nakden ve defaten √∂demeyi kabul ve taahh√ºt eder.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 6: YASAKLAR VE FESƒ∞H NEDENLERƒ∞</div><div class="doc-article-content">
<p><strong>6.1. Artƒ±k √úr√ºn (Leftover/Waste):</strong> ƒ∞≈üyerinde satƒ±lamayan, zayi olan veya m√º≈üteriden d√∂nen √ºr√ºnlerin (waste) Personel tarafƒ±ndan izinsiz t√ºketilmesi, eve g√∂t√ºr√ºlmesi veya √º√ß√ºnc√º ≈üahƒ±slara ikram edilmesi kesinlikle yasaktƒ±r. Bu eylem, deƒüeri ne olursa olsun "ƒ∞≈üverenin G√ºvenini K√∂t√ºye Kullanma" (ƒ∞≈ü K. m. 25/II-e) ve TCK m. 155 kapsamƒ±nda su√ß te≈ükil eder; tazminatsƒ±z derhal fesih sebebidir.</p>
<p><strong>6.2. Tƒ±bbi Gizleme:</strong> Personel, gƒ±da g√ºvenliƒüini tehdit eden bula≈üƒ±cƒ± hastalƒ±klarƒ± (sarƒ±lƒ±k, t√ºberk√ºloz, a√ßƒ±k yara, ishal vb.) derhal i≈üverene bildirmek zorundadƒ±r. Bu durumun gizlenerek √ßalƒ±≈ümaya devam edilmesi, halk saƒülƒ±ƒüƒ±nƒ± tehlikeye attƒ±ƒüƒ± gerek√ßesiyle haklƒ± fesih nedenidir.</p>
<p><strong>6.3. Ki≈üisel Veriler ve Sƒ±r Saklama:</strong> Personel, i≈üyeri sƒ±nƒ±rlarƒ± i√ßerisinde (mutfak, bar, depo vb.) izinsiz fotoƒüraf veya video √ßekemez. ƒ∞≈ületmenin re√ßetelerini, operasyonel sƒ±rlarƒ±nƒ± veya m√º≈üterileri i√ßeren g√∂rsellerin sosyal medyada payla≈üƒ±lmasƒ± "Sadakat Borcuna Aykƒ±rƒ±lƒ±k" sayƒ±lƒ±r ve haklƒ± fesih nedenidir.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 7: ƒ∞≈ûYERƒ∞ G√úVENLƒ∞ƒûƒ∞ VE KAMERA KAYDI (KVKK AYDINLATMA)</div><div class="doc-article-content">
<p><strong>7.1.</strong> ƒ∞≈üyeri g√ºvenliƒüi, gƒ±da g√ºvenliƒüi s√ºre√ßlerinin takibi, i≈ü saƒülƒ±ƒüƒ± ve g√ºvenliƒüi ile hƒ±rsƒ±zlƒ±k gibi su√ßlarƒ±n √∂nlenmesi amacƒ±yla; i≈üyerinin ortak alanlarƒ±nda, √ºretim b√∂l√ºmlerinde, kasa noktalarƒ±nda ve depo alanlarƒ±nda 7/24 g√∂r√ºnt√º (CCTV/Video) kaydƒ± yapƒ±lmaktadƒ±r.</p>
<p><strong>7.2.</strong> ƒ∞≈üyerinde, yasal zorunluluklar ve istisnalar saklƒ± kalmak kaydƒ±yla, ses (audio) kaydƒ± alƒ±nmamaktadƒ±r. Tuvalet, soyunma odasƒ± gibi mahremiyet i√ßeren alanlarda kesinlikle izleme yapƒ±lmaz.</p>
<p><strong>7.3.</strong> PERSONEL, i≈üyerinde g√ºvenlik kameralarƒ±nƒ±n bulunduƒüunu bildiƒüini, bu verilerin i≈ülenmesine ili≈ükin KVKK Aydƒ±nlatma Metni'nin kendisine tebliƒü edildiƒüini ve ƒ∞≈üverenin me≈üru menfaati kapsamƒ±nda g√∂r√ºnt√º kaydƒ± alƒ±nmasƒ±na rƒ±za g√∂sterdiƒüini kabul eder.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 8: DENEME S√úRESƒ∞ VE Y√úR√úRL√úK</div><div class="doc-article-content">
<p><strong>8.1.</strong> ƒ∞≈übu s√∂zle≈ümede deneme s√ºresi 2 (ƒ∞ki) aydƒ±r. Taraflar bu s√ºre i√ßinde i≈ü s√∂zle≈ümesini bildirim s√ºresine gerek olmaksƒ±zƒ±n ve tazminatsƒ±z feshedebilir.</p>
<p><strong>8.2.</strong> 8 (Sekiz) maddeden ve 3 (√º√ß) sayfadan ibaret i≈übu s√∂zle≈üme, {{BASLAMA}} tarihinde taraflarca okunarak, i√ßeriƒüi tam olarak anla≈üƒ±lmak suretiyle tek n√ºsha olarak imzalanmƒ±≈ü ve aslƒ± ƒ∞≈üverende kalmak √ºzere, bir sureti (fotokopisi) PERSONEL'e elden teslim edilmi≈ütir.</p>
</div></div>`,
        mudur_yardimcisi: `<div class="doc-article"><div class="doc-article-title">MADDE 2: S√ñZLE≈ûMENƒ∞N KONUSU VE HUKUKƒ∞ STAT√ú</div><div class="doc-article-content">
<p>ƒ∞≈übu s√∂zle≈ümenin konusu, PERSONEL'in ƒ∞≈ûVEREN'e ait "Moonberry Coffee" markalƒ± i≈üyerlerinde "Maƒüaza M√ºd√ºr Yardƒ±mcƒ±sƒ±" unvanƒ± ile, a≈üaƒüƒ±da belirtilen g√∂rev tanƒ±mƒ±, 4857 sayƒ±lƒ± ƒ∞≈ü Kanunu, 6098 sayƒ±lƒ± T√ºrk Bor√ßlar Kanunu ve i≈ületme prosed√ºrleri √ßer√ßevesinde i≈ü g√∂rme edimini; ƒ∞≈ûVEREN'in de buna kar≈üƒ±lƒ±k √ºcret √∂deme edimini yerine getirmesidir. PERSONEL, kendisine baƒülƒ± alt ekipler (barista, servis elemanƒ±, temizlik personeli vb.) √ºzerinde y√∂netim, denetim, vardiya d√ºzenleme ve talimat verme yetkisine sahip olup; i≈ületmenin i≈üleyi≈üinden sorumlu y√∂netici sƒ±fatƒ±nƒ± haizdir.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 3: G√ñREV TANIMI VE "Hƒ∞BRƒ∞T √áALI≈ûMA" ESASI</div><div class="doc-article-content">
<p><strong>3.1. Entegre ve √áok Y√∂nl√º G√∂rev Tanƒ±mƒ±:</strong> PERSONEL, bu pozisyonun sadece "idari/masa ba≈üƒ±" bir y√∂neticilik olmadƒ±ƒüƒ±nƒ±; perakende ve hizmet sekt√∂r√ºn√ºn doƒüasƒ± gereƒüi hem y√∂netimsel hem de operasyonel (fiili) g√∂revleri kapsadƒ±ƒüƒ±nƒ± kabul eder. A≈üaƒüƒ±daki g√∂revlerin tamamƒ± PERSONEL'in "Asli ƒ∞≈üi" sayƒ±lƒ±r ve bu g√∂revlerin talep edilmesi "√ßalƒ±≈üma ko≈üullarƒ±nda esaslƒ± deƒüi≈üiklik" (ƒ∞≈ü K. m. 22) te≈ükil etmez:</p>
<p>a) <strong>Y√∂netim ve Temsil:</strong> Maƒüaza M√ºd√ºr√º'n√ºn bulunmadƒ±ƒüƒ± zamanlarda i≈ületmeyi tam yetkili olarak sevk ve idare etmek, vardiya √ßizelgelerini (shift plan) yasal mevzuata ve operasyonel verimliliƒüe uygun hazƒ±rlamak, personelin kƒ±lƒ±k-kƒ±yafet, mesai ve hijyen denetimini yapmak.</p>
<p>b) <strong>Fiili Operasyonel Destek:</strong> ƒ∞≈ületmenin yoƒüun olduƒüu saatlerde, personel eksikliƒüinde, mola deƒüi≈üimlerinde veya i≈üin gerektirdiƒüi hallerde; bizzat bar arkasƒ±na ge√ßerek √ºr√ºn hazƒ±rlamak, servis yapmak, masalarƒ± toplamak, bula≈üƒ±k alanƒ±nƒ± koordine etmek ve kasaya bakmak.</p>
<p>c) <strong>Sanitasyon ve Denetim:</strong> Gƒ±da g√ºvenliƒüi (HACCP) standartlarƒ±nƒ±n uygulanmasƒ±nƒ± denetlemek ve bizzat saƒülamak. Gerektiƒüinde; m√º≈üteri tuvaletleri, zemin, depo ve √ºretim alanlarƒ±nƒ±n temizlik kontrollerini yapmak ve temizlik operasyonuna fiilen katƒ±lmak.</p>
<p>d) <strong>Stok ve Maliyet Kontrol√º:</strong> G√ºnl√ºk, haftalƒ±k ve aylƒ±k stok sayƒ±mlarƒ±nƒ± bizzat y√∂netmek; zayi (waste) oranlarƒ±nƒ± raporlamak, Son Kullanma Tarihi (SKT) kontrollerini yapmak, mal kabul s√ºre√ßlerini y√ºr√ºtmek.</p>
<p><strong>3.2. G√∂rev Yeri ve Nakil Yetkisi:</strong> ƒ∞≈ûVEREN, i≈ületmesel gereklilik halinde PERSONEL'i, aynƒ± il sƒ±nƒ±rlarƒ± (B√ºy√ºk≈üehir Belediyesi sƒ±nƒ±rlarƒ± dahil) i√ßerisindeki mevcut veya a√ßƒ±lacak diƒüer ≈üubelerinde, personelin ikametgahƒ±na makul ula≈üƒ±m imkanlarƒ± g√∂zetilerek aynƒ± veya e≈üdeƒüer bir pozisyonda g√∂revlendirme hakkƒ±na sahiptir. PERSONEL, bu nakil yetkisini pe≈üinen kabul ettiƒüini beyan eder.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 4: √áALI≈ûMA S√úRELERƒ∞, FAZLA MESAƒ∞ VE √úCRET Sƒ∞STEMƒ∞</div><div class="doc-article-content">
<p><strong>4.1. √áalƒ±≈üma D√ºzeni:</strong> Haftalƒ±k √ßalƒ±≈üma s√ºresi yasal sƒ±nƒ±r olan 45 saattir. PERSONEL, y√∂netici sƒ±fatƒ±yla maƒüazanƒ±n a√ßƒ±lƒ±≈ü-kapanƒ±≈ü, sayƒ±m ve raporlama s√ºre√ßlerinden sorumlu olduƒüundan, mesai saatleri bu gerekliliklere g√∂re ƒ∞≈ûVEREN tarafƒ±ndan d√ºzenlenir. ƒ∞≈ûVEREN, ƒ∞≈ü Kanunu m. 63 uyarƒ±nca 2 (iki) aylƒ±k denkle≈ütirme uygulayabilir.</p>
<p><strong>4.2. Yƒ±llƒ±k 270 Saat Fazla Mesainin √úcrete Dahil Olmasƒ±:</strong> PERSONEL'in aylƒ±k br√ºt √ºcreti, √ºstlendiƒüi y√∂netim sorumluluƒüu ve operasyonel y√ºk dikkate alƒ±narak yasal asgari √ºcretin √ºzerinde (emsal √ºcret) tespit edilmi≈ütir. Taraflar, yƒ±llƒ±k 270 saate kadar (aylƒ±k ortalama 22,5 saat) yapƒ±lacak fazla √ßalƒ±≈üma √ºcretlerinin, kararla≈ütƒ±rƒ±lan aylƒ±k √ºcrete dahil olduƒüu hususunda mutabƒ±k kalmƒ±≈ülardƒ±r. PERSONEL, yƒ±llƒ±k 270 saati a≈ümayan fazla √ßalƒ±≈ümalar i√ßin ayrƒ±ca bir √ºcret talep etmeyeceƒüini kabul eder. (Not: Ulusal Bayram ve Genel Tatil g√ºnlerinde yapƒ±lan √ßalƒ±≈ümalar ile hafta tatili √ßalƒ±≈ümalarƒ± bu 270 saatlik kapsama dahil olmayƒ±p, √ßalƒ±≈üƒ±lmasƒ± halinde ayrƒ±ca √∂denir.)</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 5: √úCRET, YAN HAKLAR VE MALƒ∞ SORUMLULUK</div><div class="doc-article-content">
<p><strong>5.1. √úcret:</strong> PERSONEL'e aylƒ±k Br√ºt {{UCRET}} TL √ºcret √∂denecektir. √úcret √∂demeleri banka kanalƒ±yla yapƒ±lƒ±r. Varsa yol ve yemek yardƒ±mlarƒ± ≈üirket politikalarƒ±na g√∂re ayni veya nakdi olarak ayrƒ±ca belirlenir.</p>
<p><strong>5.2. Kasa Tazminatƒ± ve Mali Sorumluluk:</strong> Nakit, stok ve zimmet g√ºvenliƒüini y√∂netmesi sebebiyle PERSONEL'e, aylƒ±k √ºcretine ek olarak (bordroda belirtilmek suretiyle) "Mali Sorumluluk / Kasa Tazminatƒ±" √∂denir. PERSONEL, kendi g√∂rev alanƒ± ve denetim sorumluluƒüundaki kasa a√ßƒ±klarƒ±ndan ve stok kayƒ±plarƒ±ndan (hƒ±rsƒ±zlƒ±k, kayƒ±p, usuls√ºz ikram vb.), kusurunun tespiti halinde ≈üahsen sorumludur. Tespit edilen ve PERSONEL'in kusuruna (kasƒ±t, ihmal veya dikkatsizlik) dayanan zararlar; √∂ncelikle olay bazƒ±nda alƒ±nacak yazƒ±lƒ± onayƒ± ile kasa tazminatƒ±ndan ve hakedi≈üinden mahsup edilir. Personelin onay vermemesi halinde ƒ∞≈ûVEREN'in Bor√ßlar Kanunu ve ƒ∞≈ü Kanunu h√ºk√ºmleri uyarƒ±nca yasal takip ve tazminat talep etme hakkƒ± saklƒ±dƒ±r.</p>
<p><strong>5.3. Bah≈üi≈ü (Tip) Politikasƒ±:</strong> ƒ∞≈ületmede m√º≈üteriler tarafƒ±ndan bƒ±rakƒ±lan bah≈üi≈üler, √ºcretin bir par√ßasƒ± olmayƒ±p, ƒ∞≈ûVEREN sadece daƒüƒ±tƒ±m i√ßin aracƒ± konumundadƒ±r. PERSONEL, bah≈üi≈ülerin kƒ±dem/ihbar tazminatƒ± hesabƒ±na dahil edilmeyeceƒüini kabul eder.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 6: Gƒ∞ZLƒ∞Lƒ∞K VE REKABET YASAƒûI</div><div class="doc-article-content">
<p><strong>6.1. Ticari Sƒ±rlar:</strong> PERSONEL, g√∂revi gereƒüi eri≈ütiƒüi; maƒüaza ciro bilgileri, karlƒ±lƒ±k raporlarƒ±, tedarik√ßi fiyatlarƒ±, √∂zel √ºr√ºn re√ßeteleri, personel maa≈ü bilgileri ve m√º≈üteri datalarƒ±nƒ± "Ticari Sƒ±r" olarak saklamakla y√ºk√ºml√ºd√ºr. Bu bilgilerin rakip firmalarla veya yetkisiz √º√ß√ºnc√º ki≈üilerle payla≈üƒ±lmasƒ±, TCK m. 239 kapsamƒ±nda su√ß duyurusu ve haklƒ± nedenle derhal fesih sebebidir.</p>
<p><strong>6.2. Rekabet Yasaƒüƒ± (Sƒ±nƒ±rlƒ±):</strong> PERSONEL, i≈ü s√∂zle≈ümesi herhangi bir nedenle sona erdikten sonra 1 (bir) yƒ±l s√ºreyle, son g√∂rev yaptƒ±ƒüƒ± ≈üubenin bulunduƒüu il√ße sƒ±nƒ±rlarƒ± i√ßerisinde, Moonberry Coffee ile doƒürudan rakip olan (benzer konseptteki kahve zincirleri) bir i≈ületmede y√∂netici, ortak veya danƒ±≈üman olarak √ßalƒ±≈ümamayƒ± taahh√ºt eder. Bu yasaƒüƒ±n ihlali halinde, son br√ºt maa≈üƒ±nƒ±n 3 (√º√ß) katƒ± tutarƒ±nda cezai ≈üartƒ± ƒ∞≈ûVEREN'e √∂demeyi kabul ve taahh√ºt eder.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 7: YASAKLAR VE FESƒ∞H NEDENLERƒ∞</div><div class="doc-article-content">
<p>A≈üaƒüƒ±daki haller, ƒ∞≈ûVEREN i√ßin 4857 sayƒ±lƒ± ƒ∞≈ü Kanunu m. 25/II kapsamƒ±nda haklƒ± nedenle derhal fesih sebebidir:</p>
<p>a) Kasa i≈ülemlerinde usuls√ºzl√ºk (fi≈üsiz satƒ±≈ü, hileli iptal/iade, zimmet).</p>
<p>b) ƒ∞≈ületme √ºr√ºnlerinin (yemek, kahve, pasta vb.) izinsiz t√ºketilmesi, dƒ±≈üarƒ± √ßƒ±karƒ±lmasƒ± veya √º√ß√ºnc√º ≈üahƒ±slara bedelsiz ikram edilmesi (G√ºveni K√∂t√ºye Kullanma).</p>
<p>c) Astƒ± konumundaki personele mobbing uygulamak, hakaret etmek, ayrƒ±mcƒ±lƒ±k yapmak veya cinsel tacizde bulunmak.</p>
<p>d) Gƒ±da g√ºvenliƒüini (HACCP) tehlikeye atacak hijyen ihlallerine g√∂z yumulmasƒ± veya bizzat yapƒ±lmasƒ±.</p>
<p>e) ƒ∞≈ü Saƒülƒ±ƒüƒ± ve G√ºvenliƒüi (ƒ∞SG) talimatlarƒ±na uymamak, ki≈üisel koruyucu donanƒ±m kullanmamak, i≈üyerini ve m√º≈üterileri tehlikeye d√º≈ü√ºrecek davranƒ±≈ülarda bulunmak.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 8: Kƒ∞≈ûƒ∞SEL VERƒ∞LER, KAMERA KAYDI VE TEBLƒ∞GAT</div><div class="doc-article-content">
<p><strong>8.1. Kamera Kaydƒ±:</strong> ƒ∞≈üyeri g√ºvenliƒüi, hƒ±rsƒ±zlƒ±k olaylarƒ±nƒ±n √∂nlenmesi ve operasyonel standartlarƒ±n takibi amacƒ±yla; i≈üyerinin ortak alanlarƒ±nda, ofis, depo ve kasa noktalarƒ±nda 7/24 g√∂r√ºnt√º kaydƒ± (CCTV) yapƒ±lmaktadƒ±r. Ses kaydƒ± yapƒ±lmamaktadƒ±r. PERSONEL, i≈üyerinde g√ºvenlik kameralarƒ±nƒ±n bulunduƒüunu bildiƒüini, bu kayƒ±tlarƒ±n KVKK ve ƒ∞≈ûVEREN'in me≈üru menfaati kapsamƒ±nda i≈ülendiƒüini kabul eder.</p>
<p><strong>8.2. Tebligat:</strong> Taraflarƒ±n Madde 1'de belirtilen adresleri yasal tebligat adresleridir. Adres deƒüi≈üikliƒüi yazƒ±lƒ± olarak bildirilmediƒüi s√ºrece, bu adreslere yapƒ±lacak tebligatlar ge√ßerli sayƒ±lacaktƒ±r.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 9: DENEME S√úRESƒ∞ VE Y√úR√úRL√úK</div><div class="doc-article-content">
<p><strong>9.1.</strong> ƒ∞≈übu s√∂zle≈ümede deneme s√ºresi 2 (ƒ∞ki) aydƒ±r. Taraflar bu s√ºre i√ßinde i≈ü s√∂zle≈ümesini bildirim s√ºresine gerek olmaksƒ±zƒ±n ve tazminatsƒ±z feshedebilir.</p>
<p><strong>9.2.</strong> ƒ∞≈übu s√∂zle≈üme, 9 maddeden ibaret olup, {{BASLAMA}} tarihinde taraflarca okunarak, i√ßeriƒüi tam olarak anla≈üƒ±lmak suretiyle tek n√ºsha olarak imzalanmƒ±≈ü ve aslƒ± ƒ∞≈ûVEREN'de kalmak √ºzere bir kopyasƒ± PERSONEL'e teslim edilmi≈ütir.</p>
</div></div>`,
        magaza_muduru: `<div class="doc-article"><div class="doc-article-title">MADDE 2: G√ñREV TANIMI, YETKƒ∞ VE ƒ∞≈ûVEREN VEKƒ∞LLƒ∞ƒûƒ∞ STAT√úS√ú</div><div class="doc-article-content">
<p><strong>2.1. G√∂rev Tanƒ±mƒ±:</strong> Y√ñNETƒ∞Cƒ∞, ≈ûƒ∞RKET'e ait "Moonberry Coffee" maƒüazasƒ±nda MAƒûAZA M√úD√úR√ú unvanƒ± ile g√∂rev yapacaktƒ±r. Y√ñNETƒ∞Cƒ∞; maƒüazanƒ±n ticari ba≈üarƒ±sƒ±ndan, operasyonel standartlarƒ±ndan, yasal mevzuata uyumundan (Gƒ±da g√ºvenliƒüi, ƒ∞SG vb.) ve ekibin sevk ve idaresinden tam yetkili ve sorumludur.</p>
<p><strong>2.2. ƒ∞≈üveren Vekilliƒüi (Hukuki Stat√º):</strong> Taraflar; Y√ñNETƒ∞Cƒ∞'nin i≈üyerindeki konumu itibarƒ±yla, 4857 sayƒ±lƒ± ƒ∞≈ü Kanunu'nun 2. maddesi ve 18. maddesinin son fƒ±krasƒ± anlamƒ±nda "ƒ∞≈üyerinin b√ºt√ºn√ºn√º sevk ve idare eden ve i≈ü√ßiyi i≈üe alma ve i≈üten √ßƒ±karma yetkisi bulunan ƒ∞≈ûVEREN VEKƒ∞Lƒ∞" stat√ºs√ºnde olduƒüunu kabul ve beyan ederler. Bu stat√ºn√ºn gereƒüi olarak Y√ñNETƒ∞Cƒ∞;</p>
<p>‚Ä¢ Maƒüaza personel kadrosunu belirleme,</p>
<p>‚Ä¢ Adaylarla m√ºlakat yapƒ±p i≈üe alma kararƒ±nƒ± tek ba≈üƒ±na verme,</p>
<p>‚Ä¢ Performans d√º≈ü√ºkl√ºƒü√º, disiplin su√ßlarƒ± veya i≈ületme gerekleri nedeniyle alt kademe personelin i≈ü s√∂zle≈ümelerini tek ba≈üƒ±na ve nihai karar verici olarak feshetme yetkisine haizdir.</p>
<p>Y√ñNETƒ∞Cƒ∞, bu nitelikli yetkileri haiz olmasƒ± sebebiyle, 4857 sayƒ±lƒ± Kanun'un i≈ü g√ºvencesi (i≈üe iade davasƒ±) h√ºk√ºmlerinden yararlanamayacaƒüƒ±nƒ± bildiƒüini gayrikabili r√ºcu kabul eder.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 3: √áALI≈ûMA S√úRESƒ∞ VE FAZLA MESAƒ∞ D√úZENLEMESƒ∞</div><div class="doc-article-content">
<p><strong>3.1. Mesaiyi Belirleme Serbestisi:</strong> Y√ñNETƒ∞Cƒ∞, i≈üyerinin en √ºst d√ºzey amiri sƒ±fatƒ±yla; g√∂rev ve sorumluluklarƒ±nƒ±n gerektirdiƒüi ≈üekilde mesai saatlerini, i≈üe ba≈ülama-biti≈ü zamanlarƒ±nƒ±, ara dinlenmelerini ve izin d√ºzenini ≈üahsen belirleme ve tanzim etme yetkisine sahiptir. Y√ñNETƒ∞Cƒ∞'ye kart basma veya saatlik puantaj zorunluluƒüu uygulanmaz; esas olan sonu√ß odaklƒ± y√∂netimdir.</p>
<p><strong>3.2. Fazla √áalƒ±≈üma √úcrete Dahildir:</strong> Y√ñNETƒ∞Cƒ∞'ye √∂denen aylƒ±k √ºcret, √ºstlendiƒüi idari sorumluluk, baƒüƒ±msƒ±z karar alma yetkisi ve mesaisini kendisinin belirlemesi hususlarƒ± dikkate alƒ±narak, yasal asgari √ºcretin ve emsal √ºcretlerin √ºzerinde (nitelikli √ºcret) tespit edilmi≈ütir. Bu sebeple;</p>
<p>‚Ä¢ Yasal haftalƒ±k 45 saati a≈üan √ßalƒ±≈ümalarƒ±n (Fazla Mesai),</p>
<p>‚Ä¢ Hafta tatili √ßalƒ±≈ümalarƒ±nƒ±n,</p>
<p>‚Ä¢ Ulusal Bayram ve Genel Tatil g√ºnlerinde yapƒ±lan √ßalƒ±≈ümalarƒ±n,</p>
<p>kar≈üƒ±lƒ±ƒüƒ± olan √ºcretler, Y√ñNETƒ∞Cƒ∞'nin kararla≈ütƒ±rƒ±lan aylƒ±k √ºcretine dahildir. Y√ñNETƒ∞Cƒ∞, yƒ±llƒ±k 270 saate kadar olan bu t√ºr √ßalƒ±≈ümalarƒ± i√ßin ayrƒ±ca bir √ºcret, zamlƒ± √∂deme veya serbest zaman talep etmeyeceƒüini kabul ve taahh√ºt eder.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 4: √úCRET VE YAN HAKLAR</div><div class="doc-article-content">
<p><strong>4.1. K√∂k √úcret:</strong> Y√ñNETƒ∞Cƒ∞'ye, yukarƒ±daki √ßalƒ±≈üma ≈üartlarƒ± kar≈üƒ±lƒ±ƒüƒ±nda aylƒ±k Br√ºt {{UCRET}} TL √ºcret √∂denecektir.</p>
<p><strong>4.2. Mali Sorumluluk (Kasa) Tazminatƒ±:</strong> Y√ñNETƒ∞Cƒ∞'ye, maƒüazadaki nakit akƒ±≈üƒ±, stok, emtia ve demirba≈ülarƒ±n korunmasƒ± riskini √ºstlenmesi kar≈üƒ±lƒ±ƒüƒ±nda, aylƒ±k k√∂k √ºcretine ek olarak ve bordroda ayrƒ± bir kalem olarak g√∂sterilmek suretiyle her ay "Mali Sorumluluk (Kasa) Tazminatƒ±" √∂denir.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 5: MALƒ∞ SORUMLULUK, ZAYƒ∞AT VE KESƒ∞NTƒ∞LER</div><div class="doc-article-content">
<p><strong>5.1. Zararƒ±n Tazmini ve Mahsup:</strong> Maƒüaza kasasƒ±nda, stok sayƒ±mlarƒ±nda veya zimmetli demirba≈ülarda; hƒ±rsƒ±zlƒ±k, dikkatsizlik, prosed√ºr hatasƒ± veya Y√ñNETƒ∞Cƒ∞'nin √∂zen borcuna aykƒ±rƒ±lƒ±ƒüƒ± nedeniyle olu≈üan noksanlƒ±klar (a√ßƒ±klar/zararlar), √∂ncelikle ve m√ºnhasƒ±ran Y√ñNETƒ∞Cƒ∞'ye o ay √∂denen "Mali Sorumluluk Tazminatƒ±"ndan mahsup edilir.</p>
<p><strong>5.2. Tazminatƒ± A≈üan Zararlar:</strong> Olu≈üan zarar miktarƒ±nƒ±n, √∂denen Mali Sorumluluk Tazminatƒ±nƒ± a≈ümasƒ± durumunda; a≈üan kƒ±sƒ±m i√ßin Y√ñNETƒ∞Cƒ∞'nin kusuru oranƒ±nda r√ºcu edilir. Y√ñNETƒ∞Cƒ∞, tazminatƒ± a≈üan zararlarƒ±n tahsili i√ßin olayƒ±n vuku bulduƒüu tarihte d√ºzenlenecek mutabakat tutanaƒüƒ± ile √ºcretinden kesinti yapƒ±lmasƒ±nƒ± veya borcu def'aten √∂demeyi kabul eder.</p>
<p><strong>5.3. Kasƒ±tlƒ± Haller:</strong> Zimmet, emniyeti suistimal, hƒ±rsƒ±zlƒ±k veya ≈ûƒ∞RKET'e kasten zarar verme halleri, tazminat limitine bakƒ±lmaksƒ±zƒ±n 4857 sayƒ±lƒ± ƒ∞≈ü Kanunu m. 25/II uyarƒ±nca haklƒ± nedenle derhal fesih sebebidir ve olu≈üan t√ºm zarar yasal yollarla Y√ñNETƒ∞Cƒ∞'den tahsil edilir.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 6: PERFORMANS, REKABET YASAƒûI VE Gƒ∞ZLƒ∞Lƒ∞K</div><div class="doc-article-content">
<p><strong>6.1. Performans Hedefleri:</strong> Y√ñNETƒ∞Cƒ∞, kendisine tebliƒü edilen ciro, k√¢rlƒ±lƒ±k (P&L), fire/zayi oranƒ± ve denetim puanƒ± hedeflerini (KPI) tutturmakla y√ºk√ºml√ºd√ºr. Makul mazeret (m√ºcbir sebep) olmaksƒ±zƒ±n hedeflerin s√ºreklilik arz edecek ≈üekilde tutturulamamasƒ±, "Performans D√º≈ü√ºkl√ºƒü√º/Yetersizlik" sayƒ±lƒ±r. ≈ûƒ∞RKET, bu durumda Y√ñNETƒ∞Cƒ∞'den yazƒ±lƒ± savunma almak kaydƒ±yla i≈ü s√∂zle≈ümesini ge√ßerli nedenle feshedebilir.</p>
<p><strong>6.2. Rekabet Yasaƒüƒ±:</strong> Y√ñNETƒ∞Cƒ∞, i≈ü s√∂zle≈ümesi herhangi bir nedenle sona erdikten sonra 1 (Bir) yƒ±l s√ºreyle; son g√∂rev yaptƒ±ƒüƒ± maƒüazanƒ±n bulunduƒüu il√ße sƒ±nƒ±rlarƒ± i√ßerisinde, Moonberry Coffee ile doƒürudan rakip olan (Kahve Zinciri/Kafe/Restoran) i≈ületmelerde √ßalƒ±≈ümamayƒ±, ortak olmamayƒ± veya danƒ±≈ümanlƒ±k yapmamayƒ± taahh√ºt eder.</p>
<p><strong>6.3. Cezai ≈ûart (Kar≈üƒ±lƒ±klƒ±lƒ±k Esasƒ±):</strong> Y√ñNETƒ∞Cƒ∞'nin Rekabet Yasaƒüƒ±nƒ± (Madde 6.2) ihlal etmesi halinde, son br√ºt √ºcretinin 6 (Altƒ±) katƒ± tutarƒ±nda cezai ≈üartƒ± ≈ûƒ∞RKET'e √∂demeyi kabul eder. ≈ûƒ∞RKET'in i≈ü s√∂zle≈ümesini haksƒ±z yere feshetmesi durumunda da, ≈ûƒ∞RKET aynƒ± tutarda (6 br√ºt maa≈ü) cezai ≈üartƒ± Y√ñNETƒ∞Cƒ∞'ye √∂demeyi taahh√ºt eder. (TBK m. 420 ve Yargƒ±tay i√ßtihatlarƒ± gereƒüi kar≈üƒ±lƒ±klƒ±lƒ±k ilkesi).</p>
<p><strong>6.4. Gizlilik:</strong> ≈ûƒ∞RKET'e ait kahve re√ßeteleri, tedarik√ßi s√∂zle≈ümeleri, personel √ºcret bilgileri, mali veriler ve m√º≈üteri veri tabanƒ± "Ticari Sƒ±r" niteliƒüindedir. Bu bilgilerin √º√ß√ºnc√º ki≈üilerle veya rakip firmalarla payla≈üƒ±lmasƒ±, tazminatsƒ±z derhal fesih nedenidir ve ayrƒ±ca cezai sorumluluk (TCK m. 239) doƒüurur.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 7: ƒ∞≈ûYERƒ∞ G√úVENLƒ∞ƒûƒ∞ VE Kƒ∞≈ûƒ∞SEL VERƒ∞LER (KVKK)</div><div class="doc-article-content">
<p><strong>7.1. G√∂r√ºnt√º Kaydƒ± (CCTV):</strong> ƒ∞≈üyeri g√ºvenliƒüi, i≈ü saƒülƒ±ƒüƒ± ve g√ºvenliƒüi ile operasyonel denetim amacƒ±yla maƒüaza genelinde, kasa noktalarƒ±nda ve √ßalƒ±≈üma alanlarƒ±nda (tuvalet/giyinme kabini hari√ß) 7/24 G√∂r√ºnt√º Kaydƒ± (Video) yapƒ±lmaktadƒ±r. Y√ñNETƒ∞Cƒ∞, bu uygulamanƒ±n KVKK m. 5/2-f (Me≈üru Menfaat) kapsamƒ±nda olduƒüunu bilir, kabul eder ve maƒüaza genelinde bu sistemin s√ºrekli √ßalƒ±≈üƒ±r durumda olmasƒ±nƒ± saƒülamakla y√ºk√ºml√ºd√ºr.</p>
<p><strong>7.2. Ses Kaydƒ± Yasaƒüƒ±:</strong> T√ºrk Ceza Kanunu'nun 133. maddesi ve KVKK ilkeleri gereƒüi, i≈üyerinde √ßalƒ±≈üanlarƒ±n ve m√º≈üterilerin √∂zel hayatƒ±nƒ±n gizliliƒüini ihlal edecek ≈üekilde genel ve s√ºrekli ses kaydƒ± yapƒ±lmamaktadƒ±r. Y√ñNETƒ∞Cƒ∞, maƒüaza i√ßinde izinsiz ses kaydƒ± alan cihazlarƒ±n kullanƒ±lmasƒ±nƒ± engellemekle sorumludur.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 8: SON H√úK√úMLER</div><div class="doc-article-content">
<p><strong>8.1. Delil S√∂zle≈ümesi:</strong> ƒ∞≈übu s√∂zle≈ümeden doƒüacak uyu≈ümazlƒ±klarda ≈ûƒ∞RKET'in ticari defterleri, bordrolarƒ±, banka kayƒ±tlarƒ±, e-posta yazƒ±≈ümalarƒ± ve kamera g√∂r√ºnt√ºleri HMK m. 193 uyarƒ±nca kesin delil niteliƒüindedir.</p>
<p><strong>8.2. Y√ºr√ºrl√ºk:</strong> ƒ∞≈übu s√∂zle≈üme, 2 (iki) sayfa ve 8 (sekiz) maddeden ibaret olup, {{BASLAMA}} tarihinde taraflarca okunup, m√ºzakere edilerek tam bir mutabakatla imzalanmƒ±≈ü ve bir n√ºshasƒ± Y√ñNETƒ∞Cƒ∞'ye teslim edilmi≈ütir.</p>
</div></div>`,
        bolge_muduru: `<div class="doc-article"><div class="doc-article-title">MADDE 2: G√ñREV TANIMI VE "ƒ∞≈ûVEREN VEKƒ∞Lƒ∞" STAT√úS√ú</div><div class="doc-article-content">
<p><strong>2.1. G√∂rev:</strong> PERSONEL, ≈ûƒ∞RKET b√ºnyesinde "B√ñLGE M√úD√úR√ú" unvanƒ± ile istihdam edilmi≈ütir. Sorumluluk alanƒ±, ≈ûirket tarafƒ±ndan kendisine yazƒ±lƒ± olarak veya ≈üirket veri sistemleri √ºzerinden bildirilen coƒürafi b√∂lge ve bu b√∂lgedeki t√ºm ≈üubelerdir.</p>
<p><strong>2.2. Hukuki Stat√º (ƒ∞≈üveren Vekilliƒüi):</strong> PERSONEL, kendisine baƒülƒ± b√∂lgedeki i≈üyerlerini (≈üubeleri) sevk ve idare eden, i≈ületmenin stratejik hedeflerine y√∂n veren ve sorumluluk b√∂lgesindeki alt kademe √ßalƒ±≈üanlarƒ± (≈ûube M√ºd√ºr√º, Barista, Servis Elemanƒ± vb.) i≈üe alma, i≈üten √ßƒ±karma, terfi ettirme ve disiplin cezasƒ± verme yetkisine m√ºstakil olarak (tek ba≈üƒ±na) sahip olan y√∂neticidir. Taraflar; PERSONEL'in bu yetki ve sorumluluklarƒ± gereƒüi, 4857 sayƒ±lƒ± ƒ∞≈ü Kanunu'nun 18. maddesinin son fƒ±krasƒ± ve 2. maddesi anlamƒ±nda "ƒ∞≈ületmenin B√ºt√ºn√ºn√º Sevk ve ƒ∞dare Eden ƒ∞≈üveren Vekili Yardƒ±mcƒ±sƒ±" veya "ƒ∞≈üyerinin B√ºt√ºn√ºn√º Sevk ve ƒ∞dare Eden ve ƒ∞≈ü√ßi Alma/√áƒ±karma Yetkisi Bulunan ƒ∞≈üveren Vekili" stat√ºs√ºnde olduƒüunu ve bu stat√ºn√ºn yasal sonu√ßlarƒ±nƒ± (i≈ü g√ºvencesi h√ºk√ºmlerinin uygulanmayacaƒüƒ±nƒ±) bildiƒüini kabul ve beyan ederler.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 3: G√ñREV, YETKƒ∞ VE SORUMLULUKLAR</div><div class="doc-article-content">
<p>PERSONEL, sorumluluk alanƒ±ndaki b√∂lgenin k√¢rlƒ±lƒ±ƒüƒ±, b√ºy√ºmesi ve marka standartlarƒ±nƒ±n korunmasƒ±ndan tam sorumludur. Asli g√∂revleri ≈üunlardƒ±r:</p>
<p>a) <strong>Stratejik Y√∂netim:</strong> B√∂lgedeki ≈üubelerin ciro, k√¢rlƒ±lƒ±k (P&L) ve b√ºy√ºme hedeflerini belirlemek, b√ºt√ßeyi y√∂netmek ve Genel M√ºd√ºrl√ºk stratejilerini sahada bizzat uygulamak.</p>
<p>b) <strong>ƒ∞K ve Organizasyon Y√∂netimi:</strong> B√∂lge kadrosunu olu≈üturmak, norm kadro √ßalƒ±≈ümalarƒ± yapmak, ≈ûube M√ºd√ºrlerini atamak, performanslarƒ±nƒ± deƒüerlendirmek, i≈üe alƒ±m ve fesih kararlarƒ±nƒ± nihai merci olarak vermek.</p>
<p>c) <strong>Denetim ve Standartlar:</strong> ≈ûubelerin operasyonel standartlara (hijyen, servis kalitesi, √ºr√ºn re√ßeteleri, Moonberry marka kimliƒüi) uygunluƒüunu denetlemek, "Gizli M√º≈üteri" skorlarƒ±nƒ± y√ºkseltmek.</p>
<p>d) <strong>Yasal Temsil:</strong> B√∂lgesindeki resmi kurumlar, belediyeler ve tedarik√ßiler nezdinde ≈ûƒ∞RKET'i temsil etmek, gerekli ruhsat ve izin s√ºre√ßlerini y√∂netmek.</p>
<p>e) <strong>Kriz Y√∂netimi:</strong> B√∂lgesinde olu≈üabilecek operasyonel krizleri (gƒ±da g√ºvenliƒüi, i≈ü kazasƒ±, sosyal medya krizi vb.) y√∂netmek.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 4: √áALI≈ûMA S√úRELERƒ∞ VE FAZLA √áALI≈ûMA D√úZENƒ∞</div><div class="doc-article-content">
<p><strong>4.1. Mesai D√ºzeni (Time Sovereignty):</strong> PERSONEL, "√úst D√ºzey Y√∂netici" konumunda olup; g√∂rev ve sorumluluklarƒ±nƒ±n gerektirdiƒüi ≈üekilde mesai saatlerini, ≈üube ziyaret planlarƒ±nƒ± ve √ßalƒ±≈üma d√ºzenini i≈üin gerekliliklerine g√∂re bizzat kendisi belirleme yetkisine sahiptir. ƒ∞≈ûVEREN, PERSONEL'e g√ºnl√ºk kart basma/imza atma zorunluluƒüu uygulamaz; esas olan hedeflerin ger√ßekle≈ümesidir.</p>
<p><strong>4.2. √úcretin Kapsamƒ±:</strong> PERSONEL'in aylƒ±k br√ºt √ºcreti, √ºstlendiƒüi y√∂netim sorumluluƒüu, yetkileri ve mesaisini kendisinin belirlemesi hususlarƒ± dikkate alƒ±narak, asgari √ºcretten ve emsal √ßalƒ±≈üanlardan belirgin ≈üekilde y√ºksek tespit edilmi≈ütir. Bu √ßer√ßevede; yasal sƒ±nƒ±r olan yƒ±llƒ±k 270 saate kadar yapƒ±lacak fazla √ßalƒ±≈ümalar, hafta tatili √ßalƒ±≈ümalarƒ± ve ulusal bayram/genel tatil g√ºn√º √ßalƒ±≈ümalarƒ± kararla≈ütƒ±rƒ±lan aylƒ±k √ºcrete dahildir. PERSONEL, bu √ßalƒ±≈ümalar i√ßin ayrƒ±ca √ºcret talep etmeyeceƒüini kabul eder.</p>
<p><strong>4.3. Denkle≈ütirme ve Serbest Zaman:</strong> Yƒ±llƒ±k 270 saati a≈üan bir fazla √ßalƒ±≈üma yapƒ±lmasƒ± ve bunun yazƒ±lƒ± delillerle ispatlanmasƒ± durumunda; a≈üan kƒ±smƒ±n kar≈üƒ±lƒ±ƒüƒ± nakdi √ºcret olarak deƒüil, 4857 sayƒ±lƒ± ƒ∞≈ü Kanunu'nun 41. maddesi uyarƒ±nca zamlƒ± oran √ºzerinden hesaplanacak "Serbest Zaman" (ƒ∞zin) olarak kullandƒ±rƒ±lacaktƒ±r.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 5: √úCRET VE YAN HAKLAR</div><div class="doc-article-content">
<p><strong>5.1. √úcret:</strong> PERSONEL'e aylƒ±k Br√ºt {{UCRET}} TL √ºcret √∂denecektir. √úcret, her ayƒ±n sonunda PERSONEL'in banka hesabƒ±na yatƒ±rƒ±lƒ±r.</p>
<p><strong>5.2. Performans Primi:</strong> ƒ∞≈ûVEREN, tek taraflƒ± inisiyatifi ile belirleyeceƒüi yƒ±llƒ±k hedeflerin (KPI) tutturulmasƒ± halinde PERSONEL'e prim √∂demesi yapabilir. Prim uygulamasƒ±, "ƒ∞≈üyeri ≈ûartƒ±" niteliƒüinde olmayƒ±p, ƒ∞≈ûVEREN tarafƒ±ndan her d√∂nem deƒüi≈ütirilebilir veya tamamen kaldƒ±rƒ±labilir.</p>
<p><strong>5.3. Ara√ß ve Ekipman:</strong> G√∂rev gereƒüi tahsis edilen ≈üirket aracƒ±, bilgisayar ve telefon, sadece i≈ü ama√ßlƒ± kullanƒ±m i√ßindir. ƒ∞≈ü s√∂zle≈ümesinin sona ermesi veya ƒ∞≈ûVEREN'in talebi halinde bu ekipmanlar derhal ve eksiksiz iade edilecektir.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 6: ≈ûƒ∞RKET ARACI KULLANIMI VE TRAFƒ∞K CEZALARI</div><div class="doc-article-content">
<p><strong>6.1. Sorumluluk:</strong> PERSONEL, kendisine tahsis edilen ≈üirket aracƒ±nƒ± Karayollarƒ± Trafik Kanunu'na ve i≈ü g√ºvenliƒüi kurallarƒ±na uygun kullanmakla y√ºk√ºml√ºd√ºr.</p>
<p><strong>6.2. Cezalarƒ±n R√ºcu Edilmesi:</strong> PERSONEL'in kullanƒ±mƒ±nda iken (ister mesai i√ßinde ister dƒ±≈üƒ±nda) araca kesilen trafik cezalarƒ±ndan (hƒ±z, park, kƒ±rmƒ±zƒ± ƒ±≈üƒ±k vb.) PERSONEL ≈üahsen sorumludur. ≈ûƒ∞RKET, yasal zorunluluk gereƒüi cezayƒ± √∂demek zorunda kalƒ±rsa; PERSONEL, √∂denen tutarƒ± ilk yazƒ±lƒ± bildirimde ≈ûƒ∞RKET'e nakden √∂demeyi veya ilgili tutarƒ±n √ºcretinden mahsup edilmesi i√ßin her olay √∂zelinde ayrƒ±ca muvafakatname vermeyi kabul ve taahh√ºt eder.</p>
<p><strong>6.3. Disiplin:</strong> PERSONEL'in kusurlu davranƒ±≈üƒ± sonucu olu≈üan trafik cezalarƒ±nƒ± √∂demekten imtina etmesi veya r√ºcu i≈ülemine onay vermemesi, i≈üverene zarar verme kastƒ± ta≈üƒ±dƒ±ƒüƒ±ndan, ƒ∞≈ü Kanunu m. 25/II kapsamƒ±nda haklƒ± fesih nedeni sayƒ±labilecektir.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 7: REKABET YASAƒûI, Gƒ∞ZLƒ∞Lƒ∞K VE CEZAƒ∞ ≈ûART</div><div class="doc-article-content">
<p><strong>7.1. Gizlilik ve Ticari Sƒ±r:</strong> PERSONEL; ≈ûƒ∞RKET'in maliyet yapƒ±larƒ±, franchise ko≈üullarƒ±, tedarik√ßi anla≈ümalarƒ±, m√º≈üteri veritabanƒ±, √∂zel tarifeleri ve b√ºy√ºme stratejileri gibi "Ticari Sƒ±r" niteliƒüindeki bilgilere vakƒ±ftƒ±r. Bu bilgilerin s√∂zle≈üme s√ºresince veya sona erdikten sonra √º√ß√ºnc√º ki≈üilerle payla≈üƒ±lmasƒ±, TCK m. 239 kapsamƒ±nda su√ß te≈ükil eder ve tazminatsƒ±z derhal fesih nedenidir.</p>
<p><strong>7.2. Rekabet Yasaƒüƒ± (TBK 444-447):</strong> PERSONEL, i≈ü s√∂zle≈ümesi herhangi bir nedenle (i≈üverenin haklƒ± feshi veya personelin istifasƒ±/haksƒ±z feshi ile) sona erdikten sonra 2 (iki) yƒ±l s√ºreyle; son g√∂rev yaptƒ±ƒüƒ± il sƒ±nƒ±rlarƒ± i√ßerisinde, "Kahve Zinciri, Kafe-Restoran ve Gƒ±da Perakendeciliƒüi" sekt√∂r√ºnde faaliyet g√∂steren rakip bir firmada √ßalƒ±≈ümamayƒ±, ortak olmamayƒ± veya danƒ±≈ümanlƒ±k yapmamayƒ± taahh√ºt eder.</p>
<p><strong>7.3. Cezai ≈ûart:</strong> PERSONEL'in i≈übu 7. maddede d√ºzenlenen rekabet yasaƒüƒ±nƒ± ihlal etmesi halinde; ≈ûƒ∞RKET'in uƒüradƒ±ƒüƒ± zararƒ±n miktarƒ±nƒ± ispat etmesine gerek kalmaksƒ±zƒ±n, PERSONEL, son br√ºt maa≈üƒ±nƒ±n 6 (Altƒ±) katƒ± tutarƒ±nda cezai ≈üartƒ± ƒ∞≈ûVEREN'e derhal ve nakden √∂demeyi kabul ve taahh√ºt eder. ƒ∞≈ûVEREN'in bu miktarƒ± a≈üan zararlarƒ±nƒ± talep hakkƒ± ve TBK m. 446/2 uyarƒ±nca rekabet edici davranƒ±≈üa son verilmesini talep hakkƒ± saklƒ±dƒ±r.</p>
<p><strong>7.4. Ayartma Yasaƒüƒ± (Non-Solicitation):</strong> PERSONEL, i≈üten ayrƒ±ldƒ±ktan sonra 2 yƒ±l s√ºreyle, ≈ûƒ∞RKET √ßalƒ±≈üanlarƒ±nƒ± yeni i≈üyerine transfer etmeyeceƒüini, onlara i≈ü teklifinde bulunmayacaƒüƒ±nƒ± taahh√ºt eder.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 8: Fƒ∞KRƒ∞ M√úLKƒ∞YET HAKLARININ DEVRƒ∞</div><div class="doc-article-content">
<p>PERSONEL, i≈übu s√∂zle≈üme kapsamƒ±nda g√∂revi sƒ±rasƒ±nda veya g√∂revi nedeniyle meydana getirdiƒüi/getireceƒüi her t√ºrl√º fikir, sanat eseri, rapor, operasyonel s√ºre√ß tasarƒ±mƒ±, eƒüitim materyali, bilgisayar programƒ±, veri tabanƒ± ve i≈ü geli≈ütirme projeleri √ºzerindeki 5846 sayƒ±lƒ± FSEK kapsamƒ±ndaki t√ºm mali haklarƒ± (i≈üleme, √ßoƒüaltma, yayma, temsil, umuma iletim) yer, s√ºre ve sayƒ± sƒ±nƒ±rƒ± olmaksƒ±zƒ±n, i≈übu s√∂zle≈ümedeki √ºcret kar≈üƒ±lƒ±ƒüƒ±nda m√ºnhasƒ±ran ≈ûƒ∞RKET'e devrettiƒüini; bu haklarƒ±n kullanƒ±mƒ± ve devri konusunda ≈ûƒ∞RKET'in tam yetkili olduƒüunu kabul ve beyan eder.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 9: √úCRETLƒ∞ UZAKLA≈ûTIRMA (GARDEN LEAVE)</div><div class="doc-article-content">
<p>ƒ∞≈ü s√∂zle≈ümesinin herhangi bir nedenle feshi ihbarƒ±nda bulunulmasƒ± halinde (taraflardan hangisinin ihbar ettiƒüine bakƒ±lmaksƒ±zƒ±n); ≈ûƒ∞RKET, ihbar s√ºresinin tamamƒ±nda veya bir kƒ±smƒ±nda PERSONEL'i i≈üyerine gelmekten, i≈ü g√∂rme borcunu ifa etmekten ve ≈üirket sistemlerine eri≈ümekten muaf tutma (Garden Leave) hakkƒ±na sahiptir. Bu s√ºre zarfƒ±nda PERSONEL'in √ºcret ve yan haklarƒ± (prim hari√ß) √∂denmeye devam eder. PERSONEL, bu s√ºre i√ßinde ba≈üka bir i≈üverene hizmet veremez, rekabet edemez ve sadakat borcuna aykƒ±rƒ± davranamaz.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 10: Kƒ∞≈ûƒ∞SEL VERƒ∞LERƒ∞N KORUNMASI (KVKK) VE ƒ∞ZLEME</div><div class="doc-article-content">
<p><strong>10.1.</strong> ≈ûƒ∞RKET; i≈ü saƒülƒ±ƒüƒ± g√ºvenliƒüi, operasyonel verimlilik, ≈üirket varlƒ±klarƒ±nƒ±n korunmasƒ± ve yasal y√ºk√ºml√ºl√ºkler (i≈üin ifasƒ± ve me≈üru menfaat) sebepleriyle; i≈üyerlerinde, ofislerde kamera ile g√∂r√ºnt√º kaydƒ± ve ≈üirket ara√ßlarƒ±nda GPS (Konum) takip sistemi kullanmaktadƒ±r.</p>
<p><strong>10.2.</strong> PERSONEL, bu veri i≈üleme faaliyetleri, kameralarƒ±n bulunduƒüu yerler ve ara√ß takip sisteminin √ßalƒ±≈üma prensipleri hakkƒ±nda kendisine ayrƒ±ca tebliƒü edilen "√áalƒ±≈üan Aydƒ±nlatma Metni" ile 6698 sayƒ±lƒ± KVKK kapsamƒ±nda detaylƒ±ca bilgilendirildiƒüini, mesai saatleri dƒ±≈üƒ±nda ≈üirket aracƒ±nƒ±n kullanƒ±mƒ± durumunda da (√∂zel kullanƒ±m izni varsa) GPS kaydƒ±nƒ±n devam edebileceƒüini bildiƒüini beyan eder.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 11: MOBBƒ∞NG VE ETƒ∞K HAT</div><div class="doc-article-content">
<p>PERSONEL, i≈üyerinde kar≈üƒ±la≈üabileceƒüi her t√ºrl√º etik dƒ±≈üƒ± davranƒ±≈ü, ayrƒ±mcƒ±lƒ±k veya psikolojik taciz (mobbing) iddiasƒ±nƒ±, yasal yollara ba≈üvurmadan √∂nce ivedilikle ≈ûirket Y√∂netim Kurulu'na veya varsa "Etik Hattƒ±"na yazƒ±lƒ± olarak bildirmeyi kabul eder. ≈ûƒ∞RKET, bu ba≈üvurularƒ± gizlilik i√ßinde inceleyip sonu√ßlandƒ±racaƒüƒ±nƒ± taahh√ºt eder.</p>
</div></div>

<div class="doc-article"><div class="doc-article-title">MADDE 12: SON H√úK√úMLER VE Y√úR√úRL√úK</div><div class="doc-article-content">
<p><strong>12.1.</strong> ƒ∞≈übu s√∂zle≈ümede h√ºk√ºm bulunmayan hallerde 4857 sayƒ±lƒ± ƒ∞≈ü Kanunu, 6098 sayƒ±lƒ± TBK ve ilgili mevzuat h√ºk√ºmleri uygulanƒ±r.</p>
<p><strong>12.2.</strong> Uyu≈ümazlƒ±k halinde ƒ∞stanbul (√áaƒülayan) Mahkemeleri ve ƒ∞cra Daireleri yetkilidir.</p>
<p><strong>12.3.</strong> ƒ∞ki sayfadan ve 12 maddeden ibaret i≈übu s√∂zle≈üme, {{BASLAMA}} tarihinde taraflarca okunarak, i√ßeriƒüi m√ºzakere edilip tam olarak anla≈üƒ±larak serbest iradeleriyle imzalanmƒ±≈ü ve bir n√ºshasƒ± PERSONEL'e teslim edilmi≈ütir.</p>
</div></div>`
    },
    fesihDayanaklari: {
        hakli: [
            {v:'25_2_a',t:'25/II-a: Yanƒ±ltma'},
            {v:'25_2_b',t:'25/II-b: Hakaret'},
            {v:'25_2_d',t:'25/II-d: Sata≈üma/Sarho≈üluk'},
            {v:'25_2_e',t:'25/II-e: G√ºveni k√∂t√ºye kullanma'},
            {v:'25_2_g',t:'25/II-g: Devamsƒ±zlƒ±k'},
            {v:'25_2_h',t:'25/II-h: G√∂rev reddi'},
            {v:'25_2_i',t:'25/II-ƒ±: ƒ∞≈ü g√ºvenliƒüi'}
        ],
        gecerli: [
            {v:'18_y',t:'Yetersizlik'},
            {v:'18_d',t:'Davranƒ±≈ü'},
            {v:'18_i',t:'ƒ∞≈ületme gerekleri'}
        ],
        deneme: [{v:'deneme',t:'Deneme deƒüerlendirmesi'}]
    },
    documentTemplates: {
        tutanak: {
            olay: '<p><strong>OLAY:</strong></p><p>{{TARIH}} tarihinde saat {{SAAT}} sƒ±ralarƒ±nda, {{SUBE}} ≈üubesinde g√∂revli {{PERSONEL}} ({{TC}}) a≈üaƒüƒ±da a√ßƒ±klanan olayƒ± ger√ßekle≈ütirmi≈ütir:</p><p style="background:#f9f9f9;padding:15px;border-left:4px solid #e07b39;margin:15px 0">{{ACIKLAMA}}</p><p>ƒ∞≈übu tutanak, olayƒ±n tespiti amacƒ±yla d√ºzenlenmi≈ü olup, ilgili personele tebliƒü edilmi≈ütir.</p>',
            devamsizlik: '<p><strong>DEVAMSIZLIK TESPƒ∞Tƒ∞:</strong></p><p>{{PERSONEL}} ({{TC}}), {{TARIH}} tarihinde {{SUBE}} ≈üubesinde g√∂reve gelmemi≈ütir.</p><p>Yapƒ±lan ara≈ütƒ±rmada herhangi bir mazeret bildirimi tespit edilememi≈ütir.</p><p style="background:#fef9e7;padding:12px;border-radius:6px;margin:15px 0">‚ö†Ô∏è ƒ∞≈ü Kanunu Md. 25/II-g: Ardƒ± ardƒ±na 2 i≈ü g√ºn√º veya ay i√ßinde 3 i≈ü g√ºn√º devamsƒ±zlƒ±k haklƒ± fesih sebebidir.</p>',
            kasa: '<p><strong>KASA SAYIM TESPƒ∞Tƒ∞:</strong></p><p>{{TARIH}} tarihinde saat {{SAAT}} itibarƒ±yla {{SUBE}} ≈üubesinde yapƒ±lan kasa sayƒ±mƒ±nda a≈üaƒüƒ±daki tespit yapƒ±lmƒ±≈ütƒ±r:</p><p>Sorumlu personel: {{PERSONEL}} ({{TC}})</p><p style="background:#f9f9f9;padding:15px;border-left:4px solid #e07b39;margin:15px 0">{{ACIKLAMA}}</p><p>TBK Md. 407/2 uyarƒ±nca personelin yazƒ±lƒ± muvafakati ile √ºcretinden kesinti yapƒ±labilir.</p>',
            imza: '<p><strong>ƒ∞MZADAN ƒ∞MTƒ∞NA TESPƒ∞Tƒ∞:</strong></p><p>{{TARIH}} tarihinde {{PERSONEL}} ({{TC}}) adlƒ± personele tebliƒü edilmek istenen belgeyi imzalamaktan imtina etmi≈ütir.</p><p>ƒ∞mtina edilen belge: {{ACIKLAMA}}</p><p style="background:#ebf5fb;padding:12px;border-radius:6px;margin:15px 0">üìå Yargƒ±tay i√ßtihadƒ± gereƒüi, 2 ≈üahit huzurunda d√ºzenlenen imtina tutanaƒüƒ± tebliƒü yerine ge√ßer.</p>'
        },
        savunma: '<p>≈ûirketimiz {{SUBE}} ≈üubesinde {{POZISYON}} olarak g√∂rev yapmaktasƒ±nƒ±z.</p><p><strong>{{TARIH}}</strong> tarihinde ger√ßekle≈ütirdiƒüiniz a≈üaƒüƒ±daki davranƒ±≈ü/eylem nedeniyle savunmanƒ±z istenmektedir:</p><p style="background:#f9f9f9;padding:15px;border-left:4px solid #e07b39;margin:15px 0">{{ACIKLAMA}}</p><p>Bu davranƒ±≈ü <strong>{{DAYANAK}}</strong> kapsamƒ±nda deƒüerlendirilmektedir.</p><p style="background:#fef9e7;padding:12px;border-radius:6px;margin:15px 0">‚ö†Ô∏è Savunmanƒ±zƒ± bu yazƒ±nƒ±n tebliƒüinden itibaren <strong>{{SURE}}</strong> i√ßinde yazƒ±lƒ± olarak vermeniz gerekmektedir. S√ºresinde savunma verilmemesi, savunma hakkƒ±ndan vazge√ßilmi≈ü sayƒ±lacaktƒ±r.</p>',
        fesih: {
            hakli: '<p>{{TARIH}} tarihinde ger√ßekle≈ütirdiƒüiniz a≈üaƒüƒ±daki eylem/davranƒ±≈ü nedeniyle i≈ü s√∂zle≈ümeniz <strong>4857 sayƒ±lƒ± ƒ∞≈ü Kanunu\'nun {{DAYANAK}} maddesi</strong> uyarƒ±nca haklƒ± nedenle ve derhal feshedilmi≈ütir:</p><p style="background:#f9f9f9;padding:15px;border-left:4px solid #c0392b;margin:15px 0">{{ACIKLAMA}}</p><p>Bu fesih i≈ülemi sonucunda kƒ±dem ve ihbar tazminatƒ± √∂denmeyecektir.</p>',
            gecerli: '<p>A≈üaƒüƒ±da belirtilen nedenlerle i≈ü s√∂zle≈ümeniz <strong>4857 sayƒ±lƒ± ƒ∞≈ü Kanunu\'nun 17. ve 18. maddeleri</strong> uyarƒ±nca ge√ßerli nedenle feshedilmi≈ütir:</p><p style="background:#f9f9f9;padding:15px;border-left:4px solid #e07b39;margin:15px 0">{{ACIKLAMA}}</p><p>ƒ∞hbar s√ºreniz: {{IHBAR_SURE}}<br>Son √ßalƒ±≈üma g√ºn√ºn√ºz: {{SON_GUN}}</p><p>Kƒ±dem tazminatƒ± ve diƒüer yasal haklarƒ±nƒ±z √∂denecektir.</p>',
            deneme: '<p>{{BASLAMA}} tarihinde ba≈ülayan i≈ü s√∂zle≈ümeniz, 2 aylƒ±k deneme s√ºresi i√ßinde <strong>4857 sayƒ±lƒ± ƒ∞≈ü Kanunu\'nun 15. maddesi</strong> uyarƒ±nca sona erdirilmi≈ütir.</p><p style="background:#f9f9f9;padding:15px;border-left:4px solid #3498db;margin:15px 0">{{ACIKLAMA}}</p><p>Deneme s√ºresi i√ßinde fesih bildirim s√ºresine ve tazminata tabi deƒüildir.</p>'
        },
        borc: '<p>Ben {{PERSONEL}}, {{TARIH}} tarihli olayda kusurum nedeniyle <strong>{{TUTAR}} TL</strong> borcu kabul ediyorum.</p><p style="background:#f9f9f9;padding:15px;border-left:4px solid #e07b39;margin:15px 0">{{ACIKLAMA}}</p><p>TBK Md. 407/2 uyarƒ±nca bu borcun {{ODEME_SEKLI}} kabul ve taahh√ºt ediyorum.</p><p>Baskƒ± altƒ±nda olmadƒ±ƒüƒ±mƒ±, borcumu ve kesinti ko≈üullarƒ±nƒ± anladƒ±ƒüƒ±mƒ± beyan ederim.</p>'
    }
};

// ==================== STATE MANAGEMENT ====================
let STATE = {};
let currentPage = 'dashboard';
let previousPage = 'dashboard';
let selectedTypes = {sozlesme: 'barista', tutanak: null, fesih: null};

function loadState() {
    const saved = localStorage.getItem('moonberry_state');
    if (saved) {
        try {
            const parsed = JSON.parse(saved);
            // Deep merge for nested objects like company
            STATE = {...DEFAULT_STATE, ...parsed};
            STATE.company = {...DEFAULT_STATE.company, ...parsed.company};
        } catch(e) {
            STATE = {...DEFAULT_STATE};
        }
    } else {
        STATE = {...DEFAULT_STATE};
    }
    saveState();
}

function saveState() {
    localStorage.setItem('moonberry_state', JSON.stringify(STATE));
}

// ==================== INIT ====================
document.addEventListener('DOMContentLoaded', () => {
    // Firebase Initialize
    if (typeof firebase !== 'undefined') {
        firebase.initializeApp(firebaseConfig);
        db = firebase.firestore();
        console.log('Firebase initialized');
        
        // Auth State Listener - Kullanƒ±cƒ± oturum durumunu takip et
        firebase.auth().onAuthStateChanged(async (user) => {
            if (user) {
                // Kullanƒ±cƒ± giri≈ü yapmƒ±≈ü
                console.log('User logged in:', user.email);
                
                // Kullanƒ±cƒ± bilgilerini Firestore'dan al
                try {
                    const userDoc = await db.collection('users').doc(user.uid).get();
                    if (userDoc.exists) {
                        currentUser = { id: user.uid, email: user.email, ...userDoc.data() };
                    } else {
                        // ƒ∞lk admin giri≈üi
                        const isAdmin = user.email === 'admin@moonberrycoffee.com';
                        currentUser = {
                            id: user.uid,
                            email: user.email,
                            name: isAdmin ? 'Y√∂netici' : user.email.split('@')[0],
                            role: isAdmin ? 'yonetici' : 'magaza_muduru',
                            branch: isAdmin ? 'all' : ''
                        };
                    }
                    
                    document.getElementById('lockOverlay').classList.add('hidden');
                    applyUserPermissions();
                    loadFirebaseData();
                } catch (error) {
                    console.error('Error loading user data:', error);
                }
            } else {
                // Kullanƒ±cƒ± √ßƒ±kƒ±≈ü yapmƒ±≈ü
                console.log('User logged out');
                currentUser = null;
                document.getElementById('lockOverlay').classList.remove('hidden');
            }
        });
    } else {
        console.error('Firebase SDK not loaded');
    }
    
    loadState();
    initLoginScreen();
    initUI();
});

// √áƒ±kƒ±≈ü yap fonksiyonu
async function logout() {
    try {
        await firebase.auth().signOut();
        currentUser = null;
        document.getElementById('lockOverlay').classList.remove('hidden');
        toast('√áƒ±kƒ±≈ü yapƒ±ldƒ±', 'success');
    } catch (error) {
        console.error('Logout error:', error);
        toast('√áƒ±kƒ±≈ü hatasƒ±', 'error');
    }
}

function initUI() {
    document.getElementById('companyName').textContent = STATE.company.name;
    populateSelects();
    renderPositionCards();
    renderViolations();
    renderAdminLists();
    loadAdminFields();
    setDefaultDates();
    
    // Belge ≈üablonlarƒ± i√ßin varsayƒ±lanƒ± y√ºkle
    if (document.getElementById('doc_template_content')) {
        loadDocTemplate('tutanak', 'olay');
    }
}

function setDefaultDates() {
    const now = new Date();
    const dateStr = now.toISOString().split('T')[0];
    const timeStr = now.toTimeString().slice(0, 5);
    
    // Tutanak varsayƒ±lan tarih/saatleri
    const tutTarih = document.getElementById('tut_tarih');
    const tutSaat = document.getElementById('tut_saat');
    const tutDuzTarih = document.getElementById('tut_duz_tarih');
    const tutDuzSaat = document.getElementById('tut_duz_saat');
    if (tutTarih) tutTarih.value = dateStr;
    if (tutSaat) tutSaat.value = timeStr;
    if (tutDuzTarih) tutDuzTarih.value = dateStr;
    if (tutDuzSaat) tutDuzSaat.value = timeStr;
    
    // Savunma varsayƒ±lan tarih
    const savTarih = document.getElementById('sav_tarih');
    const savDuzTarih = document.getElementById('sav_duz_tarih');
    const savDuzSaat = document.getElementById('sav_duz_saat');
    if (savTarih) savTarih.value = dateStr;
    if (savDuzTarih) savDuzTarih.value = dateStr;
    if (savDuzSaat) savDuzSaat.value = timeStr;
    
    // Fesih varsayƒ±lan tarihler
    const fesOgrenme = document.getElementById('fes_ogrenme');
    const fesTarih = document.getElementById('fes_tarih');
    if (fesOgrenme) fesOgrenme.value = dateStr;
    if (fesTarih) fesTarih.value = dateStr;
    
    // Bor√ß varsayƒ±lan tarih
    const borcTarih = document.getElementById('borc_tarih');
    const borcDuzTarih = document.getElementById('borc_duz_tarih');
    if (borcTarih) borcTarih.value = dateStr;
    if (borcDuzTarih) borcDuzTarih.value = dateStr;
    
    // Avans varsayƒ±lan tarih
    const avansTarih = document.getElementById('avans_tarih');
    if (avansTarih) avansTarih.value = dateStr;
    
    // Zimmet varsayƒ±lan tarih
    const zimmetTarih = document.getElementById('zimmet_tarih');
    if (zimmetTarih) zimmetTarih.value = dateStr;
    
    // S√∂zle≈üme varsayƒ±lan ba≈ülama tarihi
    const sozBaslama = document.getElementById('soz_baslama');
    if (sozBaslama) sozBaslama.value = dateStr;
}

function populateSelects() {
    // ≈ûube selectleri
    const branchSelects = ['soz_sube', 'tut_sube', 'sav_sube', 'borc_sube', 'fes_sube', 'avans_sube', 'zimmet_sube'];
    branchSelects.forEach(id => {
        const sel = document.getElementById(id);
        if (sel) {
            sel.innerHTML = STATE.branches.map(b => `<option>${b}</option>`).join('');
        }
    });
    
    // Pozisyon selectleri
    const posSelects = ['tut_pozisyon', 'sav_pozisyon', 'fes_pozisyon', 'avans_pozisyon', 'zimmet_pozisyon'];
    posSelects.forEach(id => {
        const sel = document.getElementById(id);
        if (sel) {
            sel.innerHTML = STATE.positions.map(p => `<option value="${p.id}">${p.name}</option>`).join('');
        }
    });
    
    // Template select
    const tplSel = document.getElementById('template_pozisyon');
    if (tplSel) {
        tplSel.innerHTML = STATE.positions.map(p => `<option value="${p.id}">${p.name}</option>`).join('');
    }
}

// ≈ûube select populate - kullanƒ±cƒ± yetkisine g√∂re filtrele
function populateSubeSelect(selectId) {
    const sel = document.getElementById(selectId);
    if (!sel) return;
    
    const userBranch = currentUser?.branch;
    const isAdmin = currentUser?.role === 'yonetici' || currentUser?.role === 'bolge_muduru';
    
    let branches = STATE.branches || [];
    
    // Maƒüaza m√ºd√ºr√º sadece kendi ≈üubesini g√∂rs√ºn
    if (!isAdmin && userBranch) {
        branches = branches.filter(b => b === userBranch);
    }
    
    sel.innerHTML = branches.map(b => `<option value="${b}">${b}</option>`).join('');
    
    // Maƒüaza m√ºd√ºr√º ise kendi ≈üubesini se√ß
    if (!isAdmin && userBranch) {
        sel.value = userBranch;
    }
}

function renderPositionCards() {
    const container = document.getElementById('sozlesmePozisyonlar');
    if (!container) return;
    container.innerHTML = STATE.positions.map((p, i) => `
        <div class="type-card${i === 0 ? ' selected' : ''}" data-type="${p.id}" onclick="selectType('sozlesme','${p.id}',this)">
            <div class="type-card-icon">${p.type === 'Mavi Yaka' ? '‚òï' : p.type === 'Gri Yaka' ? 'üìã' : p.type === 'Beyaz Yaka' ? 'üè™' : 'üåç'}</div>
            <div class="type-card-title">${p.name}</div>
            <div class="type-card-sub">${p.type}</div>
        </div>
    `).join('');
}

// ==================== LOGIN SYSTEM ====================
function initLoginScreen() {
    // Check lockout
    const savedLockout = localStorage.getItem('loginLockoutUntil');
    if (savedLockout && Date.now() < parseInt(savedLockout)) {
        lockoutUntil = parseInt(savedLockout);
        showLockoutTimer();
    }
    
    // Check saved attempts
    loginAttempts = parseInt(localStorage.getItem('loginAttempts') || '0');
    
    // Focus username
    setTimeout(() => document.getElementById('loginUsername').focus(), 100);
    
    // Initialize Firebase users if needed
    initializeDefaultUsers();
}

async function initializeDefaultUsers() {
    try {
        const usersRef = db.collection('users');
        const snapshot = await usersRef.get();
        
        if (snapshot.empty) {
            // ƒ∞lk kez a√ßƒ±lƒ±yor, varsayƒ±lan admin'i ekle
            for (const user of DEFAULT_USERS) {
                await usersRef.doc(user.username).set({
                    ...user,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
            }
            console.log('Varsayƒ±lan kullanƒ±cƒ±lar olu≈üturuldu');
        }
        
        // Varsayƒ±lan puantaj kurallarƒ±nƒ± kontrol et
        const rulesRef = db.collection('puantajRules');
        const rulesSnapshot = await rulesRef.get();
        if (rulesSnapshot.empty) {
            for (const rule of DEFAULT_PUANTAJ_RULES) {
                await rulesRef.doc(rule.id).set(rule);
            }
            console.log('Varsayƒ±lan puantaj kurallarƒ± olu≈üturuldu');
        }
        
        // Varsayƒ±lan rol yetkilerini kontrol et
        const permsRef = db.collection('permissions');
        const permsSnapshot = await permsRef.get();
        if (permsSnapshot.empty) {
            for (const [role, perms] of Object.entries(DEFAULT_PERMISSIONS)) {
                await permsRef.doc(role).set(perms);
            }
            console.log('Varsayƒ±lan yetkiler olu≈üturuldu');
        }
    } catch (error) {
        console.error('Firebase initialization error:', error);
    }
}

async function handleLogin(event) {
    event.preventDefault();
    
    // Check lockout
    if (lockoutUntil && Date.now() < lockoutUntil) {
        showLockoutTimer();
        return;
    }
    
    const email = document.getElementById('loginEmail').value.trim();
    const password = document.getElementById('loginPassword').value;
    const btn = document.getElementById('loginBtn');
    
    btn.disabled = true;
    btn.textContent = 'Giri≈ü yapƒ±lƒ±yor...';
    
    try {
        // Firebase Authentication ile giri≈ü
        const userCredential = await firebase.auth().signInWithEmailAndPassword(email, password);
        const user = userCredential.user;
        
        // Kullanƒ±cƒ± bilgilerini Firestore'dan al
        const userDoc = await db.collection('users').doc(user.uid).get();
        
        if (userDoc.exists) {
            currentUser = { id: user.uid, email: user.email, ...userDoc.data() };
        } else {
            // ƒ∞lk admin giri≈üi - Firestore'da kayƒ±t olu≈ütur
            const isAdmin = email === 'admin@moonberrycoffee.com';
            const newUserData = {
                email: user.email,
                name: isAdmin ? 'Y√∂netici' : user.email.split('@')[0],
                role: isAdmin ? 'yonetici' : 'magaza_muduru',
                branch: isAdmin ? 'all' : '',
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            };
            await db.collection('users').doc(user.uid).set(newUserData);
            currentUser = { id: user.uid, email: user.email, ...newUserData };
        }
        
        // Ba≈üarƒ±lƒ± giri≈ü
        loginAttempts = 0;
        localStorage.removeItem('loginAttempts');
        localStorage.removeItem('loginLockoutUntil');
        
        // Log login
        await db.collection('logs').add({
            type: 'login',
            user: user.email,
            userId: user.uid,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });
        
        // Hide lock screen
        document.getElementById('lockOverlay').classList.add('hidden');
        
        // Apply permissions
        applyUserPermissions();
        
        // Load Firebase data
        loadFirebaseData();
        
        toast('Ho≈ü geldiniz, ' + (currentUser.name || user.email), 'success');
        
    } catch (error) {
        console.error('Login error:', error);
        
        // Firebase Auth hata mesajlarƒ±nƒ± T√ºrk√ßele≈ütir
        let errorMsg = 'Giri≈ü hatasƒ±';
        switch (error.code) {
            case 'auth/user-not-found':
                errorMsg = 'Bu e-posta ile kayƒ±tlƒ± kullanƒ±cƒ± bulunamadƒ±';
                break;
            case 'auth/wrong-password':
                errorMsg = '≈ûifre hatalƒ±';
                break;
            case 'auth/invalid-email':
                errorMsg = 'Ge√ßersiz e-posta adresi';
                break;
            case 'auth/user-disabled':
                errorMsg = 'Bu hesap devre dƒ±≈üƒ± bƒ±rakƒ±lmƒ±≈ü';
                break;
            case 'auth/too-many-requests':
                errorMsg = '√áok fazla hatalƒ± deneme. L√ºtfen bekleyin.';
                break;
            case 'auth/invalid-credential':
                errorMsg = 'E-posta veya ≈üifre hatalƒ±';
                break;
            default:
                errorMsg = error.message;
        }
        
        loginAttempts++;
        localStorage.setItem('loginAttempts', loginAttempts);
        
        if (loginAttempts >= MAX_ATTEMPTS) {
            lockoutUntil = Date.now() + LOCKOUT_DURATION;
            localStorage.setItem('loginLockoutUntil', lockoutUntil);
            showLockoutTimer();
        } else {
            showLoginError(errorMsg);
        }
    }
    
    btn.disabled = false;
    btn.textContent = 'Giri≈ü Yap';
}

// ≈ûifremi unuttum
function showForgotPassword(event) {
    event.preventDefault();
    showModal('≈ûifre Sƒ±fƒ±rlama', `
        <p style="color:var(--tx2);margin-bottom:16px">E-posta adresinizi girin, ≈üifre sƒ±fƒ±rlama baƒülantƒ±sƒ± g√∂ndereceƒüiz.</p>
        <div class="form-group">
            <label class="form-label">E-posta</label>
            <input type="email" id="resetEmail" class="form-input" placeholder="ornek@moonberrycoffee.com">
        </div>
    `, `
        <button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn btn-primary" onclick="sendPasswordReset()">G√∂nder</button>
    `);
}

async function sendPasswordReset() {
    const email = document.getElementById('resetEmail').value.trim();
    if (!email) {
        toast('E-posta adresi girin', 'error');
        return;
    }
    
    try {
        await firebase.auth().sendPasswordResetEmail(email);
        closeModal();
        toast('≈ûifre sƒ±fƒ±rlama baƒülantƒ±sƒ± g√∂nderildi', 'success');
    } catch (error) {
        console.error('Password reset error:', error);
        let msg = 'Hata olu≈ütu';
        if (error.code === 'auth/user-not-found') {
            msg = 'Bu e-posta ile kayƒ±tlƒ± kullanƒ±cƒ± bulunamadƒ±';
        }
        toast(msg, 'error');
    }
}

function showLoginError(msg) {
    const errorEl = document.getElementById('lockError');
    const inputs = document.querySelectorAll('.login-field input');
    
    errorEl.textContent = msg;
    errorEl.classList.add('show');
    inputs.forEach(i => i.classList.add('error'));
    
    setTimeout(() => {
        errorEl.classList.remove('show');
        inputs.forEach(i => i.classList.remove('error'));
    }, 3000);
}

function showLockoutTimer() {
    const form = document.getElementById('loginForm');
    const lockedDiv = document.getElementById('lockLocked');
    const timerSpan = document.getElementById('lockTimer');
    
    form.style.display = 'none';
    lockedDiv.style.display = 'block';
    
    const updateTimer = () => {
        const remaining = lockoutUntil - Date.now();
        if (remaining <= 0) {
            form.style.display = 'flex';
            lockedDiv.style.display = 'none';
            loginAttempts = 0;
            localStorage.removeItem('loginAttempts');
            localStorage.removeItem('loginLockoutUntil');
            lockoutUntil = null;
            return;
        }
        const mins = Math.floor(remaining / 60000);
        const secs = Math.floor((remaining % 60000) / 1000);
        timerSpan.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
        setTimeout(updateTimer, 1000);
    };
    updateTimer();
}

function applyUserPermissions() {
    if (!currentUser) return;
    
    // Sidebar'da kullanƒ±cƒ± bilgilerini g√ºncelle
    const userNameEl = document.getElementById('userName');
    const userRoleEl = document.getElementById('userRole');
    const userAvatarEl = document.getElementById('userAvatar');
    
    if (userNameEl) userNameEl.textContent = currentUser.name || currentUser.email;
    if (userRoleEl) {
        const roleNames = {
            'yonetici': 'Y√∂netici',
            'bolge_muduru': 'B√∂lge M√ºd√ºr√º',
            'magaza_muduru': 'Maƒüaza M√ºd√ºr√º'
        };
        userRoleEl.textContent = roleNames[currentUser.role] || currentUser.role;
    }
    if (userAvatarEl && currentUser.name) {
        userAvatarEl.textContent = currentUser.name.charAt(0).toUpperCase();
    }
    
    // Y√∂netici her ≈üeye eri≈üebilir
    if (currentUser.role === 'yonetici') return;
    
    // Diƒüer roller i√ßin yetki kontrol√º
    db.collection('permissions').doc(currentUser.role).get().then(doc => {
        if (!doc.exists) return;
        const perms = doc.data();
        
        // Men√º √∂ƒüelerini gizle/g√∂ster
        document.querySelectorAll('.nav-item[data-page]').forEach(item => {
            const page = item.dataset.page;
            if (perms[page] === false) {
                item.style.display = 'none';
            }
        });
        
        // Admin tab'larƒ±nƒ± kontrol et
        if (perms.admin === false) {
            document.querySelector('.nav-item[data-page="admin"]').style.display = 'none';
        }
    });
}

async function loadFirebaseData() {
    // Personel listesini y√ºkle
    loadPersonelList();
    
    // Puantaj ≈üube se√ßeneklerini doldur - kullanƒ±cƒ± yetkisine g√∂re filtrele
    populateSubeSelect('puantajSube');
    
    // Mevcut ayƒ± se√ß
    const now = new Date();
    const aySelect = document.getElementById('puantajAy');
    if (aySelect) aySelect.value = String(now.getMonth() + 1).padStart(2, '0');
}

// ==================== NAVIGATION ====================
const PAGE_NAMES = {
    'dashboard': 'Ana Sayfa',
    'personel': 'Personel Listesi',
    'puantaj': 'Puantaj',
    'shift': 'Shift Planƒ±',
    'sozlesme': 'ƒ∞≈ü S√∂zle≈ümesi',
    'tutanak': 'Tutanak',
    'savunma': 'Savunma ƒ∞steme',
    'fesih': 'Fesih',
    'borc': 'Bor√ß ƒ∞krar',
    'avans': 'Avans Talebi',
    'zimmet': 'Zimmet Formu',
    'katalog': 'ƒ∞hlal Kataloƒüu',
    'admin': 'Y√∂netim'
};

function goTo(page) {
    // Yetki kontrol√º
    if (currentUser && currentUser.role !== 'yonetici') {
        // Permission check from Firebase would go here
    }
    
    previousPage = currentPage;
    currentPage = page;
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('page-' + page).classList.add('active');
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    const navItem = document.querySelector(`.nav-item[data-page="${page}"]`);
    if (navItem) navItem.classList.add('active');
    
    // Breadcrumb g√ºncelle (tam sayfa adƒ±)
    const pageName = document.getElementById('currentPageName');
    if (pageName) pageName.textContent = PAGE_NAMES[page] || page;
    
    if (page === 'katalog') renderViolations();
    if (page === 'admin') renderAdminLists();
    if (page === 'personel') loadPersonelList();
    if (page === 'puantaj') { populateSubeSelect('puantajSube'); loadPuantaj(); }
    if (page === 'shift') { 
        populateSubeSelect('shiftSube'); 
        loadShiftList();
        // Y√∂netici i√ßin Excel y√ºkleme butonunu g√∂ster
        const adminExcel = document.getElementById('adminExcelUpload');
        if (adminExcel) {
            adminExcel.style.display = currentUser?.role === 'yonetici' ? 'block' : 'none';
        }
    }
}

function goBack() { goTo(previousPage); }

// ==================== MODAL SYSTEM ====================
function showModal(title, body, footer) {
    document.getElementById('modalTitle').textContent = title;
    document.getElementById('modalBody').innerHTML = body;
    document.getElementById('modalFooter').innerHTML = footer || '';
    document.getElementById('modalOverlay').classList.add('show');
}

function closeModal() {
    document.getElementById('modalOverlay').classList.remove('show');
}

function confirmModal(title, message, onConfirm, type = 'warning') {
    const icons = {warning: '‚ö†Ô∏è', danger: 'üóëÔ∏è', success: '‚úÖ', info: '‚ÑπÔ∏è'};
    showModal(title, `
        <div class="modal-icon ${type}">${icons[type]}</div>
        <div class="modal-message">${message}</div>
    `, `
        <button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn ${type === 'danger' ? 'btn-danger' : 'btn-primary'}" onclick="closeModal(); (${onConfirm})()">Onayla</button>
    `);
}

function successModal(message) {
    showModal('Ba≈üarƒ±lƒ±', `
        <div class="modal-icon success">‚úÖ</div>
        <div class="modal-message">${message}</div>
    `, `<button class="btn btn-primary" onclick="closeModal()">Tamam</button>`);
}

// ==================== TOAST ====================
function toast(message, type = '') {
    const container = document.getElementById('toastContainer');
    const t = document.createElement('div');
    t.className = 'toast ' + type;
    const icons = {success: '‚úÖ', error: '‚ùå', '': 'üí°'};
    t.innerHTML = `<span class="toast-icon">${icons[type] || 'üí°'}</span>${message}`;
    container.appendChild(t);
    setTimeout(() => t.classList.add('show'), 10);
    setTimeout(() => {
        t.classList.remove('show');
        setTimeout(() => t.remove(), 300);
    }, 3000);
}

// ==================== TYPE SELECTION ====================
function selectType(form, type, el) {
    selectedTypes[form] = type;
    el.parentElement.querySelectorAll('.type-card').forEach(c => c.classList.remove('selected'));
    el.classList.add('selected');
    
    if (form === 'tutanak') {
        document.getElementById('tut_kasa_field').style.display = type === 'kasa' ? 'block' : 'none';
    }
}

function selectFesihType(type, el) {
    selectedTypes.fesih = type;
    el.parentElement.querySelectorAll('.type-card').forEach(c => c.classList.remove('selected'));
    el.classList.add('selected');
    
    document.getElementById('fes_ogrenme_field').style.display = type === 'hakli' ? 'block' : 'none';
    document.getElementById('fesih_6gun_alert').style.display = 'none';
    
    // Dayanak g√ºncelle
    const sel = document.getElementById('fes_dayanak');
    const opts = STATE.fesihDayanaklari[type] || [];
    sel.innerHTML = '<option value="">Se√ßiniz</option>' + opts.map(d => `<option value="${d.v}">${d.t}</option>`).join('');
}

function check6Gun() {
    if (selectedTypes.fesih !== 'hakli') return;
    const og = document.getElementById('fes_ogrenme').value;
    if (!og) return;
    const ogDate = new Date(og);
    const now = new Date();
    let gun = 0, tmp = new Date(ogDate);
    while (tmp <= now) {
        const d = tmp.getDay();
        if (d !== 0 && d !== 6) gun++;
        tmp.setDate(tmp.getDate() + 1);
    }
    document.getElementById('fesih_6gun_alert').style.display = gun > 6 ? 'flex' : 'none';
}

// ==================== FORM HELPERS ====================
function clearForm(prefix) {
    document.querySelectorAll(`[id^="${prefix}_"]`).forEach(el => {
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') el.value = '';
        if (el.tagName === 'SELECT') el.selectedIndex = 0;
    });
}

function getVal(id) {
    const el = document.getElementById(id);
    return el ? el.value.trim() : '';
}

function formatDate(d) {
    if (!d) return '___/___/______';
    return new Date(d).toLocaleDateString('tr-TR');
}

function today() {
    return new Date().toLocaleDateString('tr-TR');
}

function nowTime() {
    return new Date().toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'});
}

function nowDateTime() {
    const now = new Date();
    return now.toLocaleDateString('tr-TR') + ' ' + now.toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'});
}

// Benzersiz Belge Numaralandƒ±rma: YIL-≈ûUBEKODU-GGAASS
function docNo(prefix, sube) {
    const now = new Date();
    const yil = now.getFullYear().toString().slice(-2);
    const gun = now.getDate().toString().padStart(2, '0');
    const ay = (now.getMonth() + 1).toString().padStart(2, '0');
    const saat = now.getHours().toString().padStart(2, '0');
    const dakika = now.getMinutes().toString().padStart(2, '0');
    
    // ≈ûube kodunu bul
    let subeKod = 'MRK';
    if (sube && STATE.branchCodes) {
        subeKod = STATE.branchCodes[sube] || 'MRK';
    } else if (sube) {
        // Fallback: ƒ∞lk 3 harf
        subeKod = sube.replace(/[^A-Za-z√áƒûƒ∞√ñ≈û√ú√ßƒüƒ±√∂≈ü√º]/g, '').substring(0, 3).toUpperCase();
        if (subeKod === '≈ûƒ∞≈û' || subeKod === 'SIS') subeKod = 'SIS';
        if (subeKod === 'TUZ') subeKod = 'TZL';
    }
    
    return `${yil}-${subeKod}-${gun}${ay}${saat}${dakika}`;
}

// ==================== DOCUMENT GENERATION ====================
function showPreview(title, html) {
    document.getElementById('previewTitle').textContent = title;
    document.getElementById('previewContent').innerHTML = html;
    goTo('preview');
}

function printDoc() { window.print(); }

function downloadPDF() {
    const content = document.getElementById('previewContent');
    const title = document.getElementById('previewTitle').textContent;
    
    // PDF i√ßin wrapper olu≈ütur
    const wrapper = document.createElement('div');
    wrapper.style.fontFamily = "'Times New Roman', Times, serif";
    wrapper.style.fontSize = '11pt';
    wrapper.style.lineHeight = '1.6';
    wrapper.style.color = '#000';
    wrapper.style.backgroundColor = '#fff';
    
    // ƒ∞√ßeriƒüi kopyala
    const clone = content.cloneNode(true);
    clone.style.padding = '0';
    
    // T√ºm doc-article elementlerine page-break-inside: avoid ekle
    clone.querySelectorAll('.doc-article').forEach(el => {
        el.style.pageBreakInside = 'avoid';
        el.style.breakInside = 'avoid';
        el.style.marginBottom = '15px';
    });
    
    // T√ºm doc-article-title elementlerine page-break-after: avoid ekle
    clone.querySelectorAll('.doc-article-title').forEach(el => {
        el.style.pageBreakAfter = 'avoid';
        el.style.breakAfter = 'avoid';
    });
    
    wrapper.appendChild(clone);
    
    html2pdf().set({
        margin: [15, 15, 20, 15], // √ºst, saƒü, alt, sol
        filename: title.replace(/[^a-zA-Z0-9ƒü√º≈üƒ±√∂√ßƒû√ú≈ûƒ∞√ñ√á\s-]/g, '') + '.pdf',
        image: {type: 'jpeg', quality: 0.98},
        html2canvas: {scale: 2, useCORS: true, letterRendering: true, backgroundColor: null},
        jsPDF: {unit: 'mm', format: 'a4', orientation: 'portrait'},
        pagebreak: {mode: ['avoid-all', 'css', 'legacy'], avoid: ['.doc-article', '.doc-article-title', '.no-break']}
    }).from(wrapper).toPdf().get('pdf').then(function(pdf) {
        const totalPages = pdf.internal.getNumberOfPages();
        const pageWidth = pdf.internal.pageSize.getWidth();
        const pageHeight = pdf.internal.pageSize.getHeight();
        
        for (let i = 1; i <= totalPages; i++) {
            pdf.setPage(i);
            
            // Alt √ßizgi
            pdf.setDrawColor(200);
            pdf.line(15, pageHeight - 15, pageWidth - 15, pageHeight - 15);
            
            // Sayfa numarasƒ± (orta alt)
            pdf.setFontSize(8);
            pdf.setTextColor(100);
            pdf.text('Sayfa ' + i + ' / ' + totalPages, pageWidth / 2, pageHeight - 8, {align: 'center'});
        }
    }).save();
}

// Logo Base64 (Yeni Moonberry Coffee Logo)
const LOGO_BASE64 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAACwCAQAAADgIOm5AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfpDB0CKim0QQKDAAAeIUlEQVR42u2deXwUVbbHv9XZ9xBCAlnAJEDYRSOjLCMqqCMoIDx1VNxQGZc3H2FwHYUZGRa38SkjIugAIijM4AIyuLKJIvuOJOxhCwlJyL531/sjlU5Xd1V1d3V3quPkdz8fPqTrVtW599S999xzzj1HwB8hEEEiXUgng84kE08sEYQRAoBIJTWUUkwepznBMU5ynlLMRpPtnab7EwSiSedyrqQPXWhPBIFO77FQwyXOcpjd7OEIRa2bMf7CEBMJZHEDg+hOO91UVXCKHWzkZ3KpM7pJ+uAPDIniKkYxnG7SlOQpzOSxjbVs4HTrHi0tD4EUJrKOckSvFzMnmM+NRBndyNYCE12ZyiEafMCM5lLBOh4i0S9mAj+GQDp/4RgWnzKjqdSzi6foZHSj/RcdmEx2CzGjeQLbzaPEGd10/0MIo9js42lKfaSs51YvCQ6/EmQwjzJDmNFUylhAptHd4B8IYhz7DWVGU8nmfsKM7g6j0YFXDR4btqWKBXQxukuMRF/WYjacDfKylev8URj2PUkCN/N3eum8u4oi8rlAPoWUUQaASAixxJJARzrSgRgCdD37PNP4yN9ULL5mSCD3MZtEN+8SKeEYe9nNYc5QTBX1iA6Umwglmo5kcDlX0Jtkgtx8TyVv8jrlPu4DP0IwUyh1ayKxkMcX/JGriMXkxptCSON25rCfGrfeV8984o3uppZCOC9T6UbnVLKJyfTxYKdgIpHRLOKsW5/Acjoa3VUtgTBmUOtytxTzMSOI9sqbA+nFVA65IUascHtSbXUIZprL7LjEYgZ7eQctkMJkDrmsoFn+62ZJAJOocKkjaljF9T5SZwhcxnTOuciSD4k1utt8h/FccqkTDvIAkT6lxEQWK1xa6M28+Wvdvw93aVGtZAEZLUJPBI9y3KXR+rTOHY1foyd7XWj8CR4gtMVoEujPGhcW+WLGGd193kZ7VrnAjvVkGUDZqy4I4Ue4wugu9CYCmen0O6xnEUmGUBfMRPKdsuSrX9NGcZzTfXk1s72029ADE6M56YRCCzN+LStJN6f2jkqeb8GVQxnDOep0JRlpdFd6A6F84JQdzxFsd5fJbYWg5xjqlCVbSTa6Oz3HXU6WzGpecGBHKHfS1wBab+SUE5bMcku16YdIZZdmAxt41WGySmAuq4gxhN6xXNSkt4Brje5STyAw3ckXt8Sh43uwlhruNYziJ6jSpHhVa/Z5zHKyN99Eqt0dV7Edkc0GekqF8Kam6rGG+4ztVP0I4n1NduQy0O6OQRxCpIGJhtKdwDeadG9rrXaSaynSXMwftat/hSQe7zNog9iM35CrQbmZSQbTpwvBLHGyeoTL6ndli3TlJaNJB/6XOg3aDzhMta0A12jKKzl2/ibt+Vy6cpY+RpMORGvq3iw8ZTSB7sLEOxoNqucJWe0gXrEupEtcOK7WEhiiqd/aQYLRBLqHTM0t1re0k9W+0+q9WOs3im4Tb2h+UuONJtA9/EmjMRXcJqvbjQM2s7M3zmt4R/GSyTGNVqyxWwP9GjH8oNGUf8tMosG8Z3Ntrldc9Dpxu1ee85JGKy4x2KDe1YEbNE4HlnOzrO4IG9V8nZcmrNF85xXXhK6aY+TVlu9YvXhVc6hH2NSMkW3CTpLmhbeH8jG13O7zluxtLS5C7dmh2og6fi+rO17mpbXaC44/QTxJJSI76O2FtlxFgWpbqluLfWSoxoS1WyYuxrJBdnWaR+8ViGIg71oltoM8RoaHLA7mXxpjZI7RXe0aXtRownRZzbEyz6g6RrvwdIFglQU7mLvZJrPdV/I5gz1c3u+hXrU1e+hgdGc7RyhrNCSTQTY1Q/i37Gq+S3v0MMaofPUCwaTxF6sGbSt30dHjbWZnjmgIKNcZ3d3OkabhLrBJZku40m5+3u/S95bBd3TVuG7iAUoR+cErAgKYWKgx4l9oqW7Vb6jM1NjabZQdgrnFjgHnpZNQ2hjOdQzXuG5hGUupZCYnvdITFtZhUb06yP+PUz+r+jVVcaNNvSg22l1f6MLTL2M3ItudOBsMZoUX7Xo9NByzT/j7IVGThtI9R9aNAxysJbOdPr0Dy6S68zU3frGytcpTRLBeQ/S9qaU6Vh8iNeb3gxTY/HW1g5m2UPPJQQziQ+6W/nqYRRpnR0rZ6sW+qGSP6rVQ+nnxTRrQK5vEaVj79lFv/X+Ag/kWqlXvbM9NjGEY7W3uH8P1bGYFayl2qC8i4k3sRVQVnkdwTvF3kWqqESnjLAU2LdcJvQxJsFOsN8PMLzZ/tVPYR9eqPrWBOiwOQcdKyKWwRUKRHaFc1dH1elXR14wZqCWfHazke2NO9Y5W3UZd4iqbev0pdKjxgOaTg7iST6xPr+NDerSY01qqS+dItEo1nxvjP/8HVZKOy+zQYxQY97jTp0cxFxERM//n4xNW9u/d4iFDRESO2Om53YLeb0/dsFko22WkKUyKzo1K5cxiJ7CRWVR4p69dQjV5XnhKN/7BlXpv1ssQ9b12oWzRTlGo0R7nOMdH1DCPi17oINfRIJMP9aMbL+i1M+pjiKCxOyimwebpSpYE16wL37GOn7zSPe6gyEvPuZmr9d2ojyEmjfOqFTYKiEBFxiU7eMEr4RRzvdY9rsNbE2QUw/TdqI8hARoD0rZJgYqKjVSX1B01fKch1Yeqit2ewRUtm2voo88BQy9D1M9BVTq9u5NLHiciDRrbvl6M1UW5M3gvWFO8PnWkEcdS4rwQ9XAME33iwua9cFUB+p7lfYY4P0MYyAAP3zGEhxjAYz7wffRefxRpaCS8TkCDxuJnq3oQbSQuWwz0QGkeyE3MIwWBZ3jW6/FJvHeeK1vf9KePIRYN7ofbDNV6ShXr9NE5aQUyhPdZIZmAI3mZNUz0qr3bW16K1azXd6M+hpg1pJE4m4mkQUFD21jnBl3vFSnmmM1msYZ8Cr0aNdFbJ7o2t/Qe6nVVTc5Psunob6pWd/2TQ0/J6e4sd3nZsBrAci/oskTydH5wHuAZDdWaraXkUZValfzOg7f34BefHIgLdzA36ykXuE+/tKZXqshT3SPEyeb0U9SoNP0eDzzXs1nEdj7Vfb8aYjx2Gq1nE/eyTL/hTK/geJ4aFfVJNJ3ZZ/0rlyIVR4VbuIqfdTd8Lfk+UKwkau5tLBrXGqimgD2s4hvP6NLLkDzKVBgSRE++tKl3SoUh8TzCTt0mzyNecv6RI10jMM4G3tW4s4IiznvDhKsX8exTnUOXyqLpzFGtV8T1RpGvgr9qrAzPtQwJeteQUk6oXusrEx63qFrD45jkV9ESgjWMrzUaHilehV6G1HNI9dpldLf5a6eKtwbA77irZZrpEjppHGzI40jLEKFfd7NP9cuP5hqbv3I1fKeCmeJH6VX6Kto3G/GLV4y7LkA/Qw5pmFevs1Ex1vMfDReeHvqNnV7HdRrbzG36VIUtiUg2aexUbaNgpfKLpuOMsRFPmhCvEWCqUtPt26vQP0IqNKaijrIGnGG1xnNCedGrHrp6kUUP1WsnOWg0ea5gpEbE6A0yif4KzmsqGzYb7lsu8K4GfR+0jvhySRpTUYXMWzxAcnxTL8sMjryeoeGzWM+dhtLmMkzM1+jixTJd1ZVOxoiZNw1d3Cdr0HaEzkZ3tasYozFp5fMbm5omXnEyRmqZatgppUSNA94i77eOCauxIVpx3ufJVChpTqP6VvFng1jysEbu0Wq7iC1+jpkaHZwv2yDCeCdhJ0WqmCGL/9Ay6Mg2DZq2ueT66jcYoBm+bKnMByWMfzphiEgd77b4mfBJmvHqW+z8rXcQohkBocIuEkk6O52yxMJqjR2B95FJjgY1p3VnYDQMozQnoi12R99uJM8pS0T2c1sLxZsLciKQz209C3oTYvhes0mzZUu7wESXslMVM7tFgrTerpmht1DhhGQrwO81czzZ5xpwNX+bhZ+4zcdSV5qTAOlLXPLT9zs4GyO77Y5Qh/Omiynuy1nCb3yWPyFcM5iGSCFDjO5avRjrJDPCJ3ZeWFG8pRkv17YUsIAhHuZPExTcckxMcjJS3/OTuKk6EMFKzaY1MNNu8EfwstNdSXO5xGoe5DIdHRRAAjcwQUGUHuUkP8JpLje6Wz3BYCfZnSp50k5eCeFJJ11iz9QTLGMiWcQ5TUlkIpI0hjGZpRzmKPc4yErXaARjaixTjcm27q2XmpjJ85o1inmKj2W+TSZG8IqbAfpESjhFDkc4yXmKqaCWWkAgjBCiiCORzqSRQWc6EAbs5RnWIXdc68dCJ3nitjKO817qG4OQwnYn39xFhS+1ByvcSGEsl8JqKOECuRzlKMc4RwFl1MpSUFTwHpc5UJrJj06eXcYYo7vTGxjtNEdbAeMdWBLFE5zQxRLtYmYrYxXE5n785PTeOQZkxvIBgjR84ptKIY87yPYCvXmfEq+y4xjPKW4sr3FBebO19dg/nKEj65w2t4LpCg6bwQzjc40op+6UXGbTXVHQHeU0P5tIviz8WqvH1U4TN4rUs1QxTmI4N/KRC7k4taapbP6mEqwmnEkuSHW1TGl92ittjNfUDjWVHdykKLwG05+X+FnHWLnEdzxGZ5XuTGOhS0m8Fxhgj/ExApmmEQG3uVzkryqWD4FYrmUqX3PahU6s5iT/4QWuUY0bFMzt7HaJqV97JWeDR/DF5ieSN5jowpMt/MgrrFM9IxhKEpn0pDtdSCCWMIIJAuqpo4oS8sklh8McIU/Vr1CgO5O41yWn7p3cz2Ef9IcfIN4udLJ6KeV9+jvZeQuE0I4UutOPAQygL91IJpYQp0xPZLILy3hjOaw3XEzrQBKrXZ79z/IGfbyeoTmBR9jholZZJKd1Z/Z0BZfxtRtL8lnmMthDnW4TAsjgT+x0aSX7r2EHQCpfuCknreFhMjxQegvEcwvzOKGZw9O+HPzvYAdAEss0PTocSwOnWMYE+hDllsARQhdu4+/sckOp31h+1h+OzxfwtYo5jmk85rYh1kIhR9jDHo5wjktUKYRqEjARSgyJpNOPK+ntYmA0W4h8yRSO+bgP3ILvdf5hPM6LOkNWiFRSRD4XyKeYEqtwG0AssSSQSEc6EK1TIKhmATNbOKqjXyCA0ZpHdowpZ/mDC6GkfrXozWduSD2+LmY2MMgYi6D/IIZnXHKS830pYmZrS6jqG5gYyH9c9jbxTWlgA8NbrzeJ9xHLE2Qbxo4TTCHe6C7wNwh05Q0DJq+LvEPP//Z1Qw0BZPGeR6Yo98olljLo12En9x0CGcAcTrul5NBTCljMUP9P6eUfCKAHL7DDJVuengU8m9fIahsZ7kEgntF8wDEv7lMs5LOKCaS2Pvu4vyxyAaRwNcO5hjSPUrg0cIE9rGcDOSrBBf0c/sKQRpiIpwdZDKAXycS6sV+ooZDj7GYrezjt/4Fi1OFfDGlCALEkk05X0kklkTgiCSXIZjWop54ayijiAqc4ylFOcIEqvJu1zQD4J0Ns6QsijEiiiCKUKGlNsFBONeWUU0EV5tbPhja0oQ1taEMb2tCGNvgWAm8DJs7wntMMZWncQTAmcljZIqmC9bTmToYoxGi3UEkNxRxkPyVGE+kMjdqfep51oveJsiadX+236joTH2vquCr4wes5R7yOZgPOLRq1BJ62Gl/9mSHLnCoeK5npN5GCFdCsLYpnFsc4qlJvOM/4LRsccZzv7SbVMOLpRjrBhPM0+cwxmkR12H49n6ika0iTHXn2/xGy2EElJBBEJx4hFxGRHNKNJlUdjfaDSmkleUFhJYmQgrSYJb/Z1siQJvyeSkQsPGI0qWponLLqmMOdpBPIFA6wRlZDYAL3ArCJs9yn+iSBdnQjjQ4EUMZJssnXzEkTQhe6k0Q4dZwnh5MK9osAUggDCikEouhLH9pRzUkOckYlR6I2vmIfAxHI4gPF3kghk85EUE8+xzlGuQJNnQkBCigGBOLoTVeq+YxaIIwUAjBzhhrARDJ9SOMo35NGBwTKyFGUUAUyiEeksnGE1HEL90oHLffZ5SsYyjlERE4ygOmqI6QTT7OdEquveyWHmGkXlsmWGSNYyTmrmFBPHp9yq4NrZxRfcZGL/Am4ka+tgQnqOMG79HMYB85HiMBiRES+cGiDiSzmc8JqTm6giI084pAEOY4NFFDARCCSR9hGBSI7pUDQ/TlKAdn0BpKZTg61iCxE4C0qKeeQSp/EsYFKytnYxJARCMySuvNfNsGUUqUwFOXcB8xQYchv2aLorHCYOxQcoeN5W/GUbTlz7Q77x0hr1wyepNCh/gnutJtgnTPExFJERFbY0RXC45xVoKmeNXbRWOI5gIjIU8TyvjUsSBNDBlCKSDH96GmT8W0hMIZqRESeVKTrNqoRqWdKs5Ql8jrdGQeMZT+zMQOh/JnBgIV3WI4abuAD6dx5Ifs4hYUULicJ6MF8olkos1fE8Rb3IAC1HOUIZUTQnUxCieQJknmMCw5vuJt4oqklm2xqSKA/nYA05lDCt7iDBClvw1HZxBHEZKYSDojk8Qt5BJJBbyIIZCSJPKiQviac6dJKVEEhR2QTqIVUpjCUxmA5xeQCP7CHgcBYljhMhIGMIxTI4bPmEQLQXQp5V8QoAB6VuPqFdJxAaYR0ZQ8iItX8kyzCEBAIoRevcQkRkQuyJIsBzJTG0g7uIoFABAKI5w5r7Ny3bJ4eYyPdHWA8HTAhEEIfPpC+zU2yqLpNI2SRyggJ5WUaECm1y341XhqxebxML8IQMBHLLXwjzRlrbd7SNEJ2U4FIEe8wlBSipTc2jpBytmBG5Dh/JouO0tn3KYiIlHGdA129OCPNBMgZAsOkGO0HyORqTiMisp+e0lVHhgRISb9qeNFuBQjgXmma+dpGmL5W+m0dGXZEpfMtIiIlNqkumhmyW5aRBCKYJ1F+hwJDlhJJOKEEE0wwIUQQTSdu5mPpA1soozWdQ4iIHGW4HSPbMw8zImYmOTBEROQ0t9tNfQNsAvD8RH/ZtUxOISLytsPn8iwiIvmNZ7nkDBF4TBJuv2KztINvDmLpyJB+EgMXKRzYNDENCyJV1icEskhqiFK0qv4SwR9Zn9/EkHJpxNqim5TP4H2b5jUxpIDNrOdb1rKWtXzND2zlsCTaN/C5XXCZ56Uvd5wCTXGsQURkj3V1a2ZIqUIGrWaGZDtEpDPxHiIiR+xCRsWxBRGRjxtPgMkZAiH8n80CLY/94ciQSRJvr0IJnaWDOu9If2dIXf6GypTSGLA/1yqJNDFko8LBf5MkL22xueaK6iSXobLnRPMDIiKfqxzf+R2ViNRaP4lmhsxXkDabGFKvuNMZRjkiZh6W/XorVYhUNcaYd9wG1jKLr6x/LeU9jd1EgJQBYRsHFK+f5nsAsqRJqzdJQAVrUHZL+IZKoJOUnrsZBxX2AxZ+kTrI0Y9LpI5aWamztqIzC3nURsGYLOWU245AlEOJ5BjngGCHT+4SizXSSO5jlcKv2/gZMDHWRpsWyP8QBuzix8Y/HXGR5+hCb+BH/kol6giXMuMcUPWE2o6IQDLxlAFpBAHnVVPQHeMCGQQ5yOqFirUbU5wGKbRhI6/Zbb9MxJDEFVxPKum8TRxvSDU6SR/Lw9ymOG4DpUyl6Zhkn+Y+lY+wERsUzy5W8G+GYWIQ/dki/dadYYDIv7ikxhA4yPMsppJnOYMWAiVO56vWaMyZGy7JGRFS7VKV2kWcJgMcznAoj1HR5l85cvlG8fcAejGbkYTxLLuk0Rsq9UGGg5ghRyQBMjoOUKFaV2SvypVvOEIPYhltZchIUoDjTfoRNRvIWqbxosvJg9U9DAW3PL/MXkpWr/ZOMwd4ioNAHA9IVFvQ59V1VuNarWrWw9NSnuCR0riLk9IVrOZUYwW1rrSwwAVCG6gC0IjSnkwIUC3VKwEggWiViTBaCo9UiO9wnJX0AbKI5wJQQi3BiPyTHRrHq02csJsEtT4drQ/rUybQnkyuYxkwiP5AMSubelv923ZFdVdFLoOAfoRRrXBd4GoE4JzUxSepJYRkeqh8Qd3oAtT7OM1pNhZMxEjCwAWKiEIghwVuPUVr5Fs0em8fP3A7gYxjJQ2MIwzY2Jxp1zN3fTPbAchykIsa0YVhAOyQVo3DnAciGaXSnFHEAOc18ux6AxGYaBT3AS5IOQpvsQuH3oRoutCFFDejRKjPLjWsoB74Lb3oynCgjuXNmm5Pz0+sJw+I53EFKd7EA2QCVayVfjnDRgDulCUMa0IW9wCwiVwPqdJCsKTKKZQ+khpWYwGGMF7hM4ngFTazmWVu5f0RNaf7DewH4rmNW0kB9rLBttM8wy98BsDdPGn3DZm4iz8CsL5RwgbMLKYYSOJVutk9KZ1XSQVK+FCXpUPeIWoI4SFpi7eVYum3L9kJBDOVO+1WkTAmMYFUUtnlVnJibVGmQOqz+3kUgJW2a6anJ7YbeJshXE4o00lnPkepQSCUy7ibx2kP5PG6zbZuCwt4DoGhfMzf2UAxDQTSjqE8LY2ahWz2kCZoTz8siJKYKmAiAAinOyO5hQjgPIusQuwFZrGIdiQyjytZxnGqEQmlJ09yDyHAPuZqGtuUWKKFVTxBsiRm58oT03p+hP4ok3mfDMJ5grEc4jyBJNGdjghAEc/LOriB10niPgSuYjHHOUYJMWTQVZryPuMVjf2vq7iZwYgyhggIBBEuzQil/EVa/RqxhqnMIpp2PMODZHMWM8n0keI95DKF4x7TZIscvuUh6f9r7R1L7HVZWlAzUA1kk2IwvcP8j4IoGcfrinGsy3mHRFnNJl3WNEVqJkhmqlTrL67osszs4w6HDzGQ8Sr5EnbZqeqbdFmTFWlqUr87S5X0O0nVWWKnWSOQfKDexUNgFRQiKPj+/cwd3MHv6UO0JMFUcpzVLFGMRVXMi3zFBK4lUVp36ilgCx/yvR0dFoooBJVdSwUXCKBAtuKUU6Vgsxapp4EGijjCetYo6B8aWMYOHmAkGYRLE04Vx/icRXYihoUiLqrS1EABNVQ4HeX7OEt34Ed2yC8IZAIi5zUUAc2IJx4o57zCsikQTTe6koBAMSfJoUhz3g0mlUxSCaeas+SQq7CZkjs52COKJKCWs1aWCCSThOMMbqGWOuopoUyzq0zEk8llxCFQygkOU+jQhgBSJSeHSwpPCCUVExbOKu7LmjGQNcTRwAQ+cqHf2+BjmCSz3t4WyUTXBqfoKTnsTTWakDY0YioiIudU9BttaGEkSXmzFyptOn4NobzacQVBbKIGSKQ/1fzkp+dXGjGCXkAFyz3WSLQATHTnMeawgJcZ5VKwsT58Rz37SAQGs5UGvvJShGzfIIYNiIh871KCAIMRyv+Si4Vy8rhEDVsZ4UTbFsRH1PIe1xFEBN9QzjSy/DrkTH9+YDe7JX9pv4aJKVSzmz9wJWn05UmOkW+XSdceCWSzUTINdyOfVX6fvTaYdsQSq3aCwJ/WkIE8z3Ye5KT09wF2sYzp7JEyCkaQRT8COcx2aVOWziA6UMowLFhIJxIzg7nIYcxAJH3pisAp2clCgRSuIJVS9pBjwCxe5yUztc9hYj5V3Gz36628JTk7Z/JvKqiiimrWcQ0Ab1KDiJlaaqihDpFaylhNGNCXLyijnHIqrfUhiIfIoZpyqslnhuQi3QYFdOAQ2xWsdo22hSQ2colZXMsQXuIih+gF9OJB8tnNeO7mLp6lilXcxAAEUthCKbP5LYN5kQsckmT+ByhnN/fzG0aykjpe89vDR4Yjk0KWqNoRnqOOP1qv3k8NbwLQieN8KXVqP0r5h1TjBcw8ba1/FzXMBTqxn2PW7VgMn3LJOnb8BP4jj5gQVONdRTCCo/zLevULdnG9w1GaZoRzI4XspSs96EEmp8jletrTl55so56e9KQnCfxErL3622j4z6JeSgmJBClqY6NIJttqcoUysrmJSEV9K0AY7enAcomBAgIxFBBNEoGMsVmngsDf1Hv+w5AiDjOADLJlv6bQnYM00EAoAVZmmQijQUO5b8ZMCUuolCYtEQvlFFOJyE42WecFC1g9CNvggImYmSOLsxDNCs7TnwC+IM/maFkq2awjHLU1JIBPuGTjHh1KDzoD/Slmuc1OJYHeKgfB2wB04HtqmEUqAUAA6bxLLa8RCNxLLR9KNu52zKFeOquntqiPoYpPJeNuJNMo5E9AKJ9QwSMS0/uxmf12R1zbIEMf1lHPUZYzjxWcoJK3pZ1CBHOpZQdv8Co/UccyaUlXY0gIM6jiIG8zg2+p5RuSpDfsoIIvmcEcjlPGY34fddJgJPEiv2BGpIHtjLc5RxHLS9IRuzPMsjpDdGAd86WVMJPdNiafCJ7gMBZECviHzZmlXiyVjs3s4V7/U7T8P68zDur5qie+AAAAHnRFWHRpY2M6Y29weXJpZ2h0AEdvb2dsZSBJbmMuIDIwMTasCzM4AAAAFHRFWHRpY2M6ZGVzY3JpcHRpb24Ac1JHQrqQcwcAAAAASUVORK5CYII=';

function docHeader(title) {
    return `<div class="doc-header" style="display:flex;align-items:center;justify-content:space-between;border-bottom:2px solid #000;padding-bottom:15px;margin-bottom:20px">
        <img src="${LOGO_BASE64}" alt="Moonberry Coffee" style="height:60px;width:auto">
        <div style="text-align:right;flex:1;margin-left:20px">
            <div class="doc-company" style="font-size:11pt;font-weight:700">${STATE.company.name}</div>
        </div>
    </div>
    <div class="doc-title" style="text-align:center;font-size:14pt;font-weight:700;margin:15px 0;text-decoration:underline">${title}</div>`;
}

function docSignature(left, right) {
    return `<div class="doc-signature-area">
        <div class="doc-signature-block"><div class="doc-signature-title">${left.title}</div><div class="doc-signature-line">${left.name}<br>${left.role || ''}</div></div>
        <div class="doc-signature-block"><div class="doc-signature-title">${right.title}</div><div class="doc-signature-line">${right.name}<br>${right.role || ''}</div></div>
    </div>`;
}

// ==================== S√ñZLE≈ûME ====================
function generateSozlesme() {
    const type = selectedTypes.sozlesme;
    const pos = STATE.positions.find(p => p.id === type);
    const posName = pos ? pos.name : (type || 'Pozisyon');
    
    const ad = getVal('soz_ad') || '______________________';
    const tc = getVal('soz_tc') || '___________';
    const adres = getVal('soz_adres') || '______________________';
    const iban = getVal('soz_iban') || '______________________';
    const telefon = getVal('soz_telefon') || '______________________';
    const baslama = formatDate(getVal('soz_baslama'));
    const ucret = getVal('soz_ucret') || '______';
    const sube = getVal('soz_sube') || STATE.branches[0] || '______';
    
    // Pozisyona g√∂re el yazƒ±sƒ± beyan metinleri
    const beyanlar = {
        barista: '"ƒ∞≈übu i≈ü s√∂zle≈ümesini, eklerini ve KVKK Aydƒ±nlatma Metnini elden teslim aldƒ±m, okudum, i√ßeriƒüini ve y√ºk√ºml√ºl√ºklerimi tam olarak anladƒ±m ve h√ºr irademle kabul ettim."',
        mudur_yardimcisi: '"ƒ∞≈übu i≈ü s√∂zle≈ümesini, eklerini ve KVKK Aydƒ±nlatma Metnini elden teslim aldƒ±m, okudum. ƒ∞≈üverenin i≈üleyi≈üini, g√∂rev tanƒ±mƒ±mƒ±, √ºcret ve fazla mesai uygulamalarƒ±nƒ±, gizlilik ve rekabet yasaƒüƒ± h√ºk√ºmlerini tam olarak anladƒ±m ve h√ºr irademle kabul ettim."',
        magaza_muduru: '"S√∂zle≈ümeyi okudum, bir suretini teslim aldƒ±m. ƒ∞≈üveren Vekili stat√ºs√ºn√º, fazla mesai d√ºzenlemesini ve rekabet yasaƒüƒ± h√ºk√ºmlerini anladƒ±m, h√ºr irademle kabul ediyorum."',
        bolge_muduru: '"ƒ∞≈übu s√∂zle≈ümeyi okudum, i√ßeriƒüini, ƒ∞≈üveren Vekili stat√ºm√ºn sonu√ßlarƒ±nƒ± ve rekabet yasaƒüƒ± y√ºk√ºml√ºl√ºklerimi anladƒ±m, bir suretini elden teslim aldƒ±m."'
    };
    const elYazisiMetni = beyanlar[type] || '"ƒ∞≈übu i≈ü s√∂zle≈ümesini okudum, anladƒ±m, bir suretini teslim aldƒ±m."';
    
    let template = STATE.templates[type] || '';
    template = template
        .replace(/\{\{AD_SOYAD\}\}/g, ad)
        .replace(/\{\{TC\}\}/g, tc)
        .replace(/\{\{ADRES\}\}/g, adres)
        .replace(/\{\{IBAN\}\}/g, iban)
        .replace(/\{\{TELEFON\}\}/g, telefon)
        .replace(/\{\{UCRET\}\}/g, ucret)
        .replace(/\{\{BASLAMA\}\}/g, baslama)
        .replace(/\{\{SUBE\}\}/g, sube);
    
    const html = `<div class="doc">
        ${docHeader('BELƒ∞RSƒ∞Z S√úRELƒ∞ ƒ∞≈û S√ñZLE≈ûMESƒ∞')}
        <p style="text-align:center;font-weight:bold;margin-top:-10px;margin-bottom:15px">(${posName})</p>
        <div class="doc-section" style="margin-bottom:15px;border-bottom:1px solid #ccc;padding-bottom:8px">
            <table style="width:100%;font-size:10pt">
                <tr><td><strong>S√∂zle≈üme Tarihi:</strong> ${baslama}</td><td style="text-align:right"><strong>S√∂zle≈üme No:</strong> ${docNo('SOZ', sube)}</td></tr>
            </table>
        </div>
        
        <div class="doc-article"><div class="doc-article-title">MADDE 1: TARAFLAR</div>
        <div class="doc-article-content" style="font-size:9pt">
            <p style="font-weight:bold;margin:8px 0 5px 0">1.1. ƒ∞≈ûVEREN:</p>
            <p style="margin:2px 0"><strong>√únvanƒ±:</strong> ${STATE.company.name}</p>
            <p style="margin:2px 0"><strong>Adres:</strong> ${STATE.company.address}</p>
            <p style="margin:2px 0"><strong>Tel:</strong> ${STATE.company.tel} | <strong>E-posta:</strong> ${STATE.company.email}</p>
            <p style="margin:2px 0"><strong>Vergi D./No:</strong> ${STATE.company.vergiDairesi} / ${STATE.company.vergiNo}</p>
            <p style="margin:2px 0"><strong>Mersis:</strong> ${STATE.company.mersis} | <strong>KEP:</strong> ${STATE.company.kep}</p>
            <p style="font-size:8pt;color:#666;margin:5px 0">(Bundan sonra "ƒ∞≈ûVEREN" olarak anƒ±lacaktƒ±r.)</p>
            
            <p style="font-weight:bold;margin:12px 0 5px 0">1.2. PERSONEL (ƒ∞≈û√áƒ∞):</p>
            <p style="margin:2px 0"><strong>Adƒ± Soyadƒ±:</strong> ${ad || '______________________'}</p>
            <p style="margin:2px 0"><strong>T.C. Kimlik No:</strong> ${tc || '______________________'}</p>
            <p style="margin:2px 0"><strong>Adres:</strong> ${adres || '______________________'}</p>
            <p style="margin:2px 0"><strong>Cep Tel:</strong> ${telefon || '______________________'}</p>
            <p style="margin:2px 0"><strong>IBAN:</strong> ${iban || '______________________'}</p>
            <p style="font-size:8pt;color:#666;margin:5px 0">(Bundan sonra "PERSONEL" olarak anƒ±lacaktƒ±r.)</p>
        </div></div>

        ${template}

        <div style="margin-top:30px;page-break-inside:avoid;">
            <table style="width:100%;border:none;">
                <tr>
                    <td style="width:50%;text-align:center;vertical-align:bottom;padding:15px;border:none;">
                        <p style="margin-bottom:50px">(Ka≈üe / ƒ∞mza)</p>
                        <div style="border-top:1px solid #000;width:70%;margin:0 auto;padding-top:8px">
                            <p style="font-weight:bold;margin:0">ƒ∞≈ûVEREN</p>
                        </div>
                    </td>
                    <td style="width:50%;text-align:center;vertical-align:bottom;padding:15px;border:none;">
                        <p style="margin-bottom:20px">(ƒ∞mza)</p>
                        <div style="border-top:1px solid #000;width:70%;margin:0 auto;padding-top:8px">
                            <p style="font-weight:bold;margin:0">PERSONEL</p>
                            <p style="font-size:9pt;margin:3px 0 0 0">(Adƒ± Soyadƒ±)</p>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        
        <div style="margin-top:25px;padding:15px;border:1px solid #000;page-break-inside:avoid;">
            <p style="font-size:9pt;margin-bottom:8px;font-style:italic">(A≈üaƒüƒ±daki alan Personel tarafƒ±ndan kendi el yazƒ±sƒ± ile doldurulacaktƒ±r)</p>
            <p style="font-weight:bold;margin-bottom:8px;font-size:10pt">EL YAZISI ƒ∞LE BEYAN:</p>
            <p style="background:#f5f5f5;padding:8px;margin:8px 0;font-style:italic;font-size:9pt;border-left:3px solid #e07b39">${elYazisiMetni}</p>
            <div style="margin-top:10px;border:1px solid #ccc;height:50px;background:#fafafa"></div>
            <table style="width:100%;margin-top:10px;border:none;font-size:10pt">
                <tr>
                    <td style="border:none"><strong>Tarih:</strong> ___/___/20___</td>
                    <td style="border:none;text-align:right"><strong>ƒ∞mza:</strong> ________________</td>
                </tr>
            </table>
        </div>
    </div>`;
    
    showPreview(posName + ' ƒ∞≈ü S√∂zle≈ümesi - ' + ad, html);
}

// ==================== TUTANAK ====================
function generateTutanak() {
    const type = selectedTypes.tutanak || 'olay';
    const titles = {olay: 'OLAY TESPƒ∞T TUTANAƒûI', devamsizlik: 'DEVAMSIZLIK TUTANAƒûI', kasa: 'KASA A√áIƒûI TUTANAƒûI', imza: 'ƒ∞MZADAN ƒ∞MTƒ∞NA TUTANAƒûI'};
    
    const personel = getVal('tut_personel') || '______________________';
    const pozisyon = document.getElementById('tut_pozisyon')?.selectedOptions[0]?.text || '______';
    const tarih = formatDate(getVal('tut_tarih'));
    const saat = getVal('tut_saat') || '__:__';
    const duzTarih = formatDate(getVal('tut_duz_tarih')) || today();
    const duzSaat = getVal('tut_duz_saat') || nowTime();
    const sube = getVal('tut_sube') || STATE.branches[0] || '______';
    const kasa = getVal('tut_kasa');
    const aciklama = getVal('tut_aciklama') || '______________________';
    const sahit1 = getVal('tut_sahit1') || '______________________';
    const sahit2 = getVal('tut_sahit2') || '______________________';
    const duzenleyen = getVal('tut_duzenleyen') || '______________________';
    const gorev = getVal('tut_gorev') || 'Yetkili';
    
    const html = `<div class="doc">
        ${docHeader(titles[type])}
        <div class="doc-section">
            <p><strong>Tutanak No:</strong> ${docNo('TUT', sube)} | <strong>D√ºzenleme:</strong> ${duzTarih} ${duzSaat} | <strong>≈ûube:</strong> ${sube}</p>
            <p><strong>Personel:</strong> ${personel} (${pozisyon})</p>
            <p><strong>Olay Tarihi:</strong> ${tarih} ${saat}${type === 'kasa' && kasa ? ' | <strong>A√ßƒ±k:</strong> ' + kasa + ' TL' : ''}</p>
        </div>
        <div class="doc-section">
            <div class="doc-section-title">OLAY A√áIKLAMASI</div>
            <p style="background:#f9f9f9;padding:15px;border-left:4px solid #e07b39">${aciklama}</p>
        </div>
        <p style="margin:20px 0">ƒ∞≈übu tutanak ≈üahitler huzurunda d√ºzenlenmi≈ütir.</p>
        <div class="doc-section">
            <div class="doc-section-title">≈ûAHƒ∞TLER</div>
            <p>1. ${sahit1} _________________ | 2. ${sahit2} _________________</p>
        </div>
        ${docSignature(
            {title: 'D√úZENLEYEN', name: duzenleyen, role: gorev},
            {title: 'PERSONEL', name: personel, role: '(ƒ∞mza / ƒ∞mtina)'}
        )}
        <p style="margin-top:20px;font-size:9pt;color:#666"><strong>NOT:</strong> ƒ∞mzadan imtina halinde ≈üahitler tarafƒ±ndan not edilir.</p>
    </div>`;
    
    showPreview(titles[type] + ' - ' + personel, html);
}

// ==================== SAVUNMA ====================
function generateSavunma() {
    const personel = getVal('sav_personel') || '______________________';
    const pozisyon = document.getElementById('sav_pozisyon')?.selectedOptions[0]?.text || '______';
    const tarih = formatDate(getVal('sav_tarih'));
    const sube = getVal('sav_sube') || STATE.branches[0] || '______';
    const duzTarih = formatDate(getVal('sav_duz_tarih')) || today();
    const duzSaat = getVal('sav_duz_saat') || nowTime();
    const isnat = getVal('sav_isnat') || '______________________';
    const sure = getVal('sav_sure') || '1';
    const yetkili = getVal('sav_yetkili') || 'ƒ∞nsan Kaynaklarƒ±';
    
    const html = `<div class="doc">
        ${docHeader('SAVUNMA ƒ∞STEME BELGESƒ∞')}
        <div class="doc-section">
            <p><strong>Tarih:</strong> ${duzTarih} ${duzSaat} | <strong>Belge No:</strong> ${docNo('SAV', sube)}</p>
            <p><strong>Sayƒ±n:</strong> ${personel} (${pozisyon}) - ${sube}</p>
        </div>
        <div class="doc-section">
            <p>4857 sayƒ±lƒ± ƒ∞≈ü Kanunu'nun 19. maddesi gereƒüince savunma hakkƒ±nƒ±z tanƒ±nmaktadƒ±r.</p>
            <p style="margin-top:15px"><strong>ƒ∞snat Edilen Eylem:</strong></p>
            <p style="background:#f9f9f9;padding:15px;border-left:4px solid #3498db">${isnat}</p>
            <p style="margin-top:15px"><strong>Olay Tarihi:</strong> ${tarih}</p>
            <p style="margin-top:15px"><strong>Savunma S√ºresi:</strong> Tebliƒüden itibaren <strong>${sure} i≈ü g√ºn√º</strong></p>
            <p style="margin-top:15px;background:#fef9e7;padding:12px;border-radius:6px">‚ö†Ô∏è S√ºre i√ßinde savunma verilmezse feragat edilmi≈ü sayƒ±lƒ±r.</p>
        </div>
        <div class="doc-section" style="margin-top:20px;font-size:10pt;color:#666">
            <strong>Yasal Dayanak:</strong> ƒ∞≈ü K. Md. 19: "Savunmasƒ± alƒ±nmadan i≈ü√ßinin s√∂zle≈ümesi feshedilemez."
        </div>
        ${docSignature(
            {title: 'TEBLƒ∞ƒû EDEN', name: yetkili, role: 'ƒ∞mza'},
            {title: 'PERSONEL', name: personel, role: 'Tebliƒü Tarihi: ___/___/___'}
        )}
    </div>`;
    
    showPreview('Savunma ƒ∞steme - ' + personel, html);
}

// ==================== FESƒ∞H ====================
function generateFesih() {
    const type = selectedTypes.fesih || 'hakli';
    const titles = {hakli: 'HAKLI NEDENLE FESƒ∞H Bƒ∞LDƒ∞Rƒ∞Mƒ∞', gecerli: 'GE√áERLƒ∞ NEDENLE FESƒ∞H Bƒ∞LDƒ∞Rƒ∞Mƒ∞', deneme: 'DENEME S√úRESƒ∞ FESHƒ∞'};
    const infos = {
        hakli: 'ƒ∞≈ü Kanunu 25/II uyarƒ±nca s√∂zle≈ümeniz derhal ve tazminatsƒ±z feshedilmi≈ütir.',
        gecerli: 'ƒ∞≈ü Kanunu 18. madde uyarƒ±nca ge√ßerli nedenle feshedilmi≈ütir. Tazminat haklarƒ± saklƒ±dƒ±r.',
        deneme: 'Deneme s√ºresi i√ßinde bildirimsiz ve tazminatsƒ±z feshedilmi≈ütir.'
    };
    
    const personel = getVal('fes_personel') || '______________________';
    const pozisyon = document.getElementById('fes_pozisyon')?.selectedOptions[0]?.text || '______';
    const sube = getVal('fes_sube') || STATE.branches[0] || '______';
    const giris = formatDate(getVal('fes_giris'));
    const fesTarih = formatDate(getVal('fes_tarih')) || today();
    const gerekce = getVal('fes_gerekce') || '______________________';
    const yetkili = getVal('fes_yetkili') || 'Yetkili';
    
    const html = `<div class="doc">
        ${docHeader(titles[type])}
        <div class="doc-section">
            <p><strong>Tarih:</strong> ${fesTarih} | <strong>Belge No:</strong> ${docNo('FES', sube)} | <strong>≈ûube:</strong> ${sube}</p>
            <p><strong>Sayƒ±n:</strong> ${personel} (${pozisyon})</p>
            <p><strong>ƒ∞≈üe Giri≈ü Tarihi:</strong> ${giris}</p>
        </div>
        <div class="doc-section">
            <div class="doc-section-title">FESƒ∞H GEREK√áESƒ∞</div>
            <p style="background:#fdedec;padding:15px;border-left:4px solid #e74c3c">${gerekce}</p>
        </div>
        <div class="doc-section">
            <p>${infos[type]}</p>
        </div>
        ${type === 'hakli' ? '<p style="background:#fef9e7;padding:12px;border-radius:6px;margin:20px 0">‚ö†Ô∏è ƒ∞≈ü Kanunu Md. 26 uyarƒ±nca 6 i≈ü g√ºn√º i√ßinde kullanƒ±lmƒ±≈ütƒ±r.</p>' : ''}
        ${docSignature(
            {title: 'ƒ∞≈ûVEREN', name: '(KA≈ûE)', role: 'ƒ∞mza'},
            {title: 'PERSONEL', name: personel, role: 'Tebliƒü: ___/___/___'}
        )}
    </div>`;
    
    showPreview(titles[type] + ' - ' + personel, html);
}

// ==================== BOR√á ƒ∞KRAR ====================
function generateBorc() {
    const turLabels = {kasa: 'Kasa A√ßƒ±ƒüƒ±', zimmet: 'Zimmet Hasarƒ±', stok: 'Stok Kaybƒ±'};
    const odemeLabels = {tek: 'maa≈ütan tek seferde mahsup edilmesini', taksit: 'maa≈ütan taksitlerle mahsup edilmesini'};
    
    const personel = getVal('borc_personel') || '______________________';
    const tc = getVal('borc_tc');
    const sube = getVal('borc_sube') || STATE.branches[0] || '______';
    const tur = getVal('borc_tur') || 'kasa';
    const tutar = getVal('borc_tutar') || '______';
    const tarih = formatDate(getVal('borc_tarih'));
    const duzTarih = formatDate(getVal('borc_duz_tarih')) || today();
    const odeme = getVal('borc_odeme') || 'tek';
    const aciklama = getVal('borc_aciklama') || '______________________';
    const sahit = getVal('borc_sahit');
    const yetkili = getVal('borc_yetkili') || 'Yetkili';
    
    const html = `<div class="doc">
        ${docHeader('BOR√á ƒ∞KRAR VE MAHSUP MUVAFAKATNAMESƒ∞')}
        <p style="text-align:center;color:#666;margin-top:-15px;margin-bottom:20px">TBK Md. 407/2 Uyarƒ±nca</p>
        <div class="doc-section">
            <p><strong>Tarih:</strong> ${duzTarih} | <strong>Belge No:</strong> ${docNo('BRC', sube)} | <strong>≈ûube:</strong> ${sube}</p>
            <p><strong>Personel:</strong> ${personel}${tc ? ' | TC: ' + tc : ''}</p>
            <p><strong>Bor√ß T√ºr√º:</strong> ${turLabels[tur]} | <strong>Tutar:</strong> ${tutar} TL | <strong>Olay:</strong> ${tarih}</p>
        </div>
        <div class="doc-section">
            <div class="doc-section-title">OLAY A√áIKLAMASI</div>
            <p style="background:#f9f9f9;padding:15px;border-left:4px solid #e07b39">${aciklama}</p>
        </div>
        <div class="doc-section">
            <p>Ben ${personel}, ${tarih} tarihli olayda kusurum nedeniyle <strong>${tutar} TL</strong> borcumu kabul ediyor, TBK 407/2 uyarƒ±nca ${odemeLabels[odeme]} kendi irademle taahh√ºt ediyorum.</p>
            <p style="margin-top:10px">Baskƒ± altƒ±nda deƒüilim, borcumu ve kesinti ko≈üullarƒ±nƒ± anladƒ±ƒüƒ±mƒ± beyan ederim.</p>
        </div>
        <div style="background:#ebf5fb;padding:12px;border-radius:6px;font-size:10pt;margin:20px 0">
            <strong>TBK 407/2:</strong> ƒ∞≈üveren, i≈ü√ßiden alacaƒüƒ±nƒ± i≈ü√ßi rƒ±zasƒ± olmadan takas edemez.
        </div>
        ${docSignature(
            {title: 'ƒ∞≈ûVEREN', name: '(KA≈ûE)', role: 'ƒ∞mza'},
            {title: 'PERSONEL', name: personel, role: 'El yazƒ±sƒ±: Okudum, kabul ediyorum'}
        )}
        ${sahit ? '<p style="margin-top:20px"><strong>≈ûahit:</strong> ' + sahit + ' _________________</p>' : ''}
    </div>`;
    
    showPreview('Bor√ß ƒ∞krar - ' + personel, html);
}

function generateAvans() {
    const personel = getVal('avans_personel') || '______________________';
    const tc = getVal('avans_tc') || '___________';
    const sube = getVal('avans_sube') || STATE.branches[0] || '______';
    const pozisyon = getVal('avans_pozisyon');
    const pozAd = STATE.positions.find(p => p.id === pozisyon)?.name || '______';
    const iban = getVal('avans_iban') || '______________________';
    const tutarRaw = getVal('avans_tutar') || '______';
    const tarih = formatDate(getVal('avans_tarih')) || today();
    const gerekce = getVal('avans_gerekce') || '______________________';
    
    // Tutar formatla ve yazƒ±ya √ßevir
    const tutarNum = parseInt(tutarRaw.replace(/\D/g, '')) || 0;
    const tutarFormat = tutarNum > 0 ? tutarNum.toLocaleString('tr-TR') : tutarRaw;
    const tutarYazi = tutarNum > 0 ? sayiyiYaziyaCevir(tutarNum) : '______';
    
    const html = `<div class="doc" style="font-size:11pt;line-height:1.5;-webkit-print-color-adjust:exact;print-color-adjust:exact">
        ${docHeader('AVANS TALEBƒ∞ FORMU')}
        <table style="width:100%;border-collapse:collapse;margin:15px 0">
            <tr>
                <td style="padding:8px;border:1px solid #ddd;background-color:#f9f9f9;-webkit-print-color-adjust:exact;width:25%"><strong>Ad Soyad</strong></td>
                <td style="padding:8px;border:1px solid #ddd;width:25%">${personel}</td>
                <td style="padding:8px;border:1px solid #ddd;background-color:#f9f9f9;-webkit-print-color-adjust:exact;width:25%"><strong>TC Kimlik No</strong></td>
                <td style="padding:8px;border:1px solid #ddd;width:25%">${tc}</td>
            </tr>
            <tr>
                <td style="padding:8px;border:1px solid #ddd;background-color:#f9f9f9;-webkit-print-color-adjust:exact"><strong>≈ûube</strong></td>
                <td style="padding:8px;border:1px solid #ddd">${sube}</td>
                <td style="padding:8px;border:1px solid #ddd;background-color:#f9f9f9;-webkit-print-color-adjust:exact"><strong>Pozisyon</strong></td>
                <td style="padding:8px;border:1px solid #ddd">${pozAd}</td>
            </tr>
            <tr>
                <td style="padding:8px;border:1px solid #ddd;background-color:#f9f9f9;-webkit-print-color-adjust:exact"><strong>IBAN</strong></td>
                <td style="padding:8px;border:1px solid #ddd" colspan="3">${iban}</td>
            </tr>
            <tr>
                <td style="padding:8px;border:1px solid #ddd;background-color:#f9f9f9;-webkit-print-color-adjust:exact"><strong>Talep Tarihi</strong></td>
                <td style="padding:8px;border:1px solid #ddd">${tarih}</td>
                <td style="padding:8px;border:1px solid #ddd;background-color:#f9f9f9;-webkit-print-color-adjust:exact"><strong>Belge No</strong></td>
                <td style="padding:8px;border:1px solid #ddd">${docNo('AVS', sube)}</td>
            </tr>
            <tr>
                <td style="padding:8px;border:1px solid #ddd;background-color:#f9f9f9;-webkit-print-color-adjust:exact"><strong>Talep Edilen Tutar</strong></td>
                <td style="padding:8px;border:1px solid #ddd" colspan="3"><strong>${tutarFormat} TL</strong> (${tutarYazi} T√ºrk Lirasƒ±)</td>
            </tr>
            <tr>
                <td style="padding:8px;border:1px solid #ddd;background-color:#f9f9f9;-webkit-print-color-adjust:exact"><strong>Geri √ñdeme</strong></td>
                <td style="padding:8px;border:1px solid #ddd" colspan="3">Gelecek ay maa≈üƒ±ndan tek seferde kesilecektir</td>
            </tr>
        </table>
        <div style="margin:15px 0">
            <strong>Talep Gerek√ßesi:</strong>
            <p style="background-color:#f9f9f9;-webkit-print-color-adjust:exact;padding:12px;border-left:3px solid #e07b39;margin:8px 0;min-height:50px">${gerekce}</p>
        </div>
        <div style="background-color:#f5f5f5;-webkit-print-color-adjust:exact;padding:10px;border-radius:4px;margin:15px 0">
            <strong>PERSONEL BEYANI:</strong> Ben ${personel}, yukarƒ±da belirtilen tutarda avans talep ettiƒüimi, bu avansƒ±n onaylanmasƒ± halinde gelecek ay maa≈üƒ±mdan tek seferde kesilerek mahsup edileceƒüini kabul ve taahh√ºt ederim.
        </div>
        <div style="background-color:#ebf5fb;-webkit-print-color-adjust:exact;padding:10px;border-radius:4px;font-size:10pt;margin:15px 0">
            <strong>YASAL Bƒ∞LGƒ∞LENDƒ∞RME:</strong> 4857 sayƒ±lƒ± ƒ∞≈ü Kanunu'nda avans √∂denmesine ili≈ükin herhangi bir d√ºzenleme bulunmamaktadƒ±r. Avans talebi tamamen i≈üverenin inisiyatifinde olup, i≈üveren avans verip vermemekte ve √∂deme zamanƒ±nƒ± belirlemekte serbesttir. Talep, 7 i≈ü g√ºn√º i√ßinde deƒüerlendirilecek olup; onaylanmasƒ± halinde en yakƒ±n √∂deme d√∂ng√ºs√ºnde, TBK Md. 407/2 uyarƒ±nca personelin yazƒ±lƒ± muvafakati ile maa≈üƒ±ndan mahsup edilecektir. ƒ∞≈üveren, gerek√ße g√∂stermeksizin talebi reddetme hakkƒ±nƒ± saklƒ± tutar.
        </div>
        <table style="width:100%;margin-top:20px">
            <tr>
                <td style="width:50%;text-align:center;padding:15px;vertical-align:bottom">
                    <div style="margin-bottom:40px">${personel}</div>
                    <div style="border-top:1px solid #000;padding-top:8px"><strong>PERSONEL</strong><br><span style="font-size:10pt">Ad Soyad / ƒ∞mza</span></div>
                </td>
                <td style="width:50%;text-align:center;padding:15px;vertical-align:bottom">
                    <div style="margin-bottom:15px">‚òê ONAYLANDI &nbsp; ‚òê REDDEDƒ∞LDƒ∞</div>
                    <div style="margin-bottom:15px;font-size:10pt">Tarih: ___/___/________</div>
                    <div style="border-top:1px solid #000;padding-top:8px"><strong>ƒ∞≈ûVEREN</strong><br><span style="font-size:10pt">Ka≈üe / ƒ∞mza</span></div>
                </td>
            </tr>
        </table>
    </div>`;
    
    showPreview('Avans Talebi - ' + personel, html);
}

// Sayƒ±yƒ± yazƒ±ya √ßevir fonksiyonu
function sayiyiYaziyaCevir(sayi) {
    if (sayi === 0) return 'sƒ±fƒ±r';
    if (sayi < 0) return 'eksi ' + sayiyiYaziyaCevir(-sayi);
    
    const birler = ['', 'bir', 'iki', '√º√ß', 'd√∂rt', 'be≈ü', 'altƒ±', 'yedi', 'sekiz', 'dokuz'];
    const onlar = ['', 'on', 'yirmi', 'otuz', 'kƒ±rk', 'elli', 'altmƒ±≈ü', 'yetmi≈ü', 'seksen', 'doksan'];
    
    let sonuc = '';
    
    if (sayi >= 1000000) {
        const milyon = Math.floor(sayi / 1000000);
        sonuc += (milyon === 1 ? '' : sayiyiYaziyaCevir(milyon) + ' ') + 'milyon ';
        sayi %= 1000000;
    }
    
    if (sayi >= 1000) {
        const bin = Math.floor(sayi / 1000);
        sonuc += (bin === 1 ? '' : sayiyiYaziyaCevir(bin) + ' ') + 'bin ';
        sayi %= 1000;
    }
    
    if (sayi >= 100) {
        const yuz = Math.floor(sayi / 100);
        sonuc += (yuz === 1 ? '' : birler[yuz] + ' ') + 'y√ºz ';
        sayi %= 100;
    }
    
    if (sayi >= 10) {
        sonuc += onlar[Math.floor(sayi / 10)] + ' ';
        sayi %= 10;
    }
    
    if (sayi > 0) {
        sonuc += birler[sayi] + ' ';
    }
    
    return sonuc.trim();
}

// ==================== Zƒ∞MMET ====================
let zimmetSayaci = 0;

function zimmetEkle() {
    zimmetSayaci++;
    const container = document.getElementById('zimmetListesi');
    const div = document.createElement('div');
    div.className = 'zimmet-item';
    div.id = `zimmet_item_${zimmetSayaci}`;
    div.style.cssText = 'display:grid;grid-template-columns:1fr 60px 1fr 1fr 1fr auto;gap:10px;padding:15px;background:#f9f9f9;border-radius:8px;margin-bottom:10px;align-items:end';
    div.innerHTML = `
        <div class="form-group" style="margin:0"><label class="form-label">E≈üya T√ºr√º</label>
            <select class="form-select" id="zimmet_tur_${zimmetSayaci}">
                <option value="telefon">Cep Telefonu</option>
                <option value="notebook">Notebook / Laptop</option>
                <option value="tablet">Tablet</option>
                <option value="pos">POS Cihazƒ±</option>
                <option value="anahtar">Anahtar</option>
                <option value="kart">Giri≈ü Kartƒ±</option>
                <option value="kiyafet">√úniforma / Kƒ±yafet</option>
                <option value="diger">Diƒüer</option>
            </select>
        </div>
        <div class="form-group" style="margin:0"><label class="form-label">Adet</label><input type="number" class="form-input" id="zimmet_adet_${zimmetSayaci}" value="1" min="1" style="text-align:center"></div>
        <div class="form-group" style="margin:0"><label class="form-label">Marka / Model</label><input type="text" class="form-input" id="zimmet_marka_${zimmetSayaci}" placeholder="√ñrn: iPhone 17 Pro"></div>
        <div class="form-group" style="margin:0"><label class="form-label">Seri No / IMEI</label><input type="text" class="form-input" id="zimmet_seri_${zimmetSayaci}" placeholder="Varsa seri numarasƒ±"></div>
        <div class="form-group" style="margin:0"><label class="form-label">Tahmini Deƒüer (TL)</label><input type="text" class="form-input" id="zimmet_deger_${zimmetSayaci}" placeholder="0"></div>
        <button class="btn btn-ghost" onclick="zimmetSil(${zimmetSayaci})" style="color:#e74c3c;padding:8px">üóëÔ∏è</button>
    `;
    container.appendChild(div);
}

function zimmetSil(id) {
    const item = document.getElementById(`zimmet_item_${id}`);
    if (item) item.remove();
}

function getZimmetListesi() {
    const items = document.querySelectorAll('[id^="zimmet_item_"]');
    const liste = [];
    items.forEach(item => {
        const id = item.id.replace('zimmet_item_', '');
        const turSelect = document.getElementById(`zimmet_tur_${id}`);
        const tur = turSelect ? turSelect.options[turSelect.selectedIndex].text : '';
        const adet = document.getElementById(`zimmet_adet_${id}`)?.value || '1';
        const marka = document.getElementById(`zimmet_marka_${id}`)?.value || '';
        const seri = document.getElementById(`zimmet_seri_${id}`)?.value || '-';
        const deger = document.getElementById(`zimmet_deger_${id}`)?.value || '0';
        if (tur || marka) {
            liste.push({ tur, adet, marka, seri, deger });
        }
    });
    return liste;
}

function generateZimmet() {
    const islemLabels = {teslim: 'TESLƒ∞M (Zƒ∞MMET)', iade: 'ƒ∞ADE'};
    
    const personel = getVal('zimmet_personel') || '______________________';
    const tc = getVal('zimmet_tc') || '___________';
    const sube = getVal('zimmet_sube') || STATE.branches[0] || '______';
    const pozisyon = getVal('zimmet_pozisyon');
    const pozAd = STATE.positions.find(p => p.id === pozisyon)?.name || '______';
    const tarih = formatDate(getVal('zimmet_tarih')) || today();
    const islem = getVal('zimmet_islem') || 'teslim';
    const notlar = getVal('zimmet_notlar') || '';
    const yetkili = getVal('zimmet_yetkili') || '______________________';
    
    const liste = getZimmetListesi();
    
    if (liste.length === 0) {
        alert('L√ºtfen en az bir e≈üya ekleyin.');
        return;
    }
    
    let toplamDeger = 0;
    const esyaRows = liste.map((item, idx) => {
        const degerNum = parseInt(item.deger.replace(/\D/g, '')) || 0;
        toplamDeger += degerNum;
        return `<tr>
            <td style="padding:8px;border:1px solid #ddd;text-align:center">${idx + 1}</td>
            <td style="padding:8px;border:1px solid #ddd">${item.tur}</td>
            <td style="padding:8px;border:1px solid #ddd;text-align:center">${item.adet}</td>
            <td style="padding:8px;border:1px solid #ddd">${item.marka}</td>
            <td style="padding:8px;border:1px solid #ddd">${item.seri}</td>
            <td style="padding:8px;border:1px solid #ddd;text-align:right">${degerNum.toLocaleString('tr-TR')} TL</td>
        </tr>`;
    }).join('');
    
    const html = `<div class="doc" style="font-size:11pt;line-height:1.5;-webkit-print-color-adjust:exact;print-color-adjust:exact">
        ${docHeader('DEMƒ∞RBA≈û TESLƒ∞M VE Zƒ∞MMET TUTANAƒûI')}
        <p style="text-align:center;font-weight:bold;margin-top:-10px;margin-bottom:20px;color:#e07b39">${islemLabels[islem]}</p>
        <div class="doc-section" style="margin-bottom:15px">
            <table style="width:100%;font-size:10pt">
                <tr><td><strong>Tarih:</strong> ${tarih}</td><td style="text-align:right"><strong>Belge No:</strong> ${docNo('ZMT', sube)}</td></tr>
            </table>
        </div>
        
        <table style="width:100%;border-collapse:collapse;margin:15px 0">
            <tr>
                <td style="padding:8px;border:1px solid #ddd;background-color:#f9f9f9;-webkit-print-color-adjust:exact;width:25%"><strong>Personel</strong></td>
                <td style="padding:8px;border:1px solid #ddd;width:25%">${personel}</td>
                <td style="padding:8px;border:1px solid #ddd;background-color:#f9f9f9;-webkit-print-color-adjust:exact;width:25%"><strong>TC Kimlik No</strong></td>
                <td style="padding:8px;border:1px solid #ddd;width:25%">${tc}</td>
            </tr>
            <tr>
                <td style="padding:8px;border:1px solid #ddd;background-color:#f9f9f9;-webkit-print-color-adjust:exact"><strong>≈ûube</strong></td>
                <td style="padding:8px;border:1px solid #ddd">${sube}</td>
                <td style="padding:8px;border:1px solid #ddd;background-color:#f9f9f9;-webkit-print-color-adjust:exact"><strong>Pozisyon</strong></td>
                <td style="padding:8px;border:1px solid #ddd">${pozAd}</td>
            </tr>
        </table>
        
        <div style="margin:20px 0">
            <strong style="font-size:12pt">Zƒ∞MMET EDƒ∞LEN E≈ûYALAR</strong>
            <table style="width:100%;border-collapse:collapse;margin:10px 0">
                <thead>
                    <tr style="background-color:#f0f0f0;-webkit-print-color-adjust:exact">
                        <th style="padding:10px;border:1px solid #ddd;width:40px">No</th>
                        <th style="padding:10px;border:1px solid #ddd">E≈üya T√ºr√º</th>
                        <th style="padding:10px;border:1px solid #ddd;width:50px">Adet</th>
                        <th style="padding:10px;border:1px solid #ddd">Marka / Model</th>
                        <th style="padding:10px;border:1px solid #ddd">Seri No / IMEI</th>
                        <th style="padding:10px;border:1px solid #ddd;width:100px">Deƒüer</th>
                    </tr>
                </thead>
                <tbody>
                    ${esyaRows}
                </tbody>
                <tfoot>
                    <tr style="background-color:#f9f9f9;-webkit-print-color-adjust:exact">
                        <td colspan="5" style="padding:10px;border:1px solid #ddd;text-align:right"><strong>TOPLAM DEƒûER:</strong></td>
                        <td style="padding:10px;border:1px solid #ddd;text-align:right"><strong>${toplamDeger.toLocaleString('tr-TR')} TL</strong></td>
                    </tr>
                </tfoot>
            </table>
        </div>
        
        ${notlar ? `<div style="margin:15px 0"><strong>Ek Notlar:</strong><p style="background-color:#f9f9f9;-webkit-print-color-adjust:exact;padding:10px;border-left:3px solid #e07b39;margin:5px 0">${notlar}</p></div>` : ''}
        
        <div style="background-color:#ebf5fb;-webkit-print-color-adjust:exact;padding:12px;border-radius:6px;font-size:10pt;margin:20px 0">
            <strong>PERSONEL TAAHH√úD√ú:</strong><br>
            Yukarƒ±da belirtilen demirba≈ü/e≈üyalarƒ± eksiksiz ve √ßalƒ±≈üƒ±r durumda teslim aldƒ±ƒüƒ±mƒ±; bunlarƒ± √∂zenle kullanacaƒüƒ±mƒ±, i≈üveren izni olmaksƒ±zƒ±n √º√ß√ºnc√º ki≈üilere devretmeyeceƒüimi, i≈üten ayrƒ±lmam veya talep halinde derhal iade edeceƒüimi kabul ve taahh√ºt ederim.<br><br>
            <strong>Yasal Dayanak:</strong> TBK Md. 390 (√∂zen borcu), TBK Md. 462 (teslim edilen e≈üyalarƒ±n korunmasƒ±), 4857 sayƒ±lƒ± ƒ∞≈ü Kanunu Md. 25/II-e (g√ºveni k√∂t√ºye kullanma). Zimmet edilen e≈üyalarƒ±n kaybƒ±, hasarƒ± veya iadeden imtina halinde, g√ºncel rayi√ß bedeli √ºzerinden tazmin y√ºk√ºml√ºl√ºƒü√º doƒüar.
        </div>
        
        <table style="width:100%;margin-top:40px;border:none;">
            <tr>
                <td style="width:50%;text-align:center;vertical-align:bottom;padding:20px;border:none;">
                    <p style="margin-bottom:60px">(Ka≈üe / ƒ∞mza)</p>
                    <div style="border-top:1px solid #000;width:70%;margin:0 auto;padding-top:10px">
                        <p style="font-weight:bold">TESLƒ∞M EDEN</p>
                        <p style="font-size:10pt">${yetkili}</p>
                    </div>
                </td>
                <td style="width:50%;text-align:center;vertical-align:bottom;padding:20px;border:none;">
                    <p style="margin-bottom:40px">${personel}</p>
                    <p style="margin-bottom:20px">(ƒ∞mza)</p>
                    <div style="border-top:1px solid #000;width:70%;margin:0 auto;padding-top:10px">
                        <p style="font-weight:bold">TESLƒ∞M ALAN</p>
                    </div>
                </td>
            </tr>
        </table>
    </div>`;
    
    showPreview('Zimmet Formu - ' + personel, html);
}

// Sayfa y√ºklendiƒüinde varsayƒ±lan bir e≈üya satƒ±rƒ± ekle
document.addEventListener('DOMContentLoaded', () => {
    setTimeout(() => {
        if (document.getElementById('zimmetListesi') && document.getElementById('zimmetListesi').children.length === 0) {
            zimmetEkle();
        }
    }, 500);
});

// ==================== KATALOG ====================
function renderViolations(filter = 'all') {
    const list = document.getElementById('violationList');
    if (!list) return;
    let items = filter === 'all' ? STATE.violations : STATE.violations.filter(v => v.risk === filter);
    list.innerHTML = items.map(v => `
        <div class="violation-item" onclick="showViolation('${v.id}')">
            <div class="violation-header">
                <div class="violation-title">${v.id}: ${v.title}</div>
                <span class="violation-badge ${v.risk}">${v.risk === 'low' ? 'D√º≈ü√ºk' : v.risk === 'medium' ? 'Orta' : 'Y√ºksek'}</span>
            </div>
            <div class="violation-legal">${v.legal}</div>
        </div>
    `).join('');
}

function filterKatalog(filter, btn) {
    document.querySelectorAll('#katalogTabs .tab').forEach(t => t.classList.remove('active'));
    btn.classList.add('active');
    renderViolations(filter);
}

function showViolation(id) {
    const v = STATE.violations.find(x => x.id === id);
    if (!v) return;
    const colors = {low: '#e9f7ef', medium: '#fef9e7', high: '#fdedec'};
    const html = `<div class="doc">
        <div class="doc-header" style="border-bottom-color:${v.risk === 'high' ? '#e74c3c' : v.risk === 'medium' ? '#f39c12' : '#2ecc71'}">
            <div class="doc-title" style="text-decoration:none">${v.title}</div>
            <div class="doc-company-info">${v.id}</div>
        </div>
        <div class="doc-section"><div class="doc-section-title">YASAL DAYANAK</div><p>${v.legal}</p></div>
        <div class="doc-section"><div class="doc-section-title">A√áIKLAMA</div><p>${v.desc}</p></div>
        <div class="doc-section"><div class="doc-section-title">ƒ∞ZLENECEK PROSED√úR</div><ol style="margin-left:20px;line-height:2">${v.steps.map(s => '<li>' + s + '</li>').join('')}</ol></div>
        <div style="background:${colors[v.risk]};padding:15px;border-radius:6px"><strong>Risk:</strong> ${v.risk === 'low' ? 'D√ú≈û√úK - Uyarƒ± ile √ß√∂z√ºlebilir' : v.risk === 'medium' ? 'ORTA - Savunma ve ihtar gerektirir' : 'Y√úKSEK - Haklƒ± fesih sebebi'}</div>
    </div>`;
    showPreview(v.title, html);
}

// ==================== ADMIN PANEL ====================
function openAdminWithPin() {
    // Artƒ±k PIN sormuyoruz, giri≈ü yapƒ±lmƒ±≈ü kullanƒ±cƒ±nƒ±n yetkisini kontrol ediyoruz
    if (!currentUser) {
        toast('L√ºtfen √∂nce giri≈ü yapƒ±n', 'error');
        return;
    }
    
    // Y√∂netici ve B√∂lge M√ºd√ºr√º admin'e eri≈üebilir
    if (currentUser.role === 'yonetici' || currentUser.role === 'bolge_muduru') {
        goTo('admin');
    } else {
        // Maƒüaza m√ºd√ºr√º i√ßin yetki kontrol√º
        db.collection('permissions').doc(currentUser.role).get().then(doc => {
            if (doc.exists && doc.data().admin !== false) {
                goTo('admin');
            } else {
                toast('Bu sayfaya eri≈üim yetkiniz yok', 'error');
            }
        }).catch(() => {
            toast('Yetki kontrol hatasƒ±', 'error');
        });
    }
}

function autoCheckAdminPin() {
    const input = document.getElementById('adminPinInput');
    if (input && input.value.length === 4) {
        if (input.value === STATE.pin) {
            input.style.borderColor = 'var(--green)';
            setTimeout(() => {
                closeModal();
                goTo('admin');
            }, 200);
        } else {
            input.style.borderColor = 'var(--red)';
            toast('Hatalƒ± PIN', 'error');
            setTimeout(() => {
                input.value = '';
                input.style.borderColor = '';
            }, 500);
        }
    }
}

function checkAdminPin() {
    const input = document.getElementById('adminPinInput');
    if (input && input.value === STATE.pin) {
        closeModal();
        goTo('admin');
    } else {
        toast('Hatalƒ± PIN', 'error');
        if (input) input.value = '';
    }
}

function showAdminTab(tab, btn) {
    // Kaydedilmemi≈ü belge ≈üablonu deƒüi≈üikliƒüi kontrol√º
    if (hasUnsavedDocChanges && currentPage === 'admin') {
        showUnsavedChangesModal(() => {
            saveDocTemplate();
            hasUnsavedDocChanges = false;
            switchAdminTab(tab, btn);
        }, () => {
            hasUnsavedDocChanges = false;
            switchAdminTab(tab, btn);
        });
        return;
    }
    switchAdminTab(tab, btn);
}

function switchAdminTab(tab, btn) {
    document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
    document.getElementById('admin-' + tab).classList.add('active');
    if (tab === 'sablonlar') loadTemplate();
    if (tab === 'belgeler') loadDocTemplate('tutanak', 'olay');
}

function loadAdminFields() {
    document.getElementById('admin_company_name').value = STATE.company.name;
    document.getElementById('admin_mersis').value = STATE.company.mersis;
    document.getElementById('admin_address').value = STATE.company.address;
}

function renderAdminLists() {
    // Y√∂netici i√ßin √∂zel kartlarƒ± g√∂ster
    const adminPasswordCard = document.getElementById('adminPasswordCard');
    const dataCleanupCard = document.getElementById('dataCleanupCard');
    const rolePreviewCard = document.getElementById('rolePreviewCard');
    if (currentUser?.role === 'yonetici') {
        if (adminPasswordCard) adminPasswordCard.style.display = 'block';
        if (dataCleanupCard) dataCleanupCard.style.display = 'block';
        if (rolePreviewCard) rolePreviewCard.style.display = 'block';
    }
    
    // Branches
    const branchList = document.getElementById('branchList');
    if (branchList) {
        branchList.innerHTML = STATE.branches.map((b, i) => `
            <div class="admin-list-item">
                <div class="admin-list-item-text">${b}</div>
                <div class="admin-list-item-actions">
                    <button class="admin-btn-icon admin-btn-edit" onclick="editBranch(${i})">‚úèÔ∏è</button>
                    <button class="admin-btn-icon admin-btn-delete" onclick="deleteBranch(${i})">üóëÔ∏è</button>
                </div>
            </div>
        `).join('');
    }
    
    // Positions
    const posList = document.getElementById('positionList');
    if (posList) {
        posList.innerHTML = STATE.positions.map((p, i) => `
            <div class="admin-list-item">
                <div class="admin-list-item-text">${p.name} <span style="color:var(--txdark2);font-size:.8rem">(${p.type})</span></div>
                <div class="admin-list-item-actions">
                    <button class="admin-btn-icon admin-btn-edit" onclick="editPosition(${i})">‚úèÔ∏è</button>
                    <button class="admin-btn-icon admin-btn-delete" onclick="deletePosition(${i})">üóëÔ∏è</button>
                </div>
            </div>
        `).join('');
    }
    
    // Violations
    const violList = document.getElementById('violationAdminList');
    if (violList) {
        violList.innerHTML = STATE.violations.map((v, i) => `
            <div class="admin-list-item">
                <div class="admin-list-item-text">${v.id}: ${v.title} <span class="violation-badge ${v.risk}" style="margin-left:8px">${v.risk}</span></div>
                <div class="admin-list-item-actions">
                    <button class="admin-btn-icon admin-btn-edit" onclick="editViolation(${i})">‚úèÔ∏è</button>
                    <button class="admin-btn-icon admin-btn-delete" onclick="deleteViolation(${i})">üóëÔ∏è</button>
                </div>
            </div>
        `).join('');
    }
}

// Duplicate personel temizleme
async function cleanDuplicatePersonel() {
    const resultsDiv = document.getElementById('cleanupResults');
    resultsDiv.style.display = 'block';
    resultsDiv.innerHTML = '<p style="color:var(--tx2)">‚è≥ Taranƒ±yor...</p>';
    
    try {
        const snapshot = await db.collection('personel').get();
        const personelMap = {};
        const toDelete = [];
        
        snapshot.forEach(doc => {
            const d = doc.data();
            const key = `${d.name}-${d.branch}`;
            if (personelMap[key]) {
                // Bu bir duplicate
                toDelete.push({ id: doc.id, name: d.name, branch: d.branch });
            } else {
                personelMap[key] = doc.id;
            }
        });
        
        if (toDelete.length === 0) {
            resultsDiv.innerHTML = '<p style="color:var(--green)">‚úÖ Duplicate personel bulunamadƒ±.</p>';
            return;
        }
        
        // Silme i≈ülemi i√ßin onay
        resultsDiv.innerHTML = `
            <p style="color:var(--yellow);margin-bottom:12px">‚ö†Ô∏è ${toDelete.length} duplicate personel bulundu:</p>
            <ul style="font-size:.85rem;margin-bottom:12px;padding-left:20px">
                ${toDelete.slice(0, 10).map(p => `<li>${p.name} (${p.branch})</li>`).join('')}
                ${toDelete.length > 10 ? `<li>...ve ${toDelete.length - 10} daha</li>` : ''}
            </ul>
            <button class="btn btn-primary btn-sm" onclick="confirmDeleteDuplicates('${JSON.stringify(toDelete.map(p => p.id)).replace(/"/g, '&quot;')}')">Sil (${toDelete.length} kayƒ±t)</button>
            <button class="btn btn-ghost btn-sm" onclick="document.getElementById('cleanupResults').style.display='none'">ƒ∞ptal</button>
        `;
    } catch (e) {
        resultsDiv.innerHTML = `<p style="color:var(--red)">‚ùå Hata: ${e.message}</p>`;
    }
}

async function confirmDeleteDuplicates(idsJson) {
    const ids = JSON.parse(idsJson.replace(/&quot;/g, '"'));
    const resultsDiv = document.getElementById('cleanupResults');
    resultsDiv.innerHTML = '<p style="color:var(--tx2)">‚è≥ Siliniyor...</p>';
    
    try {
        const batch = db.batch();
        ids.forEach(id => {
            batch.delete(db.collection('personel').doc(id));
        });
        await batch.commit();
        resultsDiv.innerHTML = `<p style="color:var(--green)">‚úÖ ${ids.length} duplicate personel silindi.</p>`;
        toast(`${ids.length} duplicate personel silindi`, 'success');
    } catch (e) {
        resultsDiv.innerHTML = `<p style="color:var(--red)">‚ùå Hata: ${e.message}</p>`;
    }
}

// Duplicate shift temizleme
async function cleanDuplicateShifts() {
    const resultsDiv = document.getElementById('cleanupResults');
    resultsDiv.style.display = 'block';
    resultsDiv.innerHTML = '<p style="color:var(--tx2)">‚è≥ Taranƒ±yor...</p>';
    
    try {
        const snapshot = await db.collection('shifts').get();
        const shiftMap = {};
        const toDelete = [];
        
        snapshot.forEach(doc => {
            const d = doc.data();
            const key = `${d.branch}-${d.weekStart}`;
            if (shiftMap[key]) {
                // Bu bir duplicate - daha eski olanƒ± sil
                toDelete.push({ id: doc.id, branch: d.branch, weekStart: d.weekStart });
            } else {
                shiftMap[key] = doc.id;
            }
        });
        
        if (toDelete.length === 0) {
            resultsDiv.innerHTML = '<p style="color:var(--green)">‚úÖ Duplicate shift bulunamadƒ±.</p>';
            return;
        }
        
        resultsDiv.innerHTML = `
            <p style="color:var(--yellow);margin-bottom:12px">‚ö†Ô∏è ${toDelete.length} duplicate shift bulundu.</p>
            <button class="btn btn-primary btn-sm" onclick="confirmDeleteDuplicateShifts('${JSON.stringify(toDelete.map(p => p.id)).replace(/"/g, '&quot;')}')">Sil (${toDelete.length} kayƒ±t)</button>
            <button class="btn btn-ghost btn-sm" onclick="document.getElementById('cleanupResults').style.display='none'">ƒ∞ptal</button>
        `;
    } catch (e) {
        resultsDiv.innerHTML = `<p style="color:var(--red)">‚ùå Hata: ${e.message}</p>`;
    }
}

async function confirmDeleteDuplicateShifts(idsJson) {
    const ids = JSON.parse(idsJson.replace(/&quot;/g, '"'));
    const resultsDiv = document.getElementById('cleanupResults');
    resultsDiv.innerHTML = '<p style="color:var(--tx2)">‚è≥ Siliniyor...</p>';
    
    try {
        const batch = db.batch();
        ids.forEach(id => {
            batch.delete(db.collection('shifts').doc(id));
        });
        await batch.commit();
        resultsDiv.innerHTML = `<p style="color:var(--green)">‚úÖ ${ids.length} duplicate shift silindi.</p>`;
        toast(`${ids.length} duplicate shift silindi`, 'success');
    } catch (e) {
        resultsDiv.innerHTML = `<p style="color:var(--red)">‚ùå Hata: ${e.message}</p>`;
    }
}

// ========== ROL √ñNƒ∞ZLEME ==========
let originalUser = null;
let isPreviewMode = false;

function startRolePreview() {
    const role = document.getElementById('previewRoleSelect').value;
    const branch = document.getElementById('previewBranchSelect').value;
    
    if (!role) {
        toast('L√ºtfen bir rol se√ßin', 'error');
        return;
    }
    if (!branch && role === 'magaza_muduru') {
        toast('Maƒüaza M√ºd√ºr√º i√ßin ≈üube se√ßimi gerekli', 'error');
        return;
    }
    
    // Mevcut kullanƒ±cƒ±yƒ± sakla
    originalUser = { ...currentUser };
    isPreviewMode = true;
    
    // √ñnizleme kullanƒ±cƒ±sƒ±nƒ± ayarla
    const roleNames = {
        'bolge_muduru': 'B√∂lge M√ºd√ºr√º',
        'magaza_muduru': 'Maƒüaza M√ºd√ºr√º'
    };
    
    currentUser = {
        ...currentUser,
        role: role,
        branch: role === 'magaza_muduru' ? branch : 'all',
        name: `√ñnizleme: ${roleNames[role]}`
    };
    
    // UI g√ºncelle
    document.getElementById('previewRoleName').textContent = roleNames[role];
    document.getElementById('previewBranchName').textContent = branch || 'T√ºm ≈ûubeler';
    document.getElementById('rolePreviewContent').style.display = 'none';
    document.getElementById('rolePreviewActive').style.display = 'block';
    
    // Sidebar'a √∂nizleme badge'i ekle
    const userNameEl = document.getElementById('userName');
    if (userNameEl) {
        userNameEl.innerHTML = `<span style="background:var(--yellow);color:#000;padding:2px 6px;border-radius:4px;font-size:.7rem;margin-right:6px">√ñNƒ∞ZLEME</span>${roleNames[role]}`;
    }
    const userRoleEl = document.getElementById('userRole');
    if (userRoleEl) {
        userRoleEl.textContent = branch || 'T√ºm ≈ûubeler';
    }
    
    // Yetkileri uygula
    applyRolePreviewPermissions(role, branch);
    
    toast(`${roleNames[role]} olarak √∂nizleme ba≈üladƒ±`, 'info');
}

function applyRolePreviewPermissions(role, branch) {
    // Men√º √∂ƒüelerini g√∂ster/gizle
    const hiddenForMagaza = ['admin', 'sozlesme', 'fesih'];
    const hiddenForBolge = [];
    
    document.querySelectorAll('.nav-item[data-page]').forEach(item => {
        const page = item.dataset.page;
        item.style.display = '';
        
        if (role === 'magaza_muduru' && hiddenForMagaza.includes(page)) {
            item.style.display = 'none';
        }
        if (role === 'bolge_muduru' && hiddenForBolge.includes(page)) {
            item.style.display = 'none';
        }
    });
    
    // ≈ûube filtreleme (maƒüaza m√ºd√ºr√º sadece kendi ≈üubesini g√∂r√ºr)
    if (role === 'magaza_muduru' && branch) {
        // ≈ûube se√ßicileri kilitle
        document.querySelectorAll('select[id*="Sube"]').forEach(select => {
            select.value = branch;
            select.disabled = true;
        });
    }
}

function stopRolePreview() {
    if (!originalUser) return;
    
    // Orijinal kullanƒ±cƒ±yƒ± geri y√ºkle
    currentUser = { ...originalUser };
    originalUser = null;
    isPreviewMode = false;
    
    // UI'ƒ± sƒ±fƒ±rla
    document.getElementById('rolePreviewContent').style.display = 'block';
    document.getElementById('rolePreviewActive').style.display = 'none';
    document.getElementById('previewRoleSelect').value = '';
    document.getElementById('previewBranchSelect').value = '';
    
    // Sidebar kullanƒ±cƒ± bilgisini geri y√ºkle
    applyUserPermissions();
    
    // T√ºm men√º √∂ƒüelerini g√∂ster
    document.querySelectorAll('.nav-item[data-page]').forEach(item => {
        item.style.display = '';
    });
    
    // ≈ûube se√ßicileri a√ß
    document.querySelectorAll('select[id*="Sube"]').forEach(select => {
        select.disabled = false;
    });
    
    toast('√ñnizleme sonlandƒ±rƒ±ldƒ±, y√∂netici g√∂r√ºn√ºm√ºne d√∂n√ºld√º', 'success');
}

// ========== PIN ==========
function changePin() {
    const current = document.getElementById('admin_pin_current').value;
    const newPin = document.getElementById('admin_pin_new').value;
    if (current !== STATE.pin) {
        toast('Mevcut PIN hatalƒ±', 'error');
        return;
    }
    if (newPin.length !== 4 || !/^\d+$/.test(newPin)) {
        toast('Yeni PIN 4 haneli rakam olmalƒ±', 'error');
        return;
    }
    STATE.pin = newPin;
    saveState();
    document.getElementById('admin_pin_current').value = '';
    document.getElementById('admin_pin_new').value = '';
    successModal('PIN ba≈üarƒ±yla deƒüi≈ütirildi!');
}

// ========== COMPANY ==========
function saveCompany() {
    STATE.company.name = getVal('admin_company_name') || STATE.company.name;
    STATE.company.mersis = getVal('admin_mersis') || STATE.company.mersis;
    STATE.company.address = getVal('admin_address') || STATE.company.address;
    saveState();
    document.getElementById('companyName').textContent = STATE.company.name;
    toast('≈ûirket bilgileri kaydedildi', 'success');
}

// ========== BRANCHES ==========
function addBranch() {
    showModal('≈ûube Ekle', `
        <div class="form-group">
            <label class="form-label">≈ûube Adƒ±</label>
            <input type="text" id="newBranchName" class="form-input" placeholder="√ñrn: Kadƒ±k√∂y">
        </div>
    `, `
        <button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn btn-primary" onclick="saveBranch()">Ekle</button>
    `);
}

function saveBranch() {
    const name = getVal('newBranchName');
    if (name) {
        STATE.branches.push(name);
        saveState();
        populateSelects();
        renderAdminLists();
        closeModal();
        toast('≈ûube eklendi', 'success');
    }
}

function editBranch(i) {
    showModal('≈ûube D√ºzenle', `
        <div class="form-group">
            <label class="form-label">≈ûube Adƒ±</label>
            <input type="text" id="editBranchName" class="form-input" value="${STATE.branches[i]}">
        </div>
    `, `
        <button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn btn-primary" onclick="updateBranch(${i})">Kaydet</button>
    `);
}

function updateBranch(i) {
    const name = getVal('editBranchName');
    if (name) {
        STATE.branches[i] = name;
        saveState();
        populateSelects();
        renderAdminLists();
        closeModal();
        toast('G√ºncellendi', 'success');
    }
}

function deleteBranch(i) {
    confirmModal('≈ûube Sil', `"${STATE.branches[i]}" ≈üubesini silmek istediƒüinize emin misiniz?`, () => {
        STATE.branches.splice(i, 1);
        saveState();
        populateSelects();
        renderAdminLists();
        toast('≈ûube silindi', 'success');
    }, 'danger');
}

// ========== POSITIONS ==========
function addPosition() {
    showModal('Pozisyon Ekle', `
        <div class="form-grid">
            <div class="form-group"><label class="form-label">ID</label><input type="text" id="newPosId" class="form-input" placeholder="ornek_pozisyon"></div>
            <div class="form-group"><label class="form-label">Ad</label><input type="text" id="newPosName" class="form-input" placeholder="√ñrnek Pozisyon"></div>
            <div class="form-group full"><label class="form-label">Yaka Tipi</label>
                <select id="newPosType" class="form-select">
                    <option>Mavi Yaka</option><option>Gri Yaka</option><option>Beyaz Yaka</option><option>Stratejik</option>
                </select>
            </div>
        </div>
    `, `
        <button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn btn-primary" onclick="savePosition()">Ekle</button>
    `);
}

function savePosition() {
    const id = getVal('newPosId');
    const name = getVal('newPosName');
    const type = getVal('newPosType');
    if (id && name) {
        STATE.positions.push({id, name, type});
        if (!STATE.templates[id]) STATE.templates[id] = '';
        saveState();
        populateSelects();
        renderPositionCards();
        renderAdminLists();
        closeModal();
        toast('Pozisyon eklendi', 'success');
    }
}

function editPosition(i) {
    const p = STATE.positions[i];
    showModal('Pozisyon D√ºzenle', `
        <div class="form-grid">
            <div class="form-group"><label class="form-label">ID</label><input type="text" id="editPosId" class="form-input" value="${p.id}"></div>
            <div class="form-group"><label class="form-label">Ad</label><input type="text" id="editPosName" class="form-input" value="${p.name}"></div>
            <div class="form-group full"><label class="form-label">Yaka Tipi</label>
                <select id="editPosType" class="form-select">
                    <option ${p.type==='Mavi Yaka'?'selected':''}>Mavi Yaka</option>
                    <option ${p.type==='Gri Yaka'?'selected':''}>Gri Yaka</option>
                    <option ${p.type==='Beyaz Yaka'?'selected':''}>Beyaz Yaka</option>
                    <option ${p.type==='Stratejik'?'selected':''}>Stratejik</option>
                </select>
            </div>
        </div>
    `, `
        <button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn btn-primary" onclick="updatePosition(${i})">Kaydet</button>
    `);
}

function updatePosition(i) {
    const oldId = STATE.positions[i].id;
    const newId = getVal('editPosId');
    STATE.positions[i] = {
        id: newId,
        name: getVal('editPosName'),
        type: getVal('editPosType')
    };
    if (oldId !== newId && STATE.templates[oldId]) {
        STATE.templates[newId] = STATE.templates[oldId];
        delete STATE.templates[oldId];
    }
    saveState();
    populateSelects();
    renderPositionCards();
    renderAdminLists();
    closeModal();
    toast('G√ºncellendi', 'success');
}

function deletePosition(i) {
    confirmModal('Pozisyon Sil', `"${STATE.positions[i].name}" pozisyonunu silmek istediƒüinize emin misiniz?`, () => {
        const id = STATE.positions[i].id;
        STATE.positions.splice(i, 1);
        delete STATE.templates[id];
        saveState();
        populateSelects();
        renderPositionCards();
        renderAdminLists();
        toast('Pozisyon silindi', 'success');
    }, 'danger');
}

// ========== VIOLATIONS ==========
function addViolation() {
    showModal('ƒ∞hlal Ekle', `
        <div class="form-grid">
            <div class="form-group"><label class="form-label">Kod</label><input type="text" id="newViolId" class="form-input" placeholder="V19"></div>
            <div class="form-group"><label class="form-label">Ba≈ülƒ±k</label><input type="text" id="newViolTitle" class="form-input"></div>
            <div class="form-group"><label class="form-label">Risk</label>
                <select id="newViolRisk" class="form-select"><option value="low">D√º≈ü√ºk</option><option value="medium">Orta</option><option value="high">Y√ºksek</option></select>
            </div>
            <div class="form-group"><label class="form-label">Yasal Dayanak</label><input type="text" id="newViolLegal" class="form-input" placeholder="ƒ∞≈ü K. 25/II-x"></div>
            <div class="form-group full"><label class="form-label">A√ßƒ±klama</label><input type="text" id="newViolDesc" class="form-input"></div>
            <div class="form-group full"><label class="form-label">Prosed√ºr Adƒ±mlarƒ± (virg√ºlle ayƒ±rƒ±n)</label><input type="text" id="newViolSteps" class="form-input" placeholder="Tutanak,Savunma,ƒ∞htar"></div>
        </div>
    `, `
        <button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn btn-primary" onclick="saveViolation()">Ekle</button>
    `);
}

function saveViolation() {
    const v = {
        id: getVal('newViolId'),
        title: getVal('newViolTitle'),
        risk: getVal('newViolRisk'),
        legal: getVal('newViolLegal'),
        desc: getVal('newViolDesc'),
        steps: getVal('newViolSteps').split(',').map(s => s.trim()).filter(s => s)
    };
    if (v.id && v.title) {
        STATE.violations.push(v);
        saveState();
        renderViolations();
        renderAdminLists();
        closeModal();
        toast('ƒ∞hlal eklendi', 'success');
    }
}

function editViolation(i) {
    const v = STATE.violations[i];
    showModal('ƒ∞hlal D√ºzenle', `
        <div class="form-grid">
            <div class="form-group"><label class="form-label">Kod</label><input type="text" id="editViolId" class="form-input" value="${v.id}"></div>
            <div class="form-group"><label class="form-label">Ba≈ülƒ±k</label><input type="text" id="editViolTitle" class="form-input" value="${v.title}"></div>
            <div class="form-group"><label class="form-label">Risk</label>
                <select id="editViolRisk" class="form-select">
                    <option value="low" ${v.risk==='low'?'selected':''}>D√º≈ü√ºk</option>
                    <option value="medium" ${v.risk==='medium'?'selected':''}>Orta</option>
                    <option value="high" ${v.risk==='high'?'selected':''}>Y√ºksek</option>
                </select>
            </div>
            <div class="form-group"><label class="form-label">Yasal Dayanak</label><input type="text" id="editViolLegal" class="form-input" value="${v.legal}"></div>
            <div class="form-group full"><label class="form-label">A√ßƒ±klama</label><input type="text" id="editViolDesc" class="form-input" value="${v.desc}"></div>
            <div class="form-group full"><label class="form-label">Prosed√ºr Adƒ±mlarƒ±</label><input type="text" id="editViolSteps" class="form-input" value="${v.steps.join(', ')}"></div>
        </div>
    `, `
        <button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn btn-primary" onclick="updateViolation(${i})">Kaydet</button>
    `);
}

function updateViolation(i) {
    STATE.violations[i] = {
        id: getVal('editViolId'),
        title: getVal('editViolTitle'),
        risk: getVal('editViolRisk'),
        legal: getVal('editViolLegal'),
        desc: getVal('editViolDesc'),
        steps: getVal('editViolSteps').split(',').map(s => s.trim()).filter(s => s)
    };
    saveState();
    renderViolations();
    renderAdminLists();
    closeModal();
    toast('G√ºncellendi', 'success');
}

function deleteViolation(i) {
    confirmModal('ƒ∞hlal Sil', `"${STATE.violations[i].title}" ihlalini silmek istediƒüinize emin misiniz?`, () => {
        STATE.violations.splice(i, 1);
        saveState();
        renderViolations();
        renderAdminLists();
        toast('ƒ∞hlal silindi', 'success');
    }, 'danger');
}

// ========== TEMPLATES ==========
function loadTemplate() {
    const sel = document.getElementById('template_pozisyon');
    const content = document.getElementById('template_content');
    if (sel && content) {
        const posId = sel.value;
        content.value = STATE.templates[posId] || '';
    }
}

function saveTemplate() {
    const posId = document.getElementById('template_pozisyon').value;
    const content = document.getElementById('template_content').value;
    STATE.templates[posId] = content;
    saveState();
    toast('≈ûablon kaydedildi', 'success');
}

// ========== SYNC ==========
function generateExportCode() {
    try {
        const json = JSON.stringify(STATE);
        const compressed = LZString.compressToBase64(json);
        document.getElementById('exportCode').value = compressed;
        toast('Kod olu≈üturuldu', 'success');
    } catch(e) {
        toast('Kod olu≈üturulamadƒ±', 'error');
    }
}

function copyExportCode() {
    const code = document.getElementById('exportCode').value;
    if (code) {
        navigator.clipboard.writeText(code).then(() => {
            toast('Kopyalandƒ±!', 'success');
        }).catch(() => {
            // Fallback
            const ta = document.createElement('textarea');
            ta.value = code;
            document.body.appendChild(ta);
            ta.select();
            document.execCommand('copy');
            document.body.removeChild(ta);
            toast('Kopyalandƒ±!', 'success');
        });
    }
}

function importCode() {
    const code = document.getElementById('importCode').value.trim();
    if (!code) {
        toast('Kod bo≈ü', 'error');
        return;
    }
    
    confirmModal('ƒ∞√ße Aktar', 'Mevcut t√ºm ayarlarƒ±nƒ±z deƒüi≈ütirilecek. Emin misiniz?', () => {
        try {
            const json = LZString.decompressFromBase64(code);
            if (!json) throw new Error('Invalid');
            const data = JSON.parse(json);
            
            // Validate basic structure
            if (!data.pin || !data.company || !data.branches) {
                throw new Error('Invalid structure');
            }
            
            STATE = {...DEFAULT_STATE, ...data};
            saveState();
            initUI();
            document.getElementById('importCode').value = '';
            successModal('Veriler ba≈üarƒ±yla i√ße aktarƒ±ldƒ±!');
        } catch(e) {
            toast('Ge√ßersiz kod!', 'error');
        }
    }, 'danger');
}

// ========== DOSYA YEDEKLEMESƒ∞ ==========
function downloadBackup() {
    try {
        const data = JSON.stringify(STATE, null, 2);
        const blob = new Blob([data], {type: 'application/json'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        const date = new Date().toISOString().split('T')[0];
        a.href = url;
        a.download = `moonberry-ik-yedek-${date}.json`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        toast('Yedek dosyasƒ± indirildi', 'success');
    } catch(e) {
        toast('Yedek olu≈üturulamadƒ±', 'error');
    }
}

function uploadBackup(event) {
    const file = event.target.files[0];
    if (!file) return;
    
    if (!file.name.endsWith('.json')) {
        toast('Sadece .json dosyasƒ± y√ºkleyebilirsiniz', 'error');
        return;
    }
    
    confirmModal('Yedek Y√ºkle', `"${file.name}" dosyasƒ±nƒ± y√ºklemek istediƒüinize emin misiniz? Mevcut t√ºm ayarlarƒ±nƒ±z deƒüi≈ütirilecek.`, () => {
        const reader = new FileReader();
        reader.onload = (e) => {
            try {
                const data = JSON.parse(e.target.result);
                
                // Validate basic structure
                if (!data.pin || !data.company || !data.branches) {
                    throw new Error('Invalid structure');
                }
                
                STATE = {...DEFAULT_STATE, ...data};
                saveState();
                initUI();
                successModal('Yedek ba≈üarƒ±yla y√ºklendi!');
            } catch(err) {
                toast('Ge√ßersiz yedek dosyasƒ±!', 'error');
            }
        };
        reader.onerror = () => toast('Dosya okunamadƒ±', 'error');
        reader.readAsText(file);
    }, 'danger');
    
    // Reset input
    event.target.value = '';
}

// Drag & Drop desteƒüi
document.addEventListener('DOMContentLoaded', () => {
    const dropZone = document.getElementById('dropZone');
    if (dropZone) {
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, (e) => {
                e.preventDefault();
                e.stopPropagation();
            });
        });
        
        ['dragenter', 'dragover'].forEach(eventName => {
            dropZone.addEventListener(eventName, () => {
                dropZone.style.borderColor = 'var(--green)';
                dropZone.style.background = 'var(--bg)';
            });
        });
        
        ['dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, () => {
                dropZone.style.borderColor = 'var(--accent)';
                dropZone.style.background = '';
            });
        });
        
        dropZone.addEventListener('drop', (e) => {
            const file = e.dataTransfer.files[0];
            if (file) {
                document.getElementById('backupFileInput').files = e.dataTransfer.files;
                uploadBackup({target: {files: [file], value: ''}});
            }
        });
    }
});

// ========== BELGE ≈ûABLONLARI ==========
let currentDocTemplateCategory = 'tutanak';
let currentDocTemplateSubType = 'olay';
let originalDocTemplateContent = '';
let hasUnsavedDocChanges = false;

function selectDocTemplateCategory(category) {
    // Kaydedilmemi≈ü deƒüi≈üiklik kontrol√º
    if (hasUnsavedDocChanges) {
        showUnsavedChangesModal(() => {
            saveDocTemplate();
            switchDocTemplateCategory(category);
        }, () => {
            hasUnsavedDocChanges = false;
            switchDocTemplateCategory(category);
        });
        return;
    }
    switchDocTemplateCategory(category);
}

function switchDocTemplateCategory(category) {
    currentDocTemplateCategory = category;
    
    // Butonlarƒ± g√ºncelle
    document.querySelectorAll('#admin-belgeler .btn-group .btn').forEach(btn => {
        btn.classList.remove('btn-primary');
        btn.classList.add('btn-ghost');
    });
    event.target.classList.remove('btn-ghost');
    event.target.classList.add('btn-primary');
    
    // Panelleri gizle/g√∂ster
    document.querySelectorAll('.doc-template-panel').forEach(p => p.style.display = 'none');
    const panel = document.getElementById('docTemplate-' + category);
    if (panel) panel.style.display = 'block';
    
    // Alt t√ºr√º belirle
    if (category === 'tutanak') {
        currentDocTemplateSubType = document.getElementById('tutanak_sub_type')?.value || 'olay';
    } else if (category === 'fesih') {
        currentDocTemplateSubType = document.getElementById('fesih_sub_type')?.value || 'hakli';
    } else {
        currentDocTemplateSubType = null;
    }
    
    loadDocTemplate(category, currentDocTemplateSubType);
}

function loadDocTemplate(category, subType) {
    currentDocTemplateCategory = category;
    currentDocTemplateSubType = subType;
    
    let template = '';
    const templates = STATE.documentTemplates || DEFAULT_STATE.documentTemplates;
    
    if (subType && templates[category] && typeof templates[category] === 'object') {
        template = templates[category][subType] || DEFAULT_STATE.documentTemplates[category][subType] || '';
    } else {
        template = templates[category] || DEFAULT_STATE.documentTemplates[category] || '';
    }
    
    const textarea = document.getElementById('doc_template_content');
    if (textarea) {
        textarea.value = template;
        originalDocTemplateContent = template;
        hasUnsavedDocChanges = false;
        updateUnsavedIndicator();
    }
}

function trackDocTemplateChanges() {
    const textarea = document.getElementById('doc_template_content');
    if (textarea) {
        hasUnsavedDocChanges = textarea.value !== originalDocTemplateContent;
        updateUnsavedIndicator();
    }
}

function updateUnsavedIndicator() {
    const indicator = document.getElementById('docTemplateUnsaved');
    if (indicator) {
        indicator.style.display = hasUnsavedDocChanges ? 'block' : 'none';
    }
}

function saveDocTemplate() {
    const textarea = document.getElementById('doc_template_content');
    if (!textarea) return;
    
    const content = textarea.value;
    
    // documentTemplates yoksa olu≈ütur
    if (!STATE.documentTemplates) {
        STATE.documentTemplates = JSON.parse(JSON.stringify(DEFAULT_STATE.documentTemplates));
    }
    
    if (currentDocTemplateSubType && typeof STATE.documentTemplates[currentDocTemplateCategory] === 'object') {
        STATE.documentTemplates[currentDocTemplateCategory][currentDocTemplateSubType] = content;
    } else {
        STATE.documentTemplates[currentDocTemplateCategory] = content;
    }
    
    saveState();
    originalDocTemplateContent = content;
    hasUnsavedDocChanges = false;
    updateUnsavedIndicator();
    toast('≈ûablon kaydedildi', 'success');
}

function resetDocTemplate() {
    confirmModal('Varsayƒ±lana D√∂n', 'Bu ≈üablonu varsayƒ±lan haline d√∂nd√ºrmek istediƒüinize emin misiniz?', () => {
        let defaultTemplate = '';
        
        if (currentDocTemplateSubType && typeof DEFAULT_STATE.documentTemplates[currentDocTemplateCategory] === 'object') {
            defaultTemplate = DEFAULT_STATE.documentTemplates[currentDocTemplateCategory][currentDocTemplateSubType];
        } else {
            defaultTemplate = DEFAULT_STATE.documentTemplates[currentDocTemplateCategory];
        }
        
        const textarea = document.getElementById('doc_template_content');
        if (textarea) {
            textarea.value = defaultTemplate;
            
            // STATE'i de g√ºncelle
            if (!STATE.documentTemplates) {
                STATE.documentTemplates = JSON.parse(JSON.stringify(DEFAULT_STATE.documentTemplates));
            }
            
            if (currentDocTemplateSubType && typeof STATE.documentTemplates[currentDocTemplateCategory] === 'object') {
                STATE.documentTemplates[currentDocTemplateCategory][currentDocTemplateSubType] = defaultTemplate;
            } else {
                STATE.documentTemplates[currentDocTemplateCategory] = defaultTemplate;
            }
            
            saveState();
            originalDocTemplateContent = defaultTemplate;
            hasUnsavedDocChanges = false;
            updateUnsavedIndicator();
            toast('Varsayƒ±lana d√∂nd√ºr√ºld√º', 'success');
        }
    }, 'warning');
}

function previewDocTemplate() {
    const content = document.getElementById('doc_template_content')?.value || '';
    
    // √ñrnek verilerle doldur
    const preview = content
        .replace(/\{\{PERSONEL\}\}/g, '√ñrnek Personel')
        .replace(/\{\{TC\}\}/g, '12345678901')
        .replace(/\{\{SUBE\}\}/g, '≈ûi≈üli (Merkez)')
        .replace(/\{\{TARIH\}\}/g, today())
        .replace(/\{\{SAAT\}\}/g, nowTime())
        .replace(/\{\{ACIKLAMA\}\}/g, '√ñrnek a√ßƒ±klama metni burada g√∂r√ºnecektir.')
        .replace(/\{\{DAYANAK\}\}/g, '25/II-e')
        .replace(/\{\{SURE\}\}/g, '1 i≈ü g√ºn√º')
        .replace(/\{\{POZISYON\}\}/g, 'Barista')
        .replace(/\{\{TUTAR\}\}/g, '500')
        .replace(/\{\{ODEME_SEKLI\}\}/g, 'maa≈ütan tek seferde mahsup edilmesini')
        .replace(/\{\{IHBAR_SURE\}\}/g, '4 hafta')
        .replace(/\{\{SON_GUN\}\}/g, today())
        .replace(/\{\{BASLAMA\}\}/g, today());
    
    const categoryTitles = {
        tutanak: {olay: 'OLAY TESPƒ∞T TUTANAƒûI', devamsizlik: 'DEVAMSIZLIK TUTANAƒûI', kasa: 'KASA A√áIƒûI TUTANAƒûI', imza: 'ƒ∞MZADAN ƒ∞MTƒ∞NA TUTANAƒûI'},
        savunma: 'SAVUNMA ƒ∞STEME YAZISI',
        fesih: {hakli: 'HAKLI FESƒ∞H Bƒ∞LDƒ∞Rƒ∞Mƒ∞', gecerli: 'GE√áERLƒ∞ FESƒ∞H Bƒ∞LDƒ∞Rƒ∞Mƒ∞', deneme: 'DENEME S√úRESƒ∞ FESHƒ∞'},
        borc: 'BOR√á ƒ∞KRAR VE MAHSUP MUVAFAKATNAMESƒ∞'
    };
    
    let title = '';
    if (currentDocTemplateSubType && typeof categoryTitles[currentDocTemplateCategory] === 'object') {
        title = categoryTitles[currentDocTemplateCategory][currentDocTemplateSubType];
    } else {
        title = categoryTitles[currentDocTemplateCategory];
    }
    
    const html = `<div class="doc">
        ${docHeader(title)}
        <div class="doc-section">${preview}</div>
        ${docSignature(
            {title: 'ƒ∞≈ûVEREN', name: '(KA≈ûE)', role: 'ƒ∞mza'},
            {title: 'PERSONEL', name: '√ñrnek Personel', role: 'ƒ∞mza'}
        )}
    </div>`;
    
    showPreview('≈ûablon √ñnizleme - ' + title, html);
}

function showUnsavedChangesModal(onSave, onDiscard) {
    openModal('Kaydedilmemi≈ü Deƒüi≈üiklikler', `
        <div class="modal-icon warning">‚ö†Ô∏è</div>
        <p class="modal-message">≈ûablonda kaydedilmemi≈ü deƒüi≈üiklikler var.<br>Ne yapmak istersiniz?</p>
    `, `
        <button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn" style="background:var(--red);color:#fff" onclick="closeModal();(${onDiscard.toString()})()">Kaydetme</button>
        <button class="btn btn-primary" onclick="closeModal();(${onSave.toString()})()">Kaydet</button>
    `);
}

// Sayfa deƒüi≈ütirirken kontrol
const originalGoTo = goTo;
goTo = function(page) {
    if (hasUnsavedDocChanges && currentPage === 'admin') {
        showUnsavedChangesModal(() => {
            saveDocTemplate();
            hasUnsavedDocChanges = false;
            originalGoTo(page);
        }, () => {
            hasUnsavedDocChanges = false;
            originalGoTo(page);
        });
        return;
    }
    originalGoTo(page);
};

// Tarayƒ±cƒ± kapatma/yenileme korumasƒ±
window.addEventListener('beforeunload', (e) => {
    if (hasUnsavedDocChanges) {
        e.preventDefault();
        e.returnValue = 'Kaydedilmemi≈ü deƒüi≈üiklikler var. Sayfadan ayrƒ±lmak istediƒüinize emin misiniz?';
        return e.returnValue;
    }
});

// ==================== PERSONEL Y√ñNETƒ∞Mƒ∞ ====================
async function loadPersonelList() {
    const container = document.getElementById('personelListContainer');
    if (!container) return;
    
    container.innerHTML = '<p style="color:var(--tx2);text-align:center;padding:20px">Y√ºkleniyor...</p>';
    
    try {
        const snapshot = await db.collection('personel').orderBy('name').get();
        
        if (snapshot.empty) {
            container.innerHTML = '<p style="color:var(--tx2);text-align:center;padding:40px">Hen√ºz personel kaydƒ± yok. "Yeni Personel" butonuna tƒ±klayarak ekleyin.</p>';
            return;
        }
        
        let html = '<div class="admin-list">';
        snapshot.forEach(doc => {
            const p = doc.data();
            html += `
                <div class="admin-list-item" style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:var(--bg3);border-radius:var(--radiusSm);margin-bottom:8px">
                    <div>
                        <strong style="color:var(--tx)">${p.name}</strong>
                        <div style="font-size:.8rem;color:var(--tx2)">${p.position || '-'} ‚Ä¢ ${p.branch || '-'}</div>
                        <div style="font-size:.75rem;color:var(--tx3)">TC: ${p.tc || '-'} | Tel: ${p.phone || '-'}</div>
                    </div>
                    <div style="display:flex;gap:8px">
                        <button class="btn btn-sm btn-ghost" onclick="editPersonel('${doc.id}')">‚úèÔ∏è</button>
                        <button class="btn btn-sm" style="background:var(--red);color:#fff" onclick="deletePersonel('${doc.id}')">üóëÔ∏è</button>
                    </div>
                </div>
            `;
        });
        html += '</div>';
        container.innerHTML = html;
    } catch (error) {
        console.error('Personel y√ºkleme hatasƒ±:', error);
        container.innerHTML = '<p style="color:var(--red);text-align:center;padding:20px">Y√ºkleme hatasƒ±!</p>';
    }
}

function showAddPersonelModal(editId = null) {
    const isEdit = !!editId;
    const title = isEdit ? 'Personel D√ºzenle' : 'Yeni Personel Ekle';
    
    const body = `
        <input type="hidden" id="personelEditId" value="${editId || ''}">
        <div class="form-grid">
            <div class="form-group"><label class="form-label">Ad Soyad *</label><input type="text" id="personelName" class="form-input" required></div>
            <div class="form-group"><label class="form-label">T.C. Kimlik No *</label><input type="text" id="personelTC" class="form-input" maxlength="11"></div>
            <div class="form-group"><label class="form-label">Telefon</label><input type="tel" id="personelPhone" class="form-input"></div>
            <div class="form-group"><label class="form-label">E-posta</label><input type="email" id="personelEmail" class="form-input"></div>
            <div class="form-group full"><label class="form-label">Adres</label><input type="text" id="personelAddress" class="form-input"></div>
            <div class="form-group"><label class="form-label">IBAN</label><input type="text" id="personelIBAN" class="form-input"></div>
            <div class="form-group"><label class="form-label">≈ûube</label><select id="personelBranch" class="form-select">${STATE.branches.map(b => `<option value="${b}">${b}</option>`).join('')}</select></div>
            <div class="form-group"><label class="form-label">Pozisyon</label><select id="personelPosition" class="form-select">${STATE.positions.map(p => `<option value="${p.name}">${p.name}</option>`).join('')}</select></div>
            <div class="form-group"><label class="form-label">ƒ∞≈üe Ba≈ülama</label><input type="date" id="personelStartDate" class="form-input"></div>
            <div class="form-group"><label class="form-label">Br√ºt √úcret (TL)</label><input type="number" id="personelSalary" class="form-input"></div>
        </div>
    `;
    
    const footer = `
        <button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn btn-primary" onclick="savePersonel()">üíæ Kaydet</button>
    `;
    
    showModal(title, body, footer);
    
    if (isEdit) {
        loadPersonelForEdit(editId);
    }
}

async function loadPersonelForEdit(id) {
    try {
        const doc = await db.collection('personel').doc(id).get();
        if (doc.exists) {
            const p = doc.data();
            document.getElementById('personelName').value = p.name || '';
            document.getElementById('personelTC').value = p.tc || '';
            document.getElementById('personelPhone').value = p.phone || '';
            document.getElementById('personelEmail').value = p.email || '';
            document.getElementById('personelAddress').value = p.address || '';
            document.getElementById('personelIBAN').value = p.iban || '';
            document.getElementById('personelBranch').value = p.branch || '';
            document.getElementById('personelPosition').value = p.position || '';
            document.getElementById('personelStartDate').value = p.startDate || '';
            document.getElementById('personelSalary').value = p.salary || '';
        }
    } catch (error) {
        console.error('Personel y√ºkleme hatasƒ±:', error);
    }
}

async function savePersonel() {
    const editId = document.getElementById('personelEditId').value;
    const name = document.getElementById('personelName').value.trim();
    const tc = document.getElementById('personelTC').value.trim();
    
    if (!name) {
        toast('Ad soyad zorunludur', 'error');
        return;
    }
    
    const data = {
        name,
        tc,
        phone: document.getElementById('personelPhone').value.trim(),
        email: document.getElementById('personelEmail').value.trim(),
        address: document.getElementById('personelAddress').value.trim(),
        iban: document.getElementById('personelIBAN').value.trim(),
        branch: document.getElementById('personelBranch').value,
        position: document.getElementById('personelPosition').value,
        startDate: document.getElementById('personelStartDate').value,
        salary: document.getElementById('personelSalary').value,
        updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
        updatedBy: currentUser?.username || 'admin'
    };
    
    try {
        if (editId) {
            await db.collection('personel').doc(editId).update(data);
            toast('Personel g√ºncellendi', 'success');
        } else {
            data.createdAt = firebase.firestore.FieldValue.serverTimestamp();
            await db.collection('personel').add(data);
            toast('Personel eklendi', 'success');
        }
        closeModal();
        loadPersonelList();
    } catch (error) {
        console.error('Kayƒ±t hatasƒ±:', error);
        toast('Kayƒ±t hatasƒ±!', 'error');
    }
}

function editPersonel(id) {
    showAddPersonelModal(id);
}

async function deletePersonel(id) {
    confirmModal('Personel Sil', 'Bu personeli silmek istediƒüinize emin misiniz?', async () => {
        try {
            await db.collection('personel').doc(id).delete();
            toast('Personel silindi', 'success');
            loadPersonelList();
        } catch (error) {
            console.error('Silme hatasƒ±:', error);
            toast('Silme hatasƒ±!', 'error');
        }
    });
}

function filterPersonel() {
    const search = document.getElementById('personelSearch').value.toLowerCase();
    const items = document.querySelectorAll('#personelListContainer .admin-list-item');
    items.forEach(item => {
        const text = item.textContent.toLowerCase();
        item.style.display = text.includes(search) ? 'flex' : 'none';
    });
}

// ==================== PUANTAJ Sƒ∞STEMƒ∞ ====================
let puantajRulesCache = [];

async function loadPuantajRules() {
    try {
        const snapshot = await db.collection('puantajRules').get();
        puantajRulesCache = [];
        snapshot.forEach(doc => {
            puantajRulesCache.push({ id: doc.id, ...doc.data() });
        });
    } catch (e) {
        console.error('Kural y√ºkleme hatasƒ±:', e);
    }
}

async function loadPuantaj() {
    const container = document.getElementById('puantajTableContainer');
    if (!container) return;
    
    const ay = document.getElementById('puantajAy').value;
    const yil = document.getElementById('puantajYil').value;
    const sube = document.getElementById('puantajSube').value;
    
    container.innerHTML = '<div style="text-align:center;padding:40px;color:var(--tx2)">Y√ºkleniyor...</div>';
    
    // Kurallarƒ± y√ºkle
    await loadPuantajRules();
    
    try {
        const personelSnapshot = await db.collection('personel').where('branch', '==', sube).get();
        
        if (personelSnapshot.empty) {
            container.innerHTML = '<div style="text-align:center;padding:60px;color:var(--tx2)"><div style="font-size:3rem;margin-bottom:16px;opacity:.5">üë•</div>Bu ≈üubede kayƒ±tlƒ± personel yok.</div>';
            return;
        }
        
        const puantajKey = `${yil}-${ay}`;
        const puantajSnapshot = await db.collection('puantaj').where('period', '==', puantajKey).where('branch', '==', sube).get();
        
        const puantajData = {};
        puantajSnapshot.forEach(doc => {
            const d = doc.data();
            if (!puantajData[d.personelId]) puantajData[d.personelId] = [];
            puantajData[d.personelId].push({ id: doc.id, ...d });
        });
        
        // Kural se√ßenekleri
        let ruleOptions = puantajRulesCache.map(r => 
            `<option value="${r.id}" data-score="${r.effect === 'prim_yok' ? 1 : (r.effect.includes('-') ? Math.max(1, 5 + parseInt(r.effect)) : 3)}">${r.title}</option>`
        ).join('');
        ruleOptions += '<option value="other">Diƒüer (Manuel)</option>';
        
        let html = '';
        const personelList = [];
        
        personelSnapshot.forEach(doc => {
            const p = doc.data();
            const puanlar = puantajData[doc.id] || [];
            const kayitSayisi = puanlar.length;
            const toplamPuan = puanlar.reduce((sum, x) => sum + (x.score || 0), 0);
            const ortalama = kayitSayisi > 0 ? (toplamPuan / kayitSayisi).toFixed(1) : '-';
            const dusukPuanSayisi = puanlar.filter(x => x.score === 1).length;
            const primDurumu = dusukPuanSayisi >= 5 ? 'prim_yok' : 'prim_var';
            
            personelList.push({ id: doc.id, name: p.name, tc: p.tc, position: p.position, ortalama, primDurumu, kayitSayisi, dusukPuanSayisi, puanlar });
        });
        
        // Puantaj cache'e personel listesini kaydet
        window.puantajPersonelCache = personelList;
        
        // Personel Kartlarƒ±
        html += `<div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px;margin-bottom:24px">`;
        personelList.forEach(p => {
            const statusColor = p.primDurumu === 'prim_yok' ? '#ff6b6b' : '#51cf66';
            const statusBg = p.primDurumu === 'prim_yok' ? 'rgba(255,107,107,.1)' : 'rgba(81,207,102,.1)';
            const stars = p.ortalama !== '-' ? '‚òÖ'.repeat(Math.round(parseFloat(p.ortalama))) + '‚òÜ'.repeat(5 - Math.round(parseFloat(p.ortalama))) : '‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ';
            
            html += `
                <div class="puantaj-card" style="background:var(--cardBg);border:1px solid var(--cardBorder);border-radius:16px;padding:20px;transition:all .2s;box-shadow:0 2px 12px rgba(0,0,0,.06)">
                    <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:12px">
                        <div>
                            <div style="font-weight:600;font-size:1.05rem;color:var(--tx)">${p.name}</div>
                            <div style="font-size:.8rem;color:var(--tx2)">${p.position || 'Personel'}</div>
                        </div>
                        <div style="background:${statusBg};color:${statusColor};padding:4px 10px;border-radius:20px;font-size:.75rem;font-weight:500">
                            ${p.primDurumu === 'prim_yok' ? '‚ö†Ô∏è Prim Yok' : '‚úì Prim Var'}
                        </div>
                    </div>
                    <div style="display:flex;gap:12px;margin-bottom:16px">
                        <div style="flex:1;background:var(--bg3);border-radius:12px;padding:12px;text-align:center">
                            <div style="font-size:1.6rem;font-weight:700;color:var(--accent)">${p.ortalama}</div>
                            <div style="font-size:.65rem;color:var(--tx2);text-transform:uppercase">Ortalama</div>
                        </div>
                        <div style="flex:1;background:var(--bg3);border-radius:12px;padding:12px;text-align:center">
                            <div style="font-size:1.6rem;font-weight:700;color:var(--tx)">${p.kayitSayisi}</div>
                            <div style="font-size:.65rem;color:var(--tx2);text-transform:uppercase">Kayƒ±t</div>
                        </div>
                        <div style="flex:1;background:var(--bg3);border-radius:12px;padding:12px;text-align:center">
                            <div style="font-size:1.6rem;font-weight:700;color:#e74c3c">${p.dusukPuanSayisi}</div>
                            <div style="font-size:.65rem;color:var(--tx2);text-transform:uppercase">D√º≈ü√ºk</div>
                        </div>
                    </div>
                    <div style="color:var(--yellow);font-size:1rem;margin-bottom:12px;letter-spacing:2px">${stars}</div>
                    <div style="display:flex;gap:8px">
                        <button class="btn btn-sm btn-primary" style="flex:1" onclick="showPuantajModal('${p.id}', '${p.name}')">
                            ‚≠ê Puan Ver
                        </button>
                        <button class="btn btn-sm" style="background:var(--bg4);border:none;color:var(--tx)" onclick="showPersonelAnaliz('${p.id}', '${p.name}')" title="Performans Analizi">
                            üìä Analiz
                        </button>
                    </div>
                </div>
            `;
        });
        html += `</div>`;
        
        // Ge√ßmi≈ü Puanlar
        html += `<div style="background:rgba(255,255,255,.02);border-radius:16px;padding:20px;border:1px solid rgba(255,255,255,.06)">`;
        html += `<div style="font-weight:600;margin-bottom:16px;color:var(--tx)">Bu Ay Verilen Puanlar</div>`;
        
        let hasRecords = false;
        personelList.forEach(p => {
            if (p.puanlar && p.puanlar.length > 0) {
                hasRecords = true;
                html += `<div style="margin-bottom:16px">`;
                html += `<div style="font-size:.85rem;font-weight:500;color:var(--tx);margin-bottom:8px">${p.name}</div>`;
                p.puanlar.forEach(puan => {
                    const tarih = puan.updatedAt?.toDate?.() ? puan.updatedAt.toDate().toLocaleDateString('tr-TR') : '-';
                    const stars = '‚òÖ'.repeat(puan.score) + '‚òÜ'.repeat(5 - puan.score);
                    const rule = puantajRulesCache.find(r => r.id === puan.ruleId);
                    html += `
                        <div style="display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:rgba(255,255,255,.03);border-radius:10px;margin-bottom:6px">
                            <div style="display:flex;align-items:center;gap:12px">
                                <span style="color:var(--yellow);letter-spacing:2px">${stars}</span>
                                <span style="color:var(--tx2);font-size:.85rem">${rule?.title || puan.note || '-'}</span>
                            </div>
                            <div style="display:flex;align-items:center;gap:12px">
                                <span style="color:var(--tx3);font-size:.75rem">${tarih}</span>
                                <button onclick="deletePuantajEntry('${puan.id}')" style="background:none;border:none;color:var(--red);cursor:pointer;font-size:.8rem;padding:4px 8px;border-radius:6px;transition:all .2s" onmouseover="this.style.background='rgba(255,107,107,.1)'" onmouseout="this.style.background='none'">Sil</button>
                            </div>
                        </div>
                    `;
                });
                html += `</div>`;
            }
        });
        
        if (!hasRecords) {
            html += `<div style="text-align:center;padding:40px;color:var(--tx3)">Bu ay hen√ºz puan verilmemi≈ü</div>`;
        }
        html += `</div>`;
        
        container.innerHTML = html;
    } catch (error) {
        console.error('Puantaj y√ºkleme hatasƒ±:', error);
        container.innerHTML = '<div style="text-align:center;padding:40px;color:var(--red)">Y√ºkleme hatasƒ±!</div>';
    }
}

function showPuantajModal(personelId, name) {
    let ruleOptions = puantajRulesCache.map(r => {
        const autoScore = r.effect === 'prim_yok' ? 1 : (r.effect.includes('-') ? Math.max(1, 5 + parseInt(r.effect)) : 3);
        return `<option value="${r.id}" data-score="${autoScore}">${r.title} (${autoScore}‚òÖ)</option>`;
    }).join('');
    
    const body = `
        <div style="padding:8px 0">
            <div style="margin-bottom:20px">
                <label style="display:block;font-size:.85rem;color:var(--tx2);margin-bottom:8px">Kural Se√ß</label>
                <select id="puantajRule" class="form-select" onchange="onPuantajRuleChange()" style="background:var(--bg3);color:var(--tx);border-color:var(--bg4)">
                    <option value="">-- Kural Se√ßin --</option>
                    ${ruleOptions}
                    <option value="other">Diƒüer (Manuel giri≈ü)</option>
                </select>
            </div>
            <div style="margin-bottom:20px">
                <label style="display:block;font-size:.85rem;color:var(--tx2);margin-bottom:8px">Puan</label>
                <div id="puantajStars" style="display:flex;gap:8px;justify-content:center">
                    ${[1,2,3,4,5].map(i => `<span class="puan-star" data-value="${i}" onclick="selectPuantajStar(${i})" style="font-size:2rem;color:var(--bg4);cursor:pointer;transition:all .2s">‚òÖ</span>`).join('')}
                </div>
            </div>
            <div id="puantajNoteContainer" style="display:none;margin-bottom:20px">
                <label style="display:block;font-size:.85rem;color:var(--tx2);margin-bottom:8px">A√ßƒ±klama</label>
                <input type="text" id="puantajNote" class="form-input" placeholder="Neden bu puan verildi?" style="background:var(--bg3);color:var(--tx);border-color:var(--bg4)">
            </div>
            <input type="hidden" id="puantajPersonelId" value="${personelId}">
            <input type="hidden" id="puantajScore" value="0">
        </div>
    `;
    
    showModal(`${name} - Puan Ver`, body, `
        <button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn btn-primary" onclick="savePuantajFromModal()">Kaydet</button>
    `);
}

// Dropdown'dan puan verme
function openPuantajFromDropdown() {
    const select = document.getElementById('puantajPersonelSelect');
    const personelId = select.value;
    const name = select.options[select.selectedIndex]?.dataset?.name;
    
    if (!personelId) {
        toast('L√ºtfen personel se√ßin', 'error');
        return;
    }
    
    showPuantajModal(personelId, name);
}

function onPuantajRuleChange() {
    const select = document.getElementById('puantajRule');
    const noteContainer = document.getElementById('puantajNoteContainer');
    const selectedOption = select.options[select.selectedIndex];
    
    if (select.value === 'other') {
        noteContainer.style.display = 'block';
    } else {
        noteContainer.style.display = 'none';
        if (selectedOption && selectedOption.dataset.score) {
            selectPuantajStar(parseInt(selectedOption.dataset.score));
        }
    }
}

function selectPuantajStar(value) {
    document.getElementById('puantajScore').value = value;
    document.querySelectorAll('.puan-star').forEach((star, i) => {
        star.style.color = i < value ? 'var(--yellow)' : 'var(--bg4)';
    });
}

async function savePuantajFromModal() {
    const personelId = document.getElementById('puantajPersonelId').value;
    const score = parseInt(document.getElementById('puantajScore').value);
    const ruleId = document.getElementById('puantajRule').value;
    const note = document.getElementById('puantajNote')?.value || '';
    
    if (score === 0) {
        toast('L√ºtfen puan se√ßin', 'error');
        return;
    }
    
    if (!ruleId) {
        toast('L√ºtfen bir kural se√ßin', 'error');
        return;
    }
    
    const ay = document.getElementById('puantajAy').value;
    const yil = document.getElementById('puantajYil').value;
    const sube = document.getElementById('puantajSube').value;
    const puantajKey = `${yil}-${ay}`;
    
    try {
        await db.collection('puantaj').add({
            personelId,
            period: puantajKey,
            branch: sube,
            score,
            ruleId: ruleId === 'other' ? null : ruleId,
            note: ruleId === 'other' ? note : '',
            updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
            updatedBy: currentUser?.username || 'admin'
        });
        
        toast('Puan kaydedildi', 'success');
        closeModal();
        loadPuantaj();
    } catch (error) {
        console.error('Puantaj kayƒ±t hatasƒ±:', error);
        toast('Kayƒ±t hatasƒ±!', 'error');
    }
}

function getMonthName(ay) {
    const aylar = ['', 'Ocak', '≈ûubat', 'Mart', 'Nisan', 'Mayƒ±s', 'Haziran', 'Temmuz', 'Aƒüustos', 'Eyl√ºl', 'Ekim', 'Kasƒ±m', 'Aralƒ±k'];
    return aylar[parseInt(ay)] || ay;
}

async function deletePuantajEntry(docId) {
    confirmModal('Puan Sil', 'Bu puanƒ± silmek istediƒüinize emin misiniz?', async () => {
        try {
            await db.collection('puantaj').doc(docId).delete();
            toast('Puan silindi', 'success');
            loadPuantaj();
        } catch (error) {
            console.error('Silme hatasƒ±:', error);
            toast('Silme hatasƒ±!', 'error');
        }
    });
}

function showPuantajRules() {
    db.collection('puantajRules').get().then(snapshot => {
        let html = '<div style="max-height:400px;overflow-y:auto">';
        snapshot.forEach(doc => {
            const r = doc.data();
            html += `
                <div style="padding:12px;background:var(--surface2);border-radius:var(--radiusSm);margin-bottom:8px">
                    <strong>${r.title}</strong>
                    <span style="float:right;background:${r.effect === 'prim_yok' ? 'var(--red)' : 'var(--yellow)'};color:#fff;padding:2px 8px;border-radius:4px;font-size:.75rem">${r.effect}</span>
                    <p style="font-size:.85rem;color:var(--txdark2);margin-top:4px">${r.desc}</p>
                </div>
            `;
        });
        html += '</div>';
        showModal('‚≠ê Puantaj Kurallarƒ±', html, '<button class="btn btn-ghost" onclick="closeModal()">Kapat</button>');
    });
}

// ==================== KULLANICI Y√ñNETƒ∞Mƒ∞ ====================
async function loadUserList() {
    const container = document.getElementById('userList');
    if (!container) return;
    
    try {
        const snapshot = await db.collection('users').get();
        
        if (snapshot.empty) {
            container.innerHTML = '<p style="color:var(--tx2);text-align:center;padding:20px">Kullanƒ±cƒ± bulunamadƒ±</p>';
            return;
        }
        
        let html = '';
        snapshot.forEach(doc => {
            const u = doc.data();
            const roleLabel = u.role === 'yonetici' ? 'üëë Y√∂netici' : u.role === 'bolge_muduru' ? 'üè¢ B√∂lge M√ºd√ºr√º' : 'üè™ Maƒüaza M√ºd√ºr√º';
            html += `
                <div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:var(--bg3);border-radius:var(--radiusSm);margin-bottom:8px">
                    <div>
                        <strong style="color:var(--tx)">${u.name || doc.id}</strong>
                        <span style="margin-left:8px;font-size:.75rem;background:var(--accentLight);color:var(--accent);padding:2px 8px;border-radius:4px">${roleLabel}</span>
                        <div style="font-size:.8rem;color:var(--tx2)">@${doc.id} ${u.branch !== 'all' ? '‚Ä¢ ' + u.branch : ''}</div>
                    </div>
                    <div style="display:flex;gap:8px">
                        ${doc.id !== 'admin' ? `
                            <button class="btn btn-sm btn-ghost" onclick="editUser('${doc.id}')">‚úèÔ∏è</button>
                            <button class="btn btn-sm" style="background:var(--red);color:#fff" onclick="deleteUser('${doc.id}')">üóëÔ∏è</button>
                        ` : '<span style="font-size:.75rem;color:var(--tx3)">Sistem hesabƒ±</span>'}
                    </div>
                </div>
            `;
        });
        container.innerHTML = html;
    } catch (error) {
        console.error('Kullanƒ±cƒ± y√ºkleme hatasƒ±:', error);
        container.innerHTML = '<p style="color:var(--red);text-align:center;padding:20px">Y√ºkleme hatasƒ±!</p>';
    }
}

function showAddUserModal(editId = null) {
    const isEdit = !!editId;
    const title = isEdit ? 'Kullanƒ±cƒ± D√ºzenle' : 'Yeni Kullanƒ±cƒ±';
    
    const body = `
        <input type="hidden" id="userEditId" value="${editId || ''}">
        <div class="form-grid">
            <div class="form-group"><label class="form-label">Kullanƒ±cƒ± Adƒ± *</label><input type="text" id="userName" class="form-input" ${isEdit ? 'readonly' : ''} placeholder="ornek.kullanici"></div>
            <div class="form-group"><label class="form-label">G√∂r√ºnen Ad</label><input type="text" id="userDisplayName" class="form-input" placeholder="Ahmet Yƒ±lmaz"></div>
            <div class="form-group"><label class="form-label">≈ûifre ${isEdit ? '(bo≈ü bƒ±rakƒ±lƒ±rsa deƒüi≈ümez)' : '*'}</label><input type="password" id="userPassword" class="form-input" minlength="6"></div>
            <div class="form-group">
                <label class="form-label">Rol *</label>
                <select id="userRole" class="form-select">
                    <option value="magaza_muduru">üè™ Maƒüaza M√ºd√ºr√º</option>
                    <option value="bolge_muduru">üè¢ B√∂lge M√ºd√ºr√º</option>
                    <option value="yonetici">üëë Y√∂netici</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">≈ûube Eri≈üimi</label>
                <select id="userBranch" class="form-select">
                    <option value="all">T√ºm ≈ûubeler</option>
                    ${STATE.branches.map(b => `<option value="${b}">${b}</option>`).join('')}
                </select>
            </div>
        </div>
    `;
    
    const footer = `
        <button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn btn-primary" onclick="saveUser()">üíæ Kaydet</button>
    `;
    
    showModal(title, body, footer);
    
    if (isEdit) {
        loadUserForEdit(editId);
    }
}

async function loadUserForEdit(id) {
    try {
        const doc = await db.collection('users').doc(id).get();
        if (doc.exists) {
            const u = doc.data();
            document.getElementById('userName').value = id;
            document.getElementById('userDisplayName').value = u.name || '';
            document.getElementById('userRole').value = u.role || 'magaza_muduru';
            document.getElementById('userBranch').value = u.branch || 'all';
        }
    } catch (error) {
        console.error('Kullanƒ±cƒ± y√ºkleme hatasƒ±:', error);
    }
}

async function saveUser() {
    const editId = document.getElementById('userEditId').value;
    const username = document.getElementById('userName').value.trim().toLowerCase();
    const password = document.getElementById('userPassword').value;
    const displayName = document.getElementById('userDisplayName').value.trim();
    const role = document.getElementById('userRole').value;
    const branch = document.getElementById('userBranch').value;
    
    if (!username) {
        toast('Kullanƒ±cƒ± adƒ± zorunludur', 'error');
        return;
    }
    
    if (!editId && !password) {
        toast('≈ûifre zorunludur', 'error');
        return;
    }
    
    if (password && password.length < 6) {
        toast('≈ûifre en az 6 karakter olmalƒ±', 'error');
        return;
    }
    
    const data = {
        name: displayName || username,
        role,
        branch,
        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
    };
    
    if (password) {
        data.password = password;
    }
    
    try {
        if (editId) {
            await db.collection('users').doc(editId).update(data);
            toast('Kullanƒ±cƒ± g√ºncellendi', 'success');
        } else {
            // Kullanƒ±cƒ± adƒ± zaten var mƒ± kontrol et
            const existing = await db.collection('users').doc(username).get();
            if (existing.exists) {
                toast('Bu kullanƒ±cƒ± adƒ± zaten kullanƒ±lƒ±yor', 'error');
                return;
            }
            data.username = username;
            data.createdAt = firebase.firestore.FieldValue.serverTimestamp();
            await db.collection('users').doc(username).set(data);
            toast('Kullanƒ±cƒ± olu≈üturuldu', 'success');
        }
        closeModal();
        loadUserList();
    } catch (error) {
        console.error('Kayƒ±t hatasƒ±:', error);
        toast('Kayƒ±t hatasƒ±!', 'error');
    }
}

function editUser(id) {
    showAddUserModal(id);
}

async function deleteUser(id) {
    if (id === 'admin') {
        toast('Admin hesabƒ± silinemez', 'error');
        return;
    }
    
    confirmModal('Kullanƒ±cƒ± Sil', 'Bu kullanƒ±cƒ±yƒ± silmek istediƒüinize emin misiniz?', async () => {
        try {
            await db.collection('users').doc(id).delete();
            toast('Kullanƒ±cƒ± silindi', 'success');
            loadUserList();
        } catch (error) {
            console.error('Silme hatasƒ±:', error);
            toast('Silme hatasƒ±!', 'error');
        }
    });
}

// ==================== ROL YETKƒ∞LERƒ∞ ====================
async function loadRolePermissions() {
    const role = document.getElementById('roleSelect').value;
    const container = document.getElementById('permissionsContainer');
    
    try {
        const doc = await db.collection('permissions').doc(role).get();
        const perms = doc.exists ? doc.data() : DEFAULT_PERMISSIONS[role];
        
        const pages = [
            { id: 'dashboard', label: 'Ana Sayfa' },
            { id: 'personel', label: 'Personel Listesi' },
            { id: 'puantaj', label: 'Puantaj' },
            { id: 'sozlesme', label: 'ƒ∞≈ü S√∂zle≈ümeleri' },
            { id: 'tutanak', label: 'Tutanak' },
            { id: 'savunma', label: 'Savunma ƒ∞steme' },
            { id: 'fesih', label: 'Fesih' },
            { id: 'borc', label: 'Bor√ß ƒ∞krar' },
            { id: 'avans', label: 'Avans Talebi' },
            { id: 'zimmet', label: 'Zimmet Formu' },
            { id: 'katalog', label: 'ƒ∞hlal Kataloƒüu' },
            { id: 'admin', label: 'Y√∂netim Paneli' },
            { id: 'admin_kullanicilar', label: '‚Äî Kullanƒ±cƒ±lar' },
            { id: 'admin_sablonlar', label: '‚Äî S√∂zle≈üme ≈ûablonlarƒ±' }
        ];
        
        let html = '<div style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px">';
        pages.forEach(p => {
            const checked = perms[p.id] !== false;
            html += `
                <label style="display:flex;align-items:center;gap:12px;padding:14px 16px;background:#1a1a1a;border:1px solid #333;border-radius:12px;cursor:pointer;transition:all .2s" onmouseover="this.style.background='#222';this.style.borderColor='#444'" onmouseout="this.style.background='#1a1a1a';this.style.borderColor='#333'">
                    <input type="checkbox" id="perm_${p.id}" ${checked ? 'checked' : ''} style="width:20px;height:20px;accent-color:#e07b39;cursor:pointer">
                    <span style="font-size:.9rem;color:#e0e0e0;font-weight:500">${p.label}</span>
                </label>
            `;
        });
        html += '</div>';
        
        container.innerHTML = html;
    } catch (error) {
        console.error('Yetki y√ºkleme hatasƒ±:', error);
    }
}

async function saveRolePermissions() {
    const role = document.getElementById('roleSelect').value;
    const perms = {};
    
    document.querySelectorAll('#permissionsContainer input[type="checkbox"]').forEach(cb => {
        const id = cb.id.replace('perm_', '');
        perms[id] = cb.checked;
    });
    
    try {
        await db.collection('permissions').doc(role).set(perms);
        toast('Yetkiler kaydedildi', 'success');
    } catch (error) {
        console.error('Yetki kayƒ±t hatasƒ±:', error);
        toast('Kayƒ±t hatasƒ±!', 'error');
    }
}

// ==================== PUANTAJ KURALLARI (ADMIN) ====================
async function loadPuantajRulesAdmin() {
    const container = document.getElementById('puantajRulesList');
    if (!container) return;
    
    try {
        const snapshot = await db.collection('puantajRules').get();
        
        if (snapshot.empty) {
            container.innerHTML = '<div style="text-align:center;padding:40px;color:var(--tx2)">Hen√ºz kural tanƒ±mlanmamƒ±≈ü</div>';
            return;
        }
        
        let html = '';
        snapshot.forEach(doc => {
            const r = doc.data();
            const effectColor = r.effect === 'prim_yok' ? '#ff6b6b' : '#fcc419';
            const effectBg = r.effect === 'prim_yok' ? 'rgba(255,107,107,.15)' : 'rgba(252,196,25,.15)';
            html += `
                <div style="display:flex;justify-content:space-between;align-items:center;padding:16px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06);border-radius:12px;margin-bottom:10px;transition:all .2s" onmouseover="this.style.background='rgba(255,255,255,.05)'" onmouseout="this.style.background='rgba(255,255,255,.03)'">
                    <div style="flex:1">
                        <div style="display:flex;align-items:center;gap:10px;margin-bottom:4px">
                            <span style="font-weight:600;color:var(--tx)">${r.title}</span>
                            <span style="font-size:.75rem;background:${effectBg};color:${effectColor};padding:3px 10px;border-radius:20px">${r.effect === 'prim_yok' ? 'Prim Kaybƒ±' : r.effect}</span>
                        </div>
                        <div style="font-size:.8rem;color:var(--tx3)">${r.desc || ''}</div>
                    </div>
                    <div style="display:flex;gap:6px">
                        <button onclick="editPuantajRule('${doc.id}')" style="background:rgba(255,255,255,.08);border:none;color:var(--tx);padding:8px 12px;border-radius:8px;cursor:pointer;font-size:.8rem;transition:all .2s" onmouseover="this.style.background='rgba(255,255,255,.12)'" onmouseout="this.style.background='rgba(255,255,255,.08)'">D√ºzenle</button>
                        <button onclick="deletePuantajRule('${doc.id}')" style="background:rgba(255,107,107,.1);border:none;color:#ff6b6b;padding:8px 12px;border-radius:8px;cursor:pointer;font-size:.8rem;transition:all .2s" onmouseover="this.style.background='rgba(255,107,107,.2)'" onmouseout="this.style.background='rgba(255,107,107,.1)'">Sil</button>
                    </div>
                </div>
            `;
        });
        container.innerHTML = html;
    } catch (error) {
        console.error('Kural y√ºkleme hatasƒ±:', error);
    }
}

function showAddPuantajRuleModal(editId = null) {
    const isEdit = !!editId;
    const title = isEdit ? 'Kural D√ºzenle' : 'Yeni Puantaj Kuralƒ±';
    
    const body = `
        <input type="hidden" id="ruleEditId" value="${editId || ''}">
        <div class="form-grid">
            <div class="form-group full"><label class="form-label">Kural Ba≈ülƒ±ƒüƒ± *</label><input type="text" id="ruleTitle" class="form-input" placeholder="√ñrn: 5x 1 Yƒ±ldƒ±z"></div>
            <div class="form-group">
                <label class="form-label">Etki *</label>
                <select id="ruleEffect" class="form-select">
                    <option value="-1">-1 Puan</option>
                    <option value="-2">-2 Puan</option>
                    <option value="-3">-3 Puan</option>
                    <option value="prim_yok">Prim Hakkƒ± Kaybƒ±</option>
                </select>
            </div>
            <div class="form-group full"><label class="form-label">A√ßƒ±klama</label><textarea id="ruleDesc" class="form-textarea" rows="2"></textarea></div>
        </div>
    `;
    
    const footer = `
        <button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn btn-primary" onclick="savePuantajRule()">üíæ Kaydet</button>
    `;
    
    showModal(title, body, footer);
    
    if (isEdit) {
        loadPuantajRuleForEdit(editId);
    }
}

async function loadPuantajRuleForEdit(id) {
    try {
        const doc = await db.collection('puantajRules').doc(id).get();
        if (doc.exists) {
            const r = doc.data();
            document.getElementById('ruleTitle').value = r.title || '';
            document.getElementById('ruleEffect').value = r.effect || '-1';
            document.getElementById('ruleDesc').value = r.desc || '';
        }
    } catch (error) {
        console.error('Kural y√ºkleme hatasƒ±:', error);
    }
}

async function savePuantajRule() {
    const editId = document.getElementById('ruleEditId').value;
    const title = document.getElementById('ruleTitle').value.trim();
    const effect = document.getElementById('ruleEffect').value;
    const desc = document.getElementById('ruleDesc').value.trim();
    
    if (!title) {
        toast('Ba≈ülƒ±k zorunludur', 'error');
        return;
    }
    
    const data = { title, effect, desc };
    
    try {
        if (editId) {
            await db.collection('puantajRules').doc(editId).update(data);
            toast('Kural g√ºncellendi', 'success');
        } else {
            const newId = 'R' + Date.now();
            await db.collection('puantajRules').doc(newId).set(data);
            toast('Kural eklendi', 'success');
        }
        closeModal();
        loadPuantajRules();
    } catch (error) {
        console.error('Kayƒ±t hatasƒ±:', error);
        toast('Kayƒ±t hatasƒ±!', 'error');
    }
}

function editPuantajRule(id) {
    showAddPuantajRuleModal(id);
}

async function deletePuantajRule(id) {
    confirmModal('Kural Sil', 'Bu kuralƒ± silmek istediƒüinize emin misiniz?', async () => {
        try {
            await db.collection('puantajRules').doc(id).delete();
            toast('Kural silindi', 'success');
            loadPuantajRules();
        } catch (error) {
            console.error('Silme hatasƒ±:', error);
            toast('Silme hatasƒ±!', 'error');
        }
    });
}

// ==================== ADMIN RENDER OVERRIDE ====================
const originalRenderAdminLists = renderAdminLists;
renderAdminLists = function() {
    originalRenderAdminLists();
    loadUserList();
    loadPuantajRulesAdmin();
    loadRolePermissions();
    
    // Y√∂netici deƒüilse ≈üirket bilgilerini ve ≈üifre deƒüi≈ütirmeyi gizle
    if (currentUser && currentUser.role !== 'yonetici') {
        const companyCard = document.getElementById('companySettingsCard');
        if (companyCard) companyCard.style.display = 'none';
        const passwordCard = document.getElementById('adminPasswordCard');
        if (passwordCard) passwordCard.style.display = 'none';
    } else {
        const passwordCard = document.getElementById('adminPasswordCard');
        if (passwordCard) passwordCard.style.display = 'block';
    }
};

// ==================== DARK MODE ====================
function toggleDarkMode() {
    const html = document.documentElement;
    const isDark = html.getAttribute('data-theme') === 'dark';
    const newTheme = isDark ? 'light' : 'dark';
    html.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    updateDarkModeIcon(newTheme);
}

function updateDarkModeIcon(theme) {
    const icon = document.getElementById('darkModeIcon');
    const btn = document.getElementById('darkModeBtn');
    if (!icon) return;
    if (theme === 'dark') {
        icon.innerHTML = '<circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>';
        if (btn) { btn.style.background = 'var(--bg3)'; btn.style.borderColor = 'var(--bg4)'; }
    } else {
        icon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>';
        if (btn) { btn.style.background = 'var(--surface2)'; btn.style.borderColor = 'var(--surface3)'; }
    }
}

// Dark mode init
(function() {
    const saved = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', saved);
    setTimeout(() => updateDarkModeIcon(saved), 100);
})();

// ==================== ADMIN ≈ûƒ∞FRE DEƒûƒ∞≈ûTƒ∞RME ====================
async function updateAdminCredentials() {
    const newUsername = document.getElementById('admin_new_username').value.trim();
    const newPassword = document.getElementById('admin_new_password').value;
    const confirmPassword = document.getElementById('admin_confirm_password').value;
    
    if (!newUsername && !newPassword) { toast('En az bir alan doldurun', 'error'); return; }
    if (newPassword && newPassword !== confirmPassword) { toast('≈ûifreler e≈üle≈ümiyor', 'error'); return; }
    if (newPassword && newPassword.length < 4) { toast('≈ûifre en az 4 karakter olmalƒ±', 'error'); return; }
    
    try {
        const updateData = {};
        if (newUsername) updateData.username = newUsername;
        if (newPassword) updateData.password = newPassword;
        await db.collection('users').doc('admin').update(updateData);
        toast('Giri≈ü bilgileri g√ºncellendi', 'success');
        document.getElementById('admin_new_username').value = '';
        document.getElementById('admin_new_password').value = '';
        document.getElementById('admin_confirm_password').value = '';
    } catch (e) { console.error(e); toast('G√ºncelleme hatasƒ±!', 'error'); }
}

// ==================== SHIFT Sƒ∞STEMƒ∞ ====================
// Shift tipleri ve saat aralƒ±klarƒ±
const SHIFT_TYPES = ['A√áILI≈û', 'ARA', 'KAPANI≈û', 'OFF', 'Y.ƒ∞'];
const COMMON_TIMES = [
    '10:00 - 19:00', '11:00 - 20:00', '12:00 - 21:00', '13:00 - 22:00', 
    '14:00 - 23:00', '15:00 - 00:00'
];

// Hafta label'ƒ±na yƒ±l ekle
function formatWeekWithYear(weekLabel, weekStart) {
    if (!weekStart) return weekLabel || 'Tarih Yok';
    const year = weekStart.split('-')[0];
    const label = weekLabel || weekStart;
    // Eƒüer label zaten yƒ±lƒ± i√ßeriyorsa ekleme
    if (label.includes(year) || label.includes('2024') || label.includes('2025') || label.includes('2026')) {
        return label;
    }
    return `${label} (${year})`;
}
// Part-time saat se√ßenekleri
const PARTTIME_START = ['10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00'];
const PARTTIME_END = ['14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00', '22:00', '23:00', '00:00'];

// Excel renkleri (ger√ßek Excel'den alƒ±ndƒ±)
const SHIFT_COLORS = {
    'A√áILI≈û':  { bg: '#99CCFF', border: '#6699CC', text: '#003366' },  // Mavi
    'ARA':     { bg: '#FFFF99', border: '#CCCC00', text: '#666600' },  // Sarƒ±
    'KAPANI≈û': { bg: '#FFC000', border: '#CC9900', text: '#663300' },  // Turuncu
    'OFF':     { bg: '#FF6666', border: '#CC0000', text: '#FFFFFF' },  // Kƒ±rmƒ±zƒ±
    'Y.ƒ∞':     { bg: '#D9EAD3', border: '#6AA84F', text: '#274E13' },  // Ye≈üil
    'TUZLA':   { bg: '#E6B8AF', border: '#CC4125', text: '#660000' },  // Kƒ±rmƒ±zƒ±msƒ±
    'B√ñLGE':   { bg: '#B4A7D6', border: '#8E7CC3', text: '#351C75' },  // Mor
    'RAPOR':   { bg: '#F4CCCC', border: '#E06666', text: '#990000' },  // A√ßƒ±k kƒ±rmƒ±zƒ±
    'default': { bg: '#F3F3F3', border: '#CCCCCC', text: '#333333' }   // Varsayƒ±lan
};

// Shift duyurularƒ± (Excel'den)
const SHIFT_ANNOUNCEMENTS = [
    { text: 'A√áILI≈û PERSONELƒ∞ ƒ∞≈ûE GE√á KALMAMALIDIR!', color: '#2E7D32', bg: '#C6EFCE' },
    { text: 'ƒ∞Zƒ∞N G√úN√ú YOKSA; YEMEK VE MOLA S√úRESƒ∞ SE√áƒ∞Mƒ∞ PERSONELƒ∞N KENDƒ∞ SE√áƒ∞Mƒ∞NDEDƒ∞R.', color: '#2E7D32', bg: '#C6EFCE' },
    { text: "SHIFT'E YILDIZ (*) SEMBOL√ú OLAN G√úNLER √ñZEL ƒ∞STEK G√úNLERƒ∞Dƒ∞R.", color: '#9C5700', bg: '#FFEB9C' },
    { text: 'KAPANI≈ûTAN A√áILI≈û GELECEK PERSONEL Y√ñNETƒ∞Cƒ∞LERƒ∞Nƒ∞ UYARACAK!', color: '#C00000', bg: '#FFC7CE' }
];

async function loadShiftList() {
    const subeSelect = document.getElementById('shiftSube');
    const haftaSelect = document.getElementById('shiftHafta');
    const historyContainer = document.getElementById('shiftHistoryContainer');
    
    if (!subeSelect || !haftaSelect) return;
    
    const selectedSube = subeSelect.value;
    if (!selectedSube) {
        haftaSelect.innerHTML = '<option value="">-- √ñnce Maƒüaza Se√ßin --</option>';
        if (historyContainer) historyContainer.innerHTML = '<p style="color:var(--tx2);text-align:center;padding:20px">Maƒüaza se√ßerek ge√ßmi≈ü shiftleri g√∂r√ºnt√ºleyin.</p>';
        return;
    }
    
    haftaSelect.innerHTML = '<option value="">‚è≥ Y√ºkleniyor...</option>';
    if (historyContainer) historyContainer.innerHTML = '<p style="color:var(--tx2);text-align:center;padding:20px">‚è≥ Y√ºkleniyor...</p>';
    
    try {
        const snapshot = await db.collection('shifts').get();
        const weeks = [];
        
        snapshot.forEach(doc => {
            const d = doc.data();
            if (d.branch === selectedSube) {
                weeks.push({ id: doc.id, ...d });
            }
        });
        
        // Tarihe g√∂re sƒ±rala (en yeni √∂nce)
        weeks.sort((a, b) => (b.weekStart || '').localeCompare(a.weekStart || ''));
        
        // Hafta dropdown'ƒ±nƒ± doldur
        if (weeks.length === 0) {
            haftaSelect.innerHTML = '<option value="">-- Kayƒ±tlƒ± shift yok --</option>';
        } else {
            haftaSelect.innerHTML = '<option value="">-- Hafta Se√ßin (' + weeks.length + ' kayƒ±t) --</option>';
            weeks.forEach(w => {
                const opt = document.createElement('option');
                opt.value = w.id;
                const cnt = Object.keys(w.personelShifts || {}).length;
                opt.textContent = formatWeekWithYear(w.weekLabel, w.weekStart) + ' (' + cnt + ' ki≈üi)';
                haftaSelect.appendChild(opt);
            });
        }
        
        // Ge√ßmi≈ü shiftleri g√∂ster
        renderShiftHistory(weeks, selectedSube);
        
    } catch (e) { 
        console.error('Shift y√ºkleme hatasƒ±:', e); 
        haftaSelect.innerHTML = '<option value="">-- Y√ºkleme hatasƒ± --</option>';
        if (historyContainer) historyContainer.innerHTML = '<p style="color:var(--red);text-align:center;padding:20px">‚ùå Y√ºkleme hatasƒ±: ' + e.message + '</p>';
        toast('Shift listesi y√ºklenemedi: ' + e.message, 'error');
    }
}

function renderShiftHistory(weeks, branch) {
    const container = document.getElementById('shiftHistoryContainer');
    if (!container) return;
    
    if (!weeks || weeks.length === 0) {
        container.innerHTML = `
            <div style="text-align:center;padding:40px;background:var(--bg2);border-radius:12px">
                <div style="font-size:3rem;margin-bottom:12px">üìã</div>
                <div style="color:var(--tx2);margin-bottom:8px">Bu maƒüazada hen√ºz shift kaydƒ± yok.</div>
                <button class="btn btn-primary btn-sm" onclick="showNewShiftModal()" style="margin-top:12px">+ ƒ∞lk Shift'i Olu≈ütur</button>
            </div>`;
        return;
    }
    
    // Yƒ±llara g√∂re grupla
    const byYear = {};
    weeks.forEach(w => {
        const year = w.weekStart ? w.weekStart.split('-')[0] : 'Bilinmiyor';
        if (!byYear[year]) byYear[year] = [];
        byYear[year].push(w);
    });
    
    // Yƒ±llarƒ± sƒ±rala (en yeni √∂nce)
    const years = Object.keys(byYear).sort((a, b) => b.localeCompare(a));
    
    let html = `
        <div style="margin-bottom:12px;display:flex;justify-content:space-between;align-items:center">
            <span style="font-size:.85rem;color:var(--tx2)">${branch}</span>
            <span style="font-size:.75rem;color:var(--tx2)">${weeks.length} toplam kayƒ±t</span>
        </div>
        <div style="max-height:500px;overflow-y:auto;padding-right:8px">`;
    
    years.forEach((year, yearIdx) => {
        const yearWeeks = byYear[year];
        const isCurrentYear = year === new Date().getFullYear().toString();
        
        html += `
            <div style="margin-bottom:16px">
                <div style="font-weight:700;color:${isCurrentYear ? 'var(--accent)' : 'var(--tx)'};font-size:.9rem;padding:8px 0;border-bottom:2px solid ${isCurrentYear ? 'var(--accent)' : 'var(--bg4)'};margin-bottom:10px;display:flex;align-items:center;gap:8px">
                    üìÖ ${year}
                    <span style="font-size:.7rem;font-weight:400;color:var(--tx2)">(${yearWeeks.length} hafta)</span>
                    ${isCurrentYear ? '<span style="font-size:.65rem;background:var(--accent);color:#fff;padding:2px 6px;border-radius:4px">G√úNCEL</span>' : ''}
                </div>
                <div style="display:grid;gap:8px">`;
        
        yearWeeks.forEach((w, idx) => {
            const cnt = Object.keys(w.personelShifts || {}).length;
            const isRecent = yearIdx === 0 && idx < 2;
            const borderColor = isRecent ? 'var(--accent)' : 'var(--bg4)';
            const badge = yearIdx === 0 && idx === 0 ? '<span style="font-size:.6rem;background:var(--accent);color:#fff;padding:2px 6px;border-radius:4px;margin-left:6px">EN YENƒ∞</span>' : '';
            
            html += `
                <div onclick="selectShift('${w.id}')" 
                     style="display:flex;justify-content:space-between;align-items:center;padding:12px 14px;background:var(--bg3);border:2px solid ${borderColor};border-radius:10px;cursor:pointer;transition:all .2s" 
                     onmouseover="this.style.borderColor='var(--accent)';this.style.transform='translateX(4px)'" 
                     onmouseout="this.style.borderColor='${borderColor}';this.style.transform='none'">
                    <div>
                        <div style="font-weight:600;color:var(--tx);font-size:.85rem;display:flex;align-items:center">
                            ${formatWeekWithYear(w.weekLabel, w.weekStart)}${badge}
                        </div>
                        <div style="font-size:.7rem;color:var(--tx2);margin-top:3px">
                            üë• ${cnt} personel
                            ${w.source === 'excel' ? ' ‚Ä¢ üìä Excel' : ''}
                        </div>
                    </div>
                    <div style="color:var(--accent);font-size:1.2rem;font-weight:bold">‚Ä∫</div>
                </div>`;
        });
        
        html += '</div></div>';
    });
    
    html += '</div>';
    container.innerHTML = html;
}

function selectShift(shiftId) {
    document.getElementById('shiftHafta').value = shiftId;
    loadShiftWeek();
}

async function loadShiftWeek() {
    const container = document.getElementById('shiftTableContainer');
    const haftaId = document.getElementById('shiftHafta').value;
    
    if (!haftaId) { 
        container.innerHTML = '<p style="color:var(--tx2);text-align:center;padding:40px">‚¨ÜÔ∏è Yukarƒ±dan hafta se√ßin veya yeni hafta olu≈üturun.</p>'; 
        return; 
    }
    
    container.innerHTML = '<p style="color:var(--tx2);text-align:center;padding:40px">‚è≥ Y√ºkleniyor...</p>';
    
    try {
        const doc = await db.collection('shifts').doc(haftaId).get();
        if (!doc.exists) { 
            container.innerHTML = '<p style="color:var(--red);text-align:center;padding:40px">‚ùå Shift bulunamadƒ±.</p>'; 
            return; 
        }
        renderShiftTable(doc.data(), haftaId);
    } catch (e) { 
        console.error('Shift y√ºkleme hatasƒ±:', e); 
        container.innerHTML = `<p style="color:var(--red);text-align:center;padding:40px">‚ùå Y√ºkleme hatasƒ±: ${e.message}</p>`; 
    }
}

function renderShiftTable(shift, docId) {
    const container = document.getElementById('shiftTableContainer');
    const days = ['Pazartesi', 'Salƒ±', '√áar≈üamba', 'Per≈üembe', 'Cuma', 'Cumartesi', 'Pazar'];
    const daysShort = ['Pzt', 'Sal', '√áar', 'Per', 'Cum', 'Cmt', 'Paz'];
    const personelShifts = shift.personelShifts || {};
    const personelNames = Object.keys(personelShifts);
    const specialRequests = shift.specialRequests || [];
    
    if (personelNames.length === 0) {
        container.innerHTML = `
            <div style="text-align:center;padding:40px">
                <div style="font-size:3rem;margin-bottom:16px">üìã</div>
                <div style="color:var(--tx2);margin-bottom:16px">Bu haftaya hen√ºz personel eklenmemi≈ü.</div>
                <button class="btn btn-primary" onclick="addPersonelToShift('${docId}')">+ Personel Ekle</button>
            </div>`;
        return;
    }
    
    // PDF i√ßin wrapper
    const weekLabelWithYear = formatWeekWithYear(shift.weekLabel, shift.weekStart);
    let html = `<div id="shiftTablePrint">
        <!-- PDF Header (print only) -->
        <div id="shiftPdfHeader" style="display:none;text-align:center;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid #e07b39">
            <h2 style="color:#e07b39;margin:0 0 8px 0;font-size:1.5rem">‚òï Moonberry Coffee - ${shift.branch}</h2>
            <p style="color:#666;margin:0;font-size:1rem">Shift Planƒ±: ${weekLabelWithYear}</p>
        </div>
        
        <!-- Shift Tablosu -->
        <div style="overflow-x:auto">
            <table id="shiftMainTable" style="width:100%;border-collapse:collapse;font-size:.85rem;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.1)">
                <thead>
                    <tr style="background:linear-gradient(135deg,#00B050,#008040)">
                        <th style="padding:14px 12px;text-align:left;color:#fff;font-weight:600;font-size:.9rem;border-right:1px solid rgba(255,255,255,.2);background:#00B050">
                            <div style="font-size:.75rem;opacity:.8">SHIFT</div>
                            <div>${weekLabelWithYear}</div>
                        </th>
                        ${days.map((d, i) => `<th style="padding:14px 8px;text-align:center;color:#000;font-weight:600;font-size:.8rem;background:#FFFF00;border:1px solid #ccc">${daysShort[i]}<br><span style="font-size:.65rem;font-weight:400">${d}</span></th>`).join('')}
                    </tr>
                </thead>
                <tbody>`;
    
    personelNames.forEach((name, idx) => {
        const p = personelShifts[name];
        const rowBg = idx % 2 === 0 ? '#fff' : '#f9f9f9';
        html += `<tr style="background:${rowBg}">
            <td style="padding:12px;font-weight:600;color:#333;border:1px solid #ddd;background:#FFFF00;min-width:100px">${name}</td>`;
        
        days.forEach((_, dayIdx) => {
            let val = p[dayIdx] || '';
            // **** gibi deƒüerleri OFF olarak g√∂ster
            const displayVal = formatShiftValue(val);
            const colors = getShiftColorExcel(val);
            
            html += `<td style="padding:4px;text-align:center;border:1px solid #ddd;min-width:85px">
                <select onchange="updateShiftCell('${docId}','${name}',${dayIdx},this.value)" 
                    style="width:100%;padding:8px 2px;border:2px solid ${colors.border};background:${colors.bg};color:${colors.text};border-radius:6px;font-size:.8rem;font-weight:600;cursor:pointer;text-align:center">
                    <option value="" style="background:#fff;color:#333">-</option>
                    <optgroup label="Shift Tipleri">
                        ${SHIFT_TYPES.map(t => `<option value="${t}" ${displayVal === t ? 'selected' : ''} style="background:${SHIFT_COLORS[t]?.bg || '#fff'};color:${SHIFT_COLORS[t]?.text || '#333'}">${t}</option>`).join('')}
                    </optgroup>
                    <optgroup label="Tam G√ºn">
                        ${COMMON_TIMES.map(t => `<option value="${t}" ${val === t ? 'selected' : ''}>${t}</option>`).join('')}
                    </optgroup>
                    ${val && !SHIFT_TYPES.includes(displayVal) && !COMMON_TIMES.includes(val) && !/^\*+$/.test(val) ? `<option value="${val}" selected style="background:${colors.bg};color:${colors.text};font-weight:700">${displayVal}</option>` : ''}
                    <optgroup label="Part-time">
                        <option value="parttime">‚è∞ Saat Se√ß...</option>
                    </optgroup>
                </select>
            </td>`;
        });
        html += '</tr>';
    });
    
    html += `</tbody></table></div>`;
    
    // Shift Kurallarƒ± b√∂l√ºm√º (d√ºzenlenebilir)
    html += `<div id="shiftAnnouncements" style="margin-top:20px;padding:16px;background:var(--bg2);border-radius:12px">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
            <div style="font-weight:600;color:var(--tx);font-size:.9rem">üì¢ Shift Kurallarƒ±</div>
            <button class="btn btn-ghost btn-sm" onclick="editShiftRules('${docId}')" style="padding:4px 10px;font-size:.75rem">‚úèÔ∏è D√ºzenle</button>
        </div>
        <div id="shiftRulesContent" style="display:flex;flex-direction:column;gap:8px">
            ${(shift.customRules || SHIFT_ANNOUNCEMENTS).map((a, i) => `
                <div style="padding:10px 14px;background:${a.bg};color:${a.color};border-radius:8px;font-size:.8rem;font-weight:500">
                    ${a.text}
                </div>
            `).join('')}
        </div>
        <div style="margin-top:12px;padding:10px 14px;background:#E3F2FD;color:#1565C0;border-radius:8px;font-size:.8rem">
            <strong>Saat Bilgisi:</strong> A√áILI≈û: 09:50-18:50 | KAPANI≈û: 16:30-01:30 | *YEMEK: 45DK, MOLA: 1x15DK
        </div>
    </div>`;
    
    // √ñzel ƒ∞stek G√ºnleri b√∂l√ºm√º
    html += `<div id="shiftSpecialRequests" style="margin-top:16px;padding:16px;background:#FFF8E1;border:2px solid #FFB300;border-radius:12px">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
            <div style="font-weight:600;color:#E65100;font-size:.9rem">‚≠ê √ñzel ƒ∞stek G√ºnleri</div>
            <button class="btn btn-primary btn-sm" onclick="addSpecialRequest('${docId}')" style="padding:4px 10px;font-size:.75rem;background:#FF9800">+ √ñzel ƒ∞stek Ekle</button>
        </div>
        <div style="font-size:.75rem;color:#795548;margin-bottom:10px;padding:6px 10px;background:rgba(0,0,0,.05);border-radius:6px">
            SHIFT'E YILDIZ (*) SEMBOL√ú OLAN G√úNLER √ñZEL ƒ∞STEK G√úNLERƒ∞Dƒ∞R.
        </div>
        <div id="specialRequestsList" style="display:flex;flex-direction:column;gap:8px">
            ${specialRequests.length > 0 ? specialRequests.map((r, i) => `
                <div style="display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:#fff;border-radius:8px;border:1px solid #FFB300">
                    <div>
                        <span style="font-weight:600;color:#E65100">${r.personel}</span>
                        <span style="color:#666;margin:0 8px">‚Üí</span>
                        <span style="color:#333">${r.reason}</span>
                        ${r.day ? `<span style="margin-left:8px;font-size:.75rem;color:#888">(${days[r.day] || r.day})</span>` : ''}
                    </div>
                    <button onclick="removeSpecialRequest('${docId}', ${i})" style="background:none;border:none;color:#E53935;cursor:pointer;font-size:1rem">√ó</button>
                </div>
            `).join('') : `
                <div style="text-align:center;padding:16px;color:#795548;font-size:.85rem">
                    Hen√ºz √∂zel istek eklenmemi≈ü.
                </div>
            `}
        </div>
    </div>`;
    
    html += `</div>`; // shiftTablePrint close
    
    // Kontrol butonlarƒ±
    html += `<div style="margin-top:20px;display:flex;gap:12px;flex-wrap:wrap;align-items:center">
        <button class="btn btn-ghost btn-sm" onclick="addPersonelToShift('${docId}')">üë§ Personel Ekle</button>
        <button class="btn btn-ghost btn-sm" onclick="removePersonelFromShift('${docId}')">üóëÔ∏è Personel √áƒ±kar</button>
        <div style="flex:1"></div>
        <button class="btn btn-ghost btn-sm" onclick="printShift()">üñ®Ô∏è Yazdƒ±r</button>
        <button class="btn btn-primary btn-sm" onclick="exportShiftPDF('${shift.branch}', '${weekLabelWithYear.replace(/'/g, "\\'")}')">üì• PDF ƒ∞ndir</button>
    </div>`;
    
    container.innerHTML = html;
}

// Excel renk sistemi
function getShiftColorExcel(val) {
    if (!val) return SHIFT_COLORS.default;
    
    // **** gibi deƒüerler OFF olarak kabul edilsin
    if (/^\*+$/.test(val.trim())) return SHIFT_COLORS.OFF;
    
    const upperVal = val.toUpperCase().trim();
    
    // Tam e≈üle≈üme
    if (SHIFT_COLORS[upperVal]) return SHIFT_COLORS[upperVal];
    
    // Kƒ±smi e≈üle≈üme
    if (upperVal.includes('A√áILI≈û') || upperVal.includes('ACILIS')) return SHIFT_COLORS.A√áILI≈û;
    if (upperVal.includes('KAPANI≈û') || (upperVal.includes('KAPANI≈û') || upperVal.includes('KAPANIS'))) return SHIFT_COLORS.KAPANI≈û;
    if (upperVal.includes('OFF') || upperVal.includes('ƒ∞Zƒ∞N') || upperVal.includes('IZIN')) return SHIFT_COLORS.OFF;
    if (upperVal.includes('ARA') || upperVal.includes('ARACI')) return SHIFT_COLORS.ARA;
    if (upperVal.includes('TUZLA')) return SHIFT_COLORS.TUZLA;
    if (upperVal.includes('B√ñLGE') || upperVal.includes('BOLGE')) return SHIFT_COLORS.B√ñLGE;
    if (upperVal.includes('RAPOR')) return SHIFT_COLORS.RAPOR;
    if (upperVal.includes('Y.ƒ∞') || upperVal.includes('YILLIK')) return SHIFT_COLORS['Y.ƒ∞'];
    
    // Saat formatƒ± (√∂rn: 10:00 - 19:00)
    if (/\d{1,2}:\d{2}/.test(val)) {
        return { bg: '#E8F4FD', border: '#4A90D9', text: '#1E5B94' }; // Mavi tonu
    }
    
    return SHIFT_COLORS.default;
}

// Shift deƒüerini g√∂r√ºnt√ºleme formatƒ±na √ßevir (**** -> OFF)
function formatShiftValue(val) {
    if (!val) return '';
    if (/^\*+$/.test(val.trim())) return 'OFF';
    return val;
}

async function updateShiftCell(docId, name, dayIdx, value) {
    if (value === 'parttime') { 
        // Part-time saat se√ßici modal
        const startOpts = PARTTIME_START.map(t => `<option value="${t}">${t}</option>`).join('');
        const endOpts = PARTTIME_END.map(t => `<option value="${t}">${t}</option>`).join('');
        
        showModal('Part-time Saat Se√ß', `
            <div style="padding:8px 0">
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px">
                    <div class="form-group">
                        <label class="form-label">Ba≈ülangƒ±√ß Saati</label>
                        <select id="parttimeStart" class="form-select" style="font-size:1rem">${startOpts}</select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Biti≈ü Saati</label>
                        <select id="parttimeEnd" class="form-select" style="font-size:1rem">${endOpts}</select>
                    </div>
                </div>
                <div style="margin-top:16px;padding:12px;background:#E3F2FD;border-radius:8px;font-size:.85rem;color:#1565C0">
                    üí° Part-time personel i√ßin 4-5 saatlik √ßalƒ±≈üma aralƒ±ƒüƒ± se√ßin
                </div>
            </div>
        `, `<button class="btn btn-ghost" onclick="closeModal();loadShiftWeek()">ƒ∞ptal</button>
            <button class="btn btn-primary" onclick="confirmParttime('${docId}','${name}',${dayIdx})">Kaydet</button>`);
        return;
    }
    try {
        const doc = await db.collection('shifts').doc(docId).get();
        const data = doc.data();
        if (!data.personelShifts) data.personelShifts = {};
        if (!data.personelShifts[name]) data.personelShifts[name] = {};
        data.personelShifts[name][dayIdx] = value;
        await db.collection('shifts').doc(docId).update({ personelShifts: data.personelShifts });
        toast('‚úì Kaydedildi', 'success');
    } catch (e) { 
        console.error(e); 
        toast('G√ºncelleme hatasƒ±!', 'error'); 
        loadShiftWeek();
    }
}

async function confirmParttime(docId, name, dayIdx) {
    const start = document.getElementById('parttimeStart').value;
    const end = document.getElementById('parttimeEnd').value;
    if (!start || !end) { toast('Saat se√ßin', 'error'); return; }
    const value = `${start} - ${end}`;
    closeModal();
    try {
        const doc = await db.collection('shifts').doc(docId).get();
        const data = doc.data();
        if (!data.personelShifts) data.personelShifts = {};
        if (!data.personelShifts[name]) data.personelShifts[name] = {};
        data.personelShifts[name][dayIdx] = value;
        await db.collection('shifts').doc(docId).update({ personelShifts: data.personelShifts });
        toast('‚úì Part-time saat kaydedildi', 'success');
        loadShiftWeek();
    } catch (e) { 
        console.error(e); 
        toast('G√ºncelleme hatasƒ±!', 'error'); 
    }
}

// Shift kurallarƒ±nƒ± d√ºzenleme
function editShiftRules(docId) {
    showModal('Shift Kurallarƒ±nƒ± D√ºzenle', `
        <div style="padding:8px 0">
            <div class="form-group" style="margin-bottom:12px">
                <label class="form-label">Kural 1 (Ye≈üil)</label>
                <input type="text" id="rule1" class="form-input" value="A√áILI≈û PERSONELƒ∞ ƒ∞≈ûE GE√á KALMAMALIDIR!">
            </div>
            <div class="form-group" style="margin-bottom:12px">
                <label class="form-label">Kural 2 (Ye≈üil)</label>
                <input type="text" id="rule2" class="form-input" value="ƒ∞Zƒ∞N G√úN√ú YOKSA; YEMEK VE MOLA S√úRESƒ∞ SE√áƒ∞Mƒ∞ PERSONELƒ∞N KENDƒ∞ SE√áƒ∞Mƒ∞NDEDƒ∞R.">
            </div>
            <div class="form-group" style="margin-bottom:12px">
                <label class="form-label">Kural 3 (Sarƒ±)</label>
                <input type="text" id="rule3" class="form-input" value="SHIFT'E YILDIZ (*) SEMBOL√ú OLAN G√úNLER √ñZEL ƒ∞STEK G√úNLERƒ∞Dƒ∞R.">
            </div>
            <div class="form-group">
                <label class="form-label">Kural 4 (Kƒ±rmƒ±zƒ±)</label>
                <input type="text" id="rule4" class="form-input" value="SHIFT Y√ñNETƒ∞Cƒ∞LERƒ∞Nƒ∞ZE Bƒ∞LGƒ∞ VERƒ∞LMEDEN HABERSƒ∞Z DEƒûƒ∞≈ûTƒ∞Rƒ∞LEMEZ!">
            </div>
        </div>
    `, `<button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn btn-primary" onclick="saveShiftRules('${docId}')">Kaydet</button>`);
}

async function saveShiftRules(docId) {
    const rules = [
        { text: document.getElementById('rule1').value, color: '#2E7D32', bg: '#C6EFCE' },
        { text: document.getElementById('rule2').value, color: '#2E7D32', bg: '#C6EFCE' },
        { text: document.getElementById('rule3').value, color: '#9C5700', bg: '#FFEB9C' },
        { text: document.getElementById('rule4').value, color: '#C00000', bg: '#FFC7CE' }
    ];
    closeModal();
    try {
        await db.collection('shifts').doc(docId).update({ customRules: rules });
        toast('Kurallar g√ºncellendi', 'success');
        loadShiftWeek();
    } catch (e) { console.error(e); toast('Hata!', 'error'); }
}

// √ñzel istek ekleme
function addSpecialRequest(docId) {
    const sube = document.getElementById('shiftSube').value;
    const days = ['Pazartesi', 'Salƒ±', '√áar≈üamba', 'Per≈üembe', 'Cuma', 'Cumartesi', 'Pazar'];
    const dayOpts = days.map((d, i) => `<option value="${i}">${d}</option>`).join('');
    
    showModal('√ñzel ƒ∞stek Ekle', `
        <div style="padding:8px 0">
            <div class="form-group" style="margin-bottom:12px">
                <label class="form-label">Personel Adƒ±</label>
                <input type="text" id="reqPersonel" class="form-input" placeholder="√ñrn: TUANA">
            </div>
            <div class="form-group" style="margin-bottom:12px">
                <label class="form-label">G√ºn (Opsiyonel)</label>
                <select id="reqDay" class="form-select">
                    <option value="">-- T√ºm hafta i√ßin --</option>
                    ${dayOpts}
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">ƒ∞stek Nedeni</label>
                <input type="text" id="reqReason" class="form-input" placeholder="√ñrn: OKUL, HASTANE, Aƒ∞LE vb.">
            </div>
        </div>
    `, `<button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn btn-primary" onclick="saveSpecialRequest('${docId}')">Ekle</button>`);
}

async function saveSpecialRequest(docId) {
    const personel = document.getElementById('reqPersonel').value.trim().toUpperCase();
    const day = document.getElementById('reqDay').value;
    const reason = document.getElementById('reqReason').value.trim().toUpperCase();
    
    if (!personel || !reason) { toast('Personel ve neden gerekli', 'error'); return; }
    
    closeModal();
    try {
        const doc = await db.collection('shifts').doc(docId).get();
        const data = doc.data();
        const requests = data.specialRequests || [];
        requests.push({ personel, day: day !== '' ? parseInt(day) : null, reason });
        await db.collection('shifts').doc(docId).update({ specialRequests: requests });
        toast('√ñzel istek eklendi', 'success');
        loadShiftWeek();
    } catch (e) { console.error(e); toast('Hata!', 'error'); }
}

async function removeSpecialRequest(docId, idx) {
    if (!confirm('Bu √∂zel isteƒüi silmek istediƒüinize emin misiniz?')) return;
    try {
        const doc = await db.collection('shifts').doc(docId).get();
        const data = doc.data();
        const requests = data.specialRequests || [];
        requests.splice(idx, 1);
        await db.collection('shifts').doc(docId).update({ specialRequests: requests });
        toast('√ñzel istek silindi', 'success');
        loadShiftWeek();
    } catch (e) { console.error(e); toast('Hata!', 'error'); }
}

async function addPersonelToShift(docId) {
    // Maƒüazadaki personel listesini getir
    const sube = document.getElementById('shiftSube').value;
    try {
        const pSnap = await db.collection('personel').get();
        const personelList = [];
        pSnap.forEach(d => {
            const p = d.data();
            if (p.branch === sube) personelList.push(p.name);
        });
        
        if (personelList.length === 0) {
            const name = prompt('Personel adƒ± girin:');
            if (name) await doAddPersonel(docId, name);
            return;
        }
        
        // Modal ile se√ßim
        const opts = personelList.map(n => `<option value="${n}">${n}</option>`).join('');
        showModal('Personel Ekle', `
            <div style="padding:8px 0">
                <div class="form-group" style="margin-bottom:16px">
                    <label class="form-label">Kayƒ±tlƒ± Personel</label>
                    <select id="addPersonelSelect" class="form-select">${opts}</select>
                </div>
                <div style="text-align:center;color:var(--tx2);margin:12px 0">- veya -</div>
                <div class="form-group">
                    <label class="form-label">Manuel Giri≈ü</label>
                    <input type="text" id="addPersonelManual" class="form-input" placeholder="Personel adƒ±">
                </div>
            </div>
        `, `<button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
            <button class="btn btn-primary" onclick="confirmAddPersonel('${docId}')">Ekle</button>`);
    } catch (e) {
        const name = prompt('Personel adƒ± girin:');
        if (name) await doAddPersonel(docId, name);
    }
}

async function confirmAddPersonel(docId) {
    const select = document.getElementById('addPersonelSelect');
    const manual = document.getElementById('addPersonelManual');
    const name = manual.value.trim() || select.value;
    if (!name) { toast('Personel se√ßin veya girin', 'error'); return; }
    closeModal();
    await doAddPersonel(docId, name);
}

async function doAddPersonel(docId, name) {
    try {
        const doc = await db.collection('shifts').doc(docId).get();
        const data = doc.data();
        if (!data.personelShifts) data.personelShifts = {};
        if (data.personelShifts[name]) {
            toast('Bu personel zaten mevcut', 'error');
            return;
        }
        data.personelShifts[name] = {};
        await db.collection('shifts').doc(docId).update({ personelShifts: data.personelShifts });
        toast('Personel eklendi', 'success');
        loadShiftWeek();
    } catch (e) { console.error(e); toast('Ekleme hatasƒ±!', 'error'); }
}

async function removePersonelFromShift(docId) {
    try {
        const doc = await db.collection('shifts').doc(docId).get();
        const data = doc.data();
        const names = Object.keys(data.personelShifts || {});
        if (names.length === 0) { toast('Silinecek personel yok', 'error'); return; }
        
        const opts = names.map(n => `<option value="${n}">${n}</option>`).join('');
        showModal('Personel √áƒ±kar', `
            <div style="padding:8px 0">
                <div class="form-group">
                    <label class="form-label">√áƒ±karƒ±lacak Personel</label>
                    <select id="removePersonelSelect" class="form-select">${opts}</select>
                </div>
                <div style="margin-top:12px;padding:12px;background:rgba(231,76,60,.1);border-radius:8px;color:var(--red);font-size:.85rem">
                    ‚ö†Ô∏è Bu i≈ülem geri alƒ±namaz. Personelin t√ºm shift verileri silinecek.
                </div>
            </div>
        `, `<button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
            <button class="btn btn-primary" style="background:var(--red)" onclick="confirmRemovePersonel('${docId}')">√áƒ±kar</button>`);
    } catch (e) { console.error(e); }
}

async function confirmRemovePersonel(docId) {
    const name = document.getElementById('removePersonelSelect').value;
    if (!name) return;
    closeModal();
    try {
        const doc = await db.collection('shifts').doc(docId).get();
        const data = doc.data();
        delete data.personelShifts[name];
        await db.collection('shifts').doc(docId).update({ personelShifts: data.personelShifts });
        toast('Personel √ßƒ±karƒ±ldƒ±', 'success');
        loadShiftWeek();
    } catch (e) { console.error(e); toast('Silme hatasƒ±!', 'error'); }
}

function showNewShiftModal() {
    const userBranch = currentUser?.branch;
    const isAdmin = currentUser?.role === 'yonetici' || currentUser?.role === 'bolge_muduru';
    let branches = STATE.branches || [];
    if (!isAdmin && userBranch) branches = branches.filter(b => b === userBranch);
    
    const selectedSube = document.getElementById('shiftSube').value || branches[0] || '';
    const opts = branches.map(s => `<option value="${s}" ${s === selectedSube ? 'selected' : ''}>${s}</option>`).join('');
    
    // Hafta se√ßenekleri (son 8 hafta + bu hafta + gelecek 4 hafta)
    const weekOpts = [];
    const today = new Date();
    for (let i = -8; i <= 4; i++) {
        const monday = new Date(today);
        // Pazartesi'yi bul (getDay: 0=Pazar, 1=Pazartesi...)
        const dayOfWeek = monday.getDay();
        const diff = dayOfWeek === 0 ? -6 : 1 - dayOfWeek;
        monday.setDate(monday.getDate() + diff + (i * 7));
        
        const sunday = new Date(monday);
        sunday.setDate(monday.getDate() + 6);
        
        const label = `${monday.toLocaleDateString('tr-TR', { day: 'numeric', month: 'long' })} - ${sunday.toLocaleDateString('tr-TR', { day: 'numeric', month: 'long' })}`;
        const monStr = monday.toISOString().split('T')[0];
        const sunStr = sunday.toISOString().split('T')[0];
        const isCurrent = i === 0;
        
        weekOpts.push(`<option value="${monStr}|${sunStr}" ${isCurrent ? 'selected' : ''}>${label}${isCurrent ? ' ‚úì Bu Hafta' : ''}</option>`);
    }
    
    showModal('Yeni Shift Haftasƒ±', `
        <div style="padding:8px 0">
            <div class="form-group" style="margin-bottom:16px">
                <label class="form-label">Maƒüaza</label>
                <select id="newShiftSube" class="form-select">${opts}</select>
            </div>
            <div class="form-group" style="margin-bottom:16px">
                <label class="form-label">Hafta (Pazartesi - Pazar)</label>
                <select id="newShiftWeekSelect" class="form-select">${weekOpts.join('')}</select>
            </div>
            <div class="form-group">
                <label style="display:flex;align-items:center;gap:8px;cursor:pointer">
                    <input type="checkbox" id="newShiftCopy" checked>
                    <span>√ñnceki haftadan personel listesini kopyala</span>
                </label>
            </div>
        </div>
    `, `<button class="btn btn-ghost" onclick="closeModal()">ƒ∞ptal</button>
        <button class="btn btn-primary" onclick="createNewShift()">Olu≈ütur</button>`);
}

async function createNewShift() {
    const sube = document.getElementById('newShiftSube').value;
    const weekVal = document.getElementById('newShiftWeekSelect').value;
    const copy = document.getElementById('newShiftCopy').checked;
    
    if (!sube || !weekVal) { toast('T√ºm alanlarƒ± doldurun', 'error'); return; }
    
    const [start, end] = weekVal.split('|');
    
    try {
        // Aynƒ± hafta var mƒ± kontrol
        const existingSnap = await db.collection('shifts').get();
        let exists = false;
        existingSnap.forEach(doc => {
            const d = doc.data();
            if (d.branch === sube && d.weekStart === start) exists = true;
        });
        
        if (exists) {
            toast('Bu hafta zaten mevcut!', 'error');
            return;
        }
        
        let ps = {};
        
        // √ñnceki haftadan kopyala
        if (copy) {
            const allShifts = [];
            existingSnap.forEach(doc => {
                const d = doc.data();
                if (d.branch === sube) allShifts.push(d);
            });
            allShifts.sort((a, b) => (b.weekStart || '').localeCompare(a.weekStart || ''));
            
            if (allShifts.length > 0) {
                Object.keys(allShifts[0].personelShifts || {}).forEach(n => ps[n] = {});
            }
        }
        
        // Personel yoksa maƒüazadaki personelden al
        if (Object.keys(ps).length === 0) {
            const pSnap = await db.collection('personel').get();
            pSnap.forEach(d => {
                const p = d.data();
                if (p.branch === sube) ps[p.name] = {};
            });
        }
        
        const label = `${new Date(start).toLocaleDateString('tr-TR', {day:'numeric', month:'long'})} - ${new Date(end).toLocaleDateString('tr-TR', {day:'numeric', month:'long'})}`;
        
        const newDoc = await db.collection('shifts').add({ 
            branch: sube, 
            weekStart: start, 
            weekEnd: end, 
            weekLabel: label, 
            personelShifts: ps, 
            createdAt: firebase.firestore.FieldValue.serverTimestamp(), 
            createdBy: currentUser?.username || 'admin' 
        });
        
        toast('Yeni hafta olu≈üturuldu!', 'success');
        closeModal();
        
        // Maƒüazayƒ± se√ß ve listeyi yenile
        document.getElementById('shiftSube').value = sube;
        await loadShiftList();
        
        // Yeni haftayƒ± se√ß
        setTimeout(() => {
            document.getElementById('shiftHafta').value = newDoc.id;
            loadShiftWeek();
        }, 300);
        
    } catch (e) { 
        console.error('Shift olu≈üturma hatasƒ±:', e); 
        toast('Olu≈üturma hatasƒ±: ' + e.message, 'error'); 
    }
}

function exportShiftPDF(branch, weekLabel) {
    const table = document.getElementById('shiftMainTable');
    if (!table) { toast('√ñnce bir shift se√ßin', 'error'); return; }
    
    toast('PDF olu≈üturuluyor...', 'info');
    
    // √ñzel istekleri al
    const specialRequestsDiv = document.querySelector('#shiftTableContainer [style*="FFF8E1"]');
    let specialRequests = [];
    if (specialRequestsDiv) {
        specialRequestsDiv.querySelectorAll('[style*="F57C00"]').forEach(el => {
            const text = el.textContent.trim();
            if (text && !text.includes('eklenmemi≈ü')) {
                specialRequests.push(text);
            }
        });
    }
    
    // Tablo verilerini topla
    const rows = table.querySelectorAll('tbody tr');
    const data = [];
    rows.forEach(row => {
        const cells = row.querySelectorAll('td');
        const rowData = [];
        cells.forEach((cell, idx) => {
            if (idx === 0) {
                rowData.push({ text: cell.textContent.trim(), bg: '#FFFF00', color: '#000' });
            } else {
                const select = cell.querySelector('select');
                let val = select ? select.value : cell.textContent.trim();
                if (/^\*+$/.test(val)) val = 'OFF';
                const colors = getShiftColorExcel(val);
                rowData.push({ text: val || '-', bg: colors.bg, color: colors.text });
            }
        });
        data.push(rowData);
    });
    
    // PDF i√ßin element olu≈ütur
    const pdfContent = document.createElement('div');
    pdfContent.style.cssText = 'width:1000px;padding:24px;background:#fff;font-family:Inter,Arial,sans-serif;';
    
    pdfContent.innerHTML = `
        <div style="text-align:center;margin-bottom:24px;padding-bottom:16px;border-bottom:3px solid #e07b39">
            <h1 style="color:#e07b39;margin:0 0 8px 0;font-size:22px;font-weight:700">‚òï Moonberry Coffee - ${branch}</h1>
            <p style="color:#555;margin:0;font-size:14px">Shift Planƒ±: ${weekLabel}</p>
        </div>
        <table style="width:100%;border-collapse:collapse;font-size:11px">
            <thead>
                <tr>
                    <th style="padding:10px;background:#00B050;color:#fff;border:1px solid #ddd;text-align:left;font-weight:600">SHIFT<br>${weekLabel}</th>
                    <th style="padding:10px;background:#FFFF00;color:#000;border:1px solid #ddd;text-align:center;font-weight:600">Pzt</th>
                    <th style="padding:10px;background:#FFFF00;color:#000;border:1px solid #ddd;text-align:center;font-weight:600">Sal</th>
                    <th style="padding:10px;background:#FFFF00;color:#000;border:1px solid #ddd;text-align:center;font-weight:600">√áar</th>
                    <th style="padding:10px;background:#FFFF00;color:#000;border:1px solid #ddd;text-align:center;font-weight:600">Per</th>
                    <th style="padding:10px;background:#FFFF00;color:#000;border:1px solid #ddd;text-align:center;font-weight:600">Cum</th>
                    <th style="padding:10px;background:#FFFF00;color:#000;border:1px solid #ddd;text-align:center;font-weight:600">Cmt</th>
                    <th style="padding:10px;background:#FFFF00;color:#000;border:1px solid #ddd;text-align:center;font-weight:600">Paz</th>
                </tr>
            </thead>
            <tbody>
                ${data.map((row, i) => `
                    <tr style="background:${i % 2 === 0 ? '#fff' : '#f9f9f9'}">
                        ${row.map((cell, idx) => `<td style="padding:8px;${idx === 0 ? 'text-align:left;' : 'text-align:center;'}border:1px solid #ddd;background:${cell.bg};color:${cell.color};font-weight:600;font-size:10px">${cell.text}</td>`).join('')}
                    </tr>
                `).join('')}
            </tbody>
        </table>
        
        <!-- 4 Kural -->
        <div style="margin-top:16px;display:flex;flex-wrap:wrap;gap:8px">
            <div style="padding:8px 12px;background:#C6EFCE;color:#2E7D32;border-radius:6px;font-size:10px;font-weight:500">A√áILI≈û PERSONELƒ∞ ƒ∞≈ûE GE√á KALMAMALIDIR!</div>
            <div style="padding:8px 12px;background:#FFEB9C;color:#9C5700;border-radius:6px;font-size:10px;font-weight:500">(*) SEMBOL√ú √ñZEL ƒ∞STEK G√úNLERƒ∞Dƒ∞R</div>
            <div style="padding:8px 12px;background:#BDE0FE;color:#1565C0;border-radius:6px;font-size:10px;font-weight:500">A√áILI≈û: 09:50-18:50 | KAPANI≈û: 16:30-01:30</div>
            <div style="padding:8px 12px;background:#E8F4FD;color:#1976D2;border-radius:6px;font-size:10px;font-weight:500">*YEMEK: 45DK, MOLA: 1x15DK</div>
        </div>
        
        <!-- √ñzel ƒ∞stekler -->
        <div style="margin-top:16px;padding:14px;background:#FFF8E1;border-radius:8px;border:1px solid #FFE082">
            <div style="font-weight:600;color:#F57C00;font-size:11px;margin-bottom:10px">üìå √ñzel ƒ∞stek G√ºnleri</div>
            ${specialRequests.length > 0 
                ? `<div style="display:flex;flex-wrap:wrap;gap:6px">${specialRequests.map(r => `<span style="background:#FFECB3;color:#E65100;padding:5px 10px;border-radius:4px;font-size:10px;font-weight:500">${r}</span>`).join('')}</div>`
                : '<div style="color:#9E9E9E;font-style:italic;font-size:10px;padding:8px;background:#fff;border-radius:4px;text-align:center">Bu hafta i√ßin √∂zel istek yok</div>'
            }
        </div>
    `;
    
    document.body.appendChild(pdfContent);
    
    const filename = `Shift_${branch.replace(/\s/g, '_')}_${weekLabel.replace(/\s/g, '_').replace(/[^\w-]/g, '')}.pdf`;
    
    html2pdf().set({
        margin: [8, 8, 8, 8],
        filename: filename,
        image: { type: 'jpeg', quality: 0.95 },
        html2canvas: { 
            scale: 2, 
            useCORS: true,
            logging: false,
            backgroundColor: '#ffffff',
            windowWidth: 1000
        },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'landscape' }
    }).from(pdfContent).save().then(() => {
        document.body.removeChild(pdfContent);
        toast('PDF indirildi! ‚úì', 'success');
    }).catch(err => {
        console.error('PDF hatasƒ±:', err);
        document.body.removeChild(pdfContent);
        toast('PDF hatasƒ±: ' + err.message, 'error');
    });
}

// Yazdƒ±r fonksiyonu
function printShift() {
    const table = document.getElementById('shiftMainTable');
    if (!table) { toast('√ñnce bir shift se√ßin', 'error'); return; }
    
    // Tablo verilerini topla
    const rows = table.querySelectorAll('tbody tr');
    const branch = document.getElementById('shiftSube').value;
    const weekLabel = document.getElementById('shiftHafta').selectedOptions[0]?.textContent || '';
    
    // √ñzel istekleri al (mevcut shift'ten)
    const specialRequestsDiv = document.querySelector('#shiftTableContainer [style*="FFF8E1"]');
    let specialRequests = [];
    if (specialRequestsDiv) {
        specialRequestsDiv.querySelectorAll('[style*="F57C00"]').forEach(el => {
            const text = el.textContent.trim();
            if (text && !text.includes('eklenmemi≈ü')) {
                specialRequests.push(text);
            }
        });
    }
    
    const data = [];
    rows.forEach(row => {
        const cells = row.querySelectorAll('td');
        const rowData = [];
        cells.forEach((cell, idx) => {
            if (idx === 0) {
                rowData.push({ text: cell.textContent.trim(), bg: '#FFFF00', color: '#000' });
            } else {
                const select = cell.querySelector('select');
                let val = select ? select.value : cell.textContent.trim();
                if (/^\*+$/.test(val)) val = 'OFF';
                const colors = getShiftColorExcel(val);
                rowData.push({ text: val || '-', bg: colors.bg, color: colors.text });
            }
        });
        data.push(rowData);
    });
    
    const printWindow = window.open('', '_blank');
    printWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
            <title>Shift - ${branch} - ${weekLabel}</title>
            <style>
                @page { size: A4 landscape; margin: 10mm; }
                * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; color-adjust: exact !important; }
                body { font-family: Arial, sans-serif; padding: 16px; background: #fff; }
                h1 { color: #e07b39; font-size: 18px; margin-bottom: 4px; }
                .subtitle { color: #666; font-size: 12px; margin-bottom: 16px; }
                table { width: 100%; border-collapse: collapse; font-size: 11px; margin-bottom: 16px; }
                th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
                th { background: #FFFF00 !important; font-weight: 600; }
                th:first-child { background: #00B050 !important; color: #fff !important; text-align: left; }
                .rules-box { margin-top: 12px; }
                .rule { display: inline-block; padding: 6px 10px; margin: 3px; font-size: 10px; border-radius: 4px; }
                .rule1 { background: #C6EFCE !important; color: #2E7D32 !important; }
                .rule2 { background: #FFEB9C !important; color: #9C5700 !important; }
                .rule3 { background: #BDE0FE !important; color: #1565C0 !important; }
                .rule4 { background: #E8F4FD !important; color: #1976D2 !important; }
                .requests-box { margin-top: 12px; padding: 12px; background: #FFF8E1 !important; border-radius: 8px; border: 1px solid #FFE082; }
                .requests-title { font-weight: 600; color: #F57C00; font-size: 11px; margin-bottom: 8px; }
                .request-item { background: #FFECB3 !important; color: #E65100 !important; padding: 4px 8px; border-radius: 4px; display: inline-block; margin: 2px; font-size: 10px; }
                .empty-requests { color: #9E9E9E; font-style: italic; font-size: 10px; }
            </style>
        </head>
        <body>
            <h1>‚òï Moonberry Coffee - ${branch}</h1>
            <div class="subtitle">Shift Planƒ±: ${weekLabel}</div>
            <table>
                <thead>
                    <tr>
                        <th style="background:#00B050 !important; color:#fff !important;">SHIFT<br>${weekLabel}</th>
                        <th>Pzt</th><th>Sal</th><th>√áar</th><th>Per</th><th>Cum</th><th>Cmt</th><th>Paz</th>
                    </tr>
                </thead>
                <tbody>
                    ${data.map(row => `
                        <tr>
                            ${row.map((cell, idx) => `<td style="background:${cell.bg} !important; color:${cell.color} !important; font-weight:600; ${idx === 0 ? 'text-align:left;' : ''}">${cell.text}</td>`).join('')}
                        </tr>
                    `).join('')}
                </tbody>
            </table>
            
            <div class="rules-box">
                <div class="rule rule1">A√áILI≈û PERSONELƒ∞ ƒ∞≈ûE GE√á KALMAMALIDIR!</div>
                <div class="rule rule2">(*) SEMBOL√ú √ñZEL ƒ∞STEK G√úNLERƒ∞Dƒ∞R</div>
                <div class="rule rule3">A√áILI≈û: 09:50-18:50 | KAPANI≈û: 16:30-01:30</div>
                <div class="rule rule4">*YEMEK: 45DK, MOLA: 1x15DK</div>
            </div>
            
            <div class="requests-box">
                <div class="requests-title">üìå √ñzel ƒ∞stek G√ºnleri</div>
                ${specialRequests.length > 0 
                    ? specialRequests.map(r => `<span class="request-item">${r}</span>`).join('') 
                    : '<span class="empty-requests">Bu hafta i√ßin √∂zel istek yok</span>'
                }
            </div>
            
            <script>window.onload = function() { window.print(); }<\/script>
        </body>
        </html>
    `);
    printWindow.document.close();
}


// ==================== EXCEL VERƒ∞LERƒ∞ (117 HAFTA) ====================
const EXCEL_SHIFTS = [{"branch": "≈ûi≈üli", "weekLabel": "27 OCAK - 02 ≈ûUBAT", "weekStart": "2025-01-27", "weekEnd": "2025-02-02", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "14:00/23:00", "2": "10:00/19:00", "3": "10:00/19:00", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "OFF"}, "ECE": {"0": "*14:00/23:00", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "10:00/19:00", "5": "KAPANI≈û", "6": "10:00/19:00"}, "EYL√úL": {"0": "12:00/21:00", "1": "OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "12:00/21:00", "6": "KAPANI≈û"}, "FURKAN": {"0": "KAPANI≈û", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}, "VOLKAN": {"0": "A√áILI≈û", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "OFF", "5": "14:00/23:00", "6": "14:00/23:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "20 OCAK - 26 OCAK", "weekStart": "2025-01-20", "weekEnd": "2025-01-26", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "14:00/23:00", "2": "10:00/19:00", "3": "10:00/19:00", "4": "14:00/23:00", "5": "14:00/23:00", "6": "OFF"}, "ECE": {"0": "14:00/23:00", "1": "OFF", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "10:00/19:00"}, "EYL√úL": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}, "FURKAN": {"0": "12:00/21:00", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "KAPANI≈û"}, "VOLKAN": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "OFF", "5": "12:00/21:00", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "13 OCAK - 19 OCAK", "weekStart": "2025-01-13", "weekEnd": "2025-01-19", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "14:00/23:00", "2": "10:00/19:00", "3": "10:00/19:00", "4": "OFF", "5": "14:00/23:00", "6": "10:00/19:00"}, "ECE": {"0": "14:00/23:00", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "14:00/23:00"}, "FURKAN": {"0": "KAPANI≈û", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}, "EYL√úL": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "14:00/23:00", "5": "KAPANI≈û", "6": "12:00/21:00"}, "VOLKAN": {"0": "12:00/21:00", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "*OFF", "6": "*KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "6 OCAK - 12 OCAK", "weekStart": "2025-01-06", "weekEnd": "2025-01-12", "personelShifts": {"ESƒ∞N": {"0": "14:00/23:00", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "10:00/19:00", "4": "10:00/19:00", "5": "OFF", "6": "KAPANI≈û"}, "ECE": {"0": "OFF", "1": "KAPANI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "A√áILI≈û"}, "FURKAN": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "OFF"}, "EYL√úL": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "10:00/19:00"}, "VOLKAN": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "05 OCAK 11 OCAK", "weekStart": "2025-01-05", "weekEnd": "2025-01-11", "personelShifts": {"ESƒ∞N": {"0": "OFF", "1": "B√ñLGE M√úD√úR√ú", "2": "A√áILI≈û", "3": "B√ñLGE M√úD√úR√ú", "4": "A√áILI≈û", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "ECE": {"0": "A√áILI≈û", "1": "KAPANI≈û*", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "ESMA": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}}}, {"branch": "Tuzla", "weekLabel": "05 OCAK  11 OCAK", "weekStart": "2025-01-05", "weekEnd": "2025-01-11", "personelShifts": {"ESƒ∞N": {"0": "*OFF", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "BALRA": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "OFF", "4": "13:00/22:00", "5": "13:00/22:00", "6": "KAPANI≈û"}, "TUANA": {"0": "A√áILI≈û", "1": "*OFF", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "*KAPANI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}, "B√ú≈ûRA": {"0": "14:00/23:00", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "BARAN": {"0": "OFF", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "ELƒ∞F": {"0": "****", "1": "****", "2": "****", "3": "18:00/22:00", "4": "18:00/22:00", "5": "18:00/22:00", "6": "18:00/22:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "30 ARALIK - 05 OCAK", "weekStart": "2024-12-30", "weekEnd": "2024-01-05", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "13:00/22:00", "2": "10:00/19:00", "3": "10:00/19:00", "4": "10:00/19:00", "5": "OFF", "6": "14:00/23:00"}, "ECE": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}, "MELƒ∞SA": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "******", "3": "******", "4": "******", "5": "******", "6": "******"}, "EYL√úL": {"0": "A√áILI≈û", "1": "OFF", "2": "A√áILI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "14:00/23:00", "6": "12:00/21:00"}, "FURKAN": {"0": "OFF", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "29 ARALIK 04 OCAK", "weekStart": "2024-12-29", "weekEnd": "2024-01-04", "personelShifts": {"ESƒ∞N": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "12:00/21:00", "4": "12:00/21:00", "5": "12:00/21:00", "6": "12:00/21:00"}, "ECE": {"0": "KAPANI≈û", "1": "OFF", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "ESMA": {"0": "***", "1": "***", "2": "***", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}}}, {"branch": "Tuzla", "weekLabel": "29 ARALIK  04 OCAK", "weekStart": "2024-12-29", "weekEnd": "2024-01-04", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "OFF", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "BALRA": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "OFF", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "TUANA": {"0": "A√áILI≈û", "1": "*OFF", "2": "*A√áILI≈û", "3": "*A√áILI≈û", "4": "*KAPANI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}, "B√ú≈ûRA": {"0": "14:00/23:00", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "BARAN": {"0": "*OFF", "1": "14:00/23:00", "2": "13:00/22:00", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "KAPANI≈û"}, "ELƒ∞F": {"0": "****", "1": "*****", "2": "*****", "3": "18:00/22:00", "4": "18:00/22:00", "5": "18:00/22:00", "6": "18:00/22:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "22 ARALIK 28 ARALIK", "weekStart": "2024-12-22", "weekEnd": "2024-12-28", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "ECE": {"0": "A√áILI≈û", "1": "KAPANI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "BUSE": {"0": "*KAPANI≈û", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "OFF*", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}}}, {"branch": "Tuzla", "weekLabel": "22 ARALIK  28 ARALIK", "weekStart": "2024-12-22", "weekEnd": "2024-12-28", "personelShifts": {"ESƒ∞N": {"0": "13:00/22:00", "1": "13:00/22:00", "2": "13:00/22:00", "3": "OFF", "4": "13:00/22:00", "5": "13:00/22:00", "6": "13:00/22:00"}, "BALRA": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "14:00/23:00", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "TUANA": {"0": "A√áILI≈û", "1": "*OFF", "2": "KAPANI≈û", "3": "*A√áILI≈û", "4": "*KAPANI≈û", "5": "A√áILI≈û", "6": "14:00/23:00"}, "B√ú≈ûRA": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "BARAN": {"0": "*OFF", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "KAPANI≈û"}, "ELƒ∞F": {"0": "****", "1": "*****", "2": "*****", "3": "18:00/22:00", "4": "18:00/22:00", "5": "18:00/22:00", "6": "18:00/22:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "15 ARALIK 21 ARALIK", "weekStart": "2024-12-15", "weekEnd": "2024-12-21", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "ECE": {"0": "A√áILI≈û", "1": "KAPANI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "BUSE": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "KAPANI≈û", "3": "OFF", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}}}, {"branch": "Tuzla", "weekLabel": "14 ARALIK  21 ARALIK", "weekStart": "2024-12-14", "weekEnd": "2024-12-21", "personelShifts": {"ESƒ∞N": {"0": "13:00/22:00", "1": "13:00/22:00", "2": "13:00/22:00", "3": "13:00/22:00", "4": "13:00/22:00", "5": "13:00/22:00", "6": "13:00/22:00"}, "BALRA": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "KAPANI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "TUANA": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "*A√áILI≈û", "4": "*KAPANI≈û", "5": "14:00/23:00", "6": "A√áILI≈û"}, "B√ú≈ûRA": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "BARAN": {"0": "****", "1": "*****", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}, "ELƒ∞F": {"0": "****", "1": "*****", "2": "*****", "3": "18:00/22:00", "4": "18:00/22:00", "5": "18:00/22:00", "6": "18:00/22:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "09 ARALIK-15 ARALIK", "weekStart": "2024-12-09", "weekEnd": "2024-12-15", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "14:00/23:00", "2": "*14:00/23:00", "3": "12:00/21:00", "4": "14:00/23:00", "5": "OFF", "6": "14:00/23:00"}, "ECE": {"0": "14:00/23:00", "1": "A√áILI≈û", "2": "*KAPANI≈û", "3": "KAPANI≈û", "4": "OFF", "5": "10:00/19:00", "6": "A√áILI≈û"}, "MELƒ∞SA": {"0": "A√áILI≈û", "1": "KAPANI≈û", "2": "10:00/19:00", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "OFF"}, "EYL√úL": {"0": "KAPANI≈û", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "FURKAN": {"0": "****", "1": "****", "2": "****", "3": "14:00/23:00", "4": "10:00/19:00", "5": "14:00/23:00", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "08 ARALIK 14 ARALIK", "weekStart": "2024-12-08", "weekEnd": "2024-12-14", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "ECE": {"0": "Y.ƒ∞.", "1": "Y.ƒ∞.", "2": "Y.ƒ∞.", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "BUSE": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "OFF*", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "ESMA": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "***", "5": "***", "6": "***"}}}, {"branch": "Tuzla", "weekLabel": "08 ARALIK  14 ARALIK", "weekStart": "2024-12-08", "weekEnd": "2024-12-14", "personelShifts": {"ESƒ∞N": {"0": "13:00/22:00", "1": "13:00/22:00", "2": "13:00/22:00", "3": "13:00/22:00", "4": "OFF", "5": "13:00/22:00", "6": "13:00/22:00"}, "TUANA": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "*A√áILI≈û", "4": "*KAPANI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}, "≈ûƒ∞MAL": {"0": "OFF", "1": "*KAPANI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "B√ú≈ûRA": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "12:00/21:00", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "BALRA": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "A√áILI≈û"}, "ELƒ∞F": {"0": "****", "1": "*****", "2": "*****", "3": "18:00/22:00", "4": "18:00/22:00", "5": "18:00/22:00", "6": "18:00/22:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "02 ARALIK-08 ARALIK", "weekStart": "2024-12-02", "weekEnd": "2024-12-08", "personelShifts": {"ESƒ∞N": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "10:00/19:00", "3": "14:00/23:00", "4": "10:00/19:00", "5": "OFF", "6": "14:00/23:00"}, "ECE": {"0": "*10:00/19:00", "1": "*OFF", "2": "KAPANI≈û", "3": "10:00/19:00", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}, "MELƒ∞SA": {"0": "KAPANI≈û", "1": "*KAPANI≈û", "2": "*14:00/23:00", "3": "*OFF", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "12:00/21:00"}, "EYL√úL": {"0": "OFF", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "14:00/23:00", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "BUSE": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "12:00/21:00", "5": "14:00/23:00", "6": "10:00/19:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "01 ARALIK 07 ARALIK", "weekStart": "2024-12-01", "weekEnd": "2024-12-07", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "ECE": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "BUSE": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "OFF*", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}}}, {"branch": "Tuzla", "weekLabel": "01 ARALIK  07 ARALIK", "weekStart": "2024-12-01", "weekEnd": "2024-12-07", "personelShifts": {"ESƒ∞N": {"0": "13:00/22:00", "1": "OFF", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "13:00/22:00", "5": "13:00/22:00", "6": "13:00/22:00"}, "TUANA": {"0": "A√áILI≈û", "1": "*OFF", "2": "KAPANI≈û", "3": "*A√áILI≈û", "4": "*KAPANI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}, "≈ûƒ∞MAL": {"0": "OFF", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "B√ú≈ûRA": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "BALRA": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "25 KASIM - 1 ARALIK", "weekStart": "2024-11-25", "weekEnd": "2024-12-01", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "12:00/21:00", "2": "10:00/19:00", "3": "10:00/19:00", "4": "10:00/19:00", "5": "OFF", "6": "14:00/23:00"}, "ECE": {"0": "*14:00/23:00", "1": "*A√áILI≈û", "2": "*OFF", "3": "*KAPANI≈û", "4": "14:00/23:00", "5": "10:00/19:00", "6": "A√áILI≈û"}, "MELƒ∞SA": {"0": "A√áILI≈û", "1": "*14:00/23:00", "2": "*KAPANI≈û", "3": "*OFF", "4": "*KAPANI≈û", "5": "14:00/23:00", "6": "KAPANI≈û"}, "EYL√úL": {"0": "KAPANI≈û", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "14:00/23:00", "4": "12:00/21:00", "5": "A√áILI≈û", "6": "***OFF"}, "BUSE": {"0": "*OFF", "1": "*KAPANI≈û", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "*10:00/19:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "24 KASIM 30 KASIM", "weekStart": "2024-11-24", "weekEnd": "2024-11-30", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "ECE": {"0": "A√áILI≈û", "1": "12:00/21:00", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "12:00/21:00", "6": "A√áILI≈û"}, "BUSE": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "OFF*", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "12:00/21:00"}, "ESMA": {"0": "12:00/21:00", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}}}, {"branch": "Tuzla", "weekLabel": "24 KASIM 30 KASIM", "weekStart": "2024-11-24", "weekEnd": "2024-11-30", "personelShifts": {"ESƒ∞N": {"0": "13:00/22:00", "1": "13:00/22:00", "2": "13:00/22:00", "3": "13:00/22:00", "4": "OFF", "5": "13:00/22:00", "6": "13:00/22:00"}, "TUANA": {"0": "A√áILI≈û", "1": "*OFF", "2": "KAPANI≈û", "3": "*A√áILI≈û", "4": "*KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "≈ûƒ∞MAL": {"0": "OFF", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "14:00/23:00"}, "B√ú≈ûRA": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "12:00/21:00", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "BALRA": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "18 KASIM - 24 KASIM", "weekStart": "2024-11-18", "weekEnd": "2024-11-24", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "14:00/23:00", "2": "14:00/23:00", "3": "10:00/19:00", "4": "12:00/21:00", "5": "10:00/19:00", "6": "OFF"}, "ECE": {"0": "KAPANI≈û", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "10:00/19:00"}, "MELƒ∞SA": {"0": "*14:00/23:00", "1": "A√áILI≈û", "2": "*OFF", "3": "KAPANI≈û", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "EYL√úL": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}, "BUSE": {"0": "OFF", "1": "KAPANI≈û", "2": "10:00/19:00", "3": "A√áILI≈û", "4": "14:00/23:00", "6": "*A√áILI≈û"}}}, {"branch": "Tuzla", "weekLabel": "17 KASIM  23 KASIM", "weekStart": "2024-11-17", "weekEnd": "2024-11-23", "personelShifts": {"ESƒ∞N": {"0": "13:00/22:00", "1": "13:00/22:00", "2": "OFF", "3": "13:00/22:00", "4": "13:00/22:00", "5": "13:00/22:00", "6": "13:00/22:00"}, "TUANA": {"0": "A√áILI≈û", "1": "*OFF", "2": "KAPANI≈û", "3": "*A√áILI≈û", "4": "*KAPANI≈û", "5": "KAPANI≈û", "6": "12:00/21:00"}, "≈ûƒ∞MAL": {"0": "OFF", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "14:00/23:00", "6": "A√áILI≈û"}, "B√ú≈ûRA": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "BALRA": {"0": "12:00/21:00", "1": "KAPANI≈û", "2": "12:00/21:00", "3": "KAPANI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "11 KASIM - 17 KASIM", "weekStart": "2024-11-11", "weekEnd": "2024-11-17", "personelShifts": {"ESƒ∞N": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "10:00/19:00", "3": "10:00/19:000", "4": "12:00/21:00", "5": "10:00/19:000", "6": "OFF"}, "ECE": {"0": "10:00/19:00", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "MELƒ∞SA": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "OFF", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "10:00/19:00"}, "EYL√úL": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}, "BUSE": {"0": "OFF", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "11:00/20:00", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "10 KASIM 16 KASIM", "weekStart": "2024-11-10", "weekEnd": "2024-11-16", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "ECE": {"0": "12:00/21:00", "1": "12:00/21:00", "2": "OFF", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "12:00/21:00"}, "BUSE": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "OFF*", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "ESMA": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "KAPANI≈û", "4": "OFF", "5": "12:00/21:00*", "6": "KAPANI≈û"}}}, {"branch": "Tuzla", "weekLabel": "10 KASIM  16 KASIM", "weekStart": "2024-11-10", "weekEnd": "2024-11-16", "personelShifts": {"ESƒ∞N": {"0": "OFF", "1": "13:00/22:00", "2": "13:00/22:00", "3": "13:00/22:00", "4": "13:00/22:00", "5": "13:00/22:00", "6": "13:00/22:00"}, "TUANA": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "14:00/23:00"}, "≈ûƒ∞MAL": {"0": "OFF", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "LALE": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "12:00/21:00", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "B√ú≈ûRA": {"0": "12:00/19:00", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "04 KASIM- 10 KASIM", "weekStart": "2024-11-04", "weekEnd": "2024-11-10", "personelShifts": {"ESƒ∞N": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "10:00/19:00", "3": "10:00/19:00", "4": "14:00/23:00", "5": "*12:00/21:00", "6": "*OFF"}, "ECE": {"0": "10:00/19:00", "1": "*A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "12:00/21:00", "5": "*A√áILI≈û", "6": "14:00/23:00"}, "MELƒ∞SA": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "OFF", "4": "*10:00/19:00", "5": "*09:00/18:00", "6": "*10:00/19:00"}, "EYL√úL": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "*10:00/19:00", "6": "KAPANI≈û"}, "BUSE": {"0": "OFF", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "03 KASIM 09 KASIM", "weekStart": "2024-11-03", "weekEnd": "2024-11-09", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "ECE": {"0": "KAPANI≈û", "1": "12:00/21:00", "2": "OFF", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "12:00/21:00", "6": "A√áILI≈û"}, "BUSE": {"0": "12:00/21:00", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "OFF*", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "ESMA": {"0": "A√áILI≈û", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "12:00/21:00", "5": "A√áILI≈û", "6": "OFF"}}}, {"branch": "Tuzla", "weekLabel": "03 KASIM   09 KASIM", "weekStart": "2024-11-03", "weekEnd": "2024-11-09", "personelShifts": {"ESƒ∞N": {"0": "13:00/22:00", "1": "13:00/22:00", "2": "13:00/22:00", "3": "13:00/22:00", "4": "13:00/22:00", "5": "13:00/22:00", "6": "B√ñLGE M√úD√úR√ú"}, "TUANA": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "ƒ∞PEK": {"0": "KAPANI≈û", "1": "12:00/21:00", "2": "A√áILI≈û", "3": "OFF", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "≈ûƒ∞MAL": {"0": "OFF", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "12:00/21:00"}, "LALE": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "12:00/21:00", "5": "KAPANI≈û", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "28 EKƒ∞M - 03 KASIM", "weekStart": "2024-10-28", "weekEnd": "2024-11-03", "personelShifts": {"ESƒ∞N": {"0": "10:00/19::00", "1": "10:00/19:00", "2": "10:00/19:00", "3": "10:00/19:00", "4": "14:00/23:00", "5": "OFF", "6": "12:00/21:00"}, "ECE": {"0": "14:00/23:00", "1": "A√áILI≈û", "2": "OFF", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "KAPANI≈û"}, "MELƒ∞SA": {"0": "A√áILI≈û", "1": "*KAPANI≈û", "2": "KAPANI≈û", "3": "19:00/02:00", "4": "OFF", "5": "10:00/19:00", "6": "A√áILI≈û"}, "EYL√úL": {"0": "KAPANI≈û", "1": "*OFF", "2": "14:00/23:00", "3": "*11:00/20:00", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "10:00/19:00"}, "BUSE": {"0": "*OFF", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "14:00/23:00", "4": "10:00/19:00", "5": "KAPANI≈û", "6": "14:00/23:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "27 EKƒ∞M 02 KASIM", "weekStart": "2024-10-27", "weekEnd": "2024-11-02", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "A√áILI≈û (B√ñLGE M.)", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "ECE": {"0": "A√áILI≈û", "1": "KAPANI≈û", "2": "OFF", "3": "12:00/21:00", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "BUSE": {"0": "KAPANI≈û", "1": "12:00/21:00", "2": "A√áILI≈û", "3": "OFF*", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "12:00/21:00"}, "ESMA": {"0": "12:00/21:00", "1": "A√áILI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "OFF", "5": "12:00/21:00*", "6": "A√áILI≈û"}}}, {"branch": "Tuzla", "weekLabel": "27 EKƒ∞M 2 EKƒ∞M", "weekStart": "2024-10-27", "weekEnd": "2024-10-02", "personelShifts": {"ESƒ∞N": {"0": "12.00/21:00", "1": "13:00-22:00", "2": "13:00-22:00", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "SENA": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "TUANA": {"0": "A√áILI≈û", "1": "OFF*", "2": "KAPANI≈û", "3": "A√áILI≈û*", "4": "KAPANI≈û*", "5": "A√áILI≈û", "6": "13:00-22:00"}, "ƒ∞PEK": {"0": "KAPANI≈û", "1": "14:00-23:00", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û*", "5": "14:00-23:00*", "6": "KAPANI≈û"}, "≈ûƒ∞MAL": {"0": "OFF", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "13:00-22:00", "4": "14:00-23:00", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "LALE": {"0": "13:00-22:00", "1": "KAPANI≈û", "2": "14:00-23:00", "3": "KAPANI≈û", "4": "12:00/21:00", "5": "A√áILI≈û", "6": "OFF"}}}, {"branch": "≈ûi≈üli", "weekLabel": "21 EKƒ∞M - 27 EKƒ∞M", "weekStart": "2024-10-21", "weekEnd": "2024-10-27", "personelShifts": {"ESƒ∞N": {"0": "14:00/23:00", "1": "*A√áILI≈û", "2": "10:00/19:00", "3": "10:00/19:00", "4": "12:00/21:00", "5": "OFF", "6": "12:00/21:00"}, "ECE": {"0": "KAPANI≈û", "1": "*10:00/19:00", "2": "*OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "A√áILI≈û"}, "MELƒ∞SA": {"0": "10:00/19:00", "1": "*KAPANI≈û", "2": "*14:00/23:00", "3": "*OFF", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "10:00/19:00"}, "EYL√úL": {"0": "A√áILI≈û", "1": "*OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "BUSE": {"0": "*OFF", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "10:00/19:00", "5": "10:00/19:00", "6": "14:00/23:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "20 EKƒ∞M 26 EKƒ∞M", "weekStart": "2024-10-20", "weekEnd": "2024-10-26", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "A√áILI≈û (B√ñLGE M.)", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "ECE": {"0": "KAPANI≈û", "1": "12:00/21:00", "2": "OFF", "3": "KAPANI≈û", "4": "12:00/21:00", "5": "12:00/21:00", "6": "A√áILI≈û"}, "BUSE": {"0": "OFF", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "12:00/21:00", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "ESMA": {"0": "A√áILI≈û", "1": "OFF", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "12:00/21:00"}}}, {"branch": "Tuzla", "weekLabel": "19 EKƒ∞M 25 EKƒ∞M", "weekStart": "2024-10-19", "weekEnd": "2024-10-25", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "SENA": {"0": "14:00-23:00", "1": "14:00-23:00", "2": "OFF", "3": "KAPANI≈û", "4": "14:00-23:00", "5": "KAPANI≈û", "6": "14:00-23:00"}, "TUANA": {"0": "A√áILI≈û", "1": "OFF*", "2": "KAPANI≈û", "3": "A√áILI≈û*", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "ƒ∞PEK": {"0": "OFF", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "14:00-23:00", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "ALPER": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "14:00-23:00", "3": "OFF", "4": "KAPANI≈û", "5": "14:00-23:00", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "14 EKƒ∞M  20 EKƒ∞M", "weekStart": "2024-10-14", "weekEnd": "2024-10-20", "personelShifts": {"ESƒ∞N": {"0": "12:00/21:00", "1": "10:00/19:00", "2": "10:00/19:00", "3": "14:00/23:00", "4": "OFF", "5": "14:00/23:00", "6": "12:00/21:00"}, "ECE": {"0": "*14:00/23:00", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "14:00/23:00", "5": "**OFF", "6": "KAPANI≈û"}, "MELƒ∞SA": {"0": "10:00/19:00", "1": "*KAPANI≈û", "2": "*14:00/23:00", "3": "*OFF", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}, "EYL√úL": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "*OFF", "3": "KAPANI≈û", "4": "10:00/19:00", "5": "KAPANI≈û", "6": "14:00/23:00"}, "BUSE": {"0": "KAPANI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "10:00/19:00", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "10:00/19:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "13 EKƒ∞M 19 EKƒ∞M", "weekStart": "2024-10-13", "weekEnd": "2024-10-19", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "ECE": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "KAPANI≈û", "3": "12:00/21:00", "4": "12:00/21:00", "5": "*A√áILI≈û", "6": "*OFF"}, "BUSE": {"0": "KAPANI≈û", "1": "OFF", "2": "A√áILI≈û", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "12:00/21:00", "6": "A√áILI≈û"}, "ESMA": {"0": "12:00/21:00", "1": "KAPANI≈û", "2": "OFF", "3": "A√áILI≈û", "4": "*A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "07 EKƒ∞M  13 EKƒ∞M", "weekStart": "2024-10-07", "weekEnd": "2024-10-13", "personelShifts": {"ESƒ∞N": {"0": "12:00/21:00", "1": "14:00/23:00", "2": "10:00/19:00", "3": "14:00/23:00", "4": "14:00/23:00", "5": "*OFF", "6": "14:00/23:00"}, "ECE": {"0": "*14:00/23:00", "1": "A√áILI≈û", "2": "*OFF", "3": "KAPANI≈û", "4": "10:00/19:00", "5": "14:00/23:00", "6": "12:00/21:00"}, "MELƒ∞SA": {"0": "A√áILI≈û", "1": "*KAPANI≈û", "2": "*14:00/23:00", "3": "*OFF", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}, "EYL√úL": {"0": "10:00/19:00", "1": "OFF", "2": "KAPANI≈û", "3": "10:00/19:00", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "BUSE": {"0": "KAPANI≈û", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "*OFF", "5": "KAPANI≈û", "6": "10:00/19:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "06 EKƒ∞M 12 EKƒ∞M", "weekStart": "2024-10-06", "weekEnd": "2024-10-12", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M.12:00/21:00", "1": "B√ñLGE M.12:00/21:00", "2": "B√ñLGE M.A√áILI≈û", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "ECE": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "12:00/21:00", "6": "A√áILI≈û"}, "BUSE": {"0": "OFF", "1": "KAPANI≈û", "2": "12:00/21:00", "3": "A√áILI≈û", "4": "12:00/21:00", "5": "*A√áILI≈û", "6": "KAPANI≈û"}, "ESMA": {"0": "KAPANI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "12:00/21:00", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "12:00/21:00"}}}, {"branch": "Tuzla", "weekLabel": "6 EKƒ∞M 12 EKƒ∞M", "weekStart": "2024-10-06", "weekEnd": "2024-10-12", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "SENA": {"0": "14:00-23:00", "1": "A√áILI≈û", "2": "14:00-23:00", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "OFF", "6": "14:00-23:00"}, "TUANA": {"0": "A√áILI≈û", "1": "OFF*", "2": "KAPANI≈û", "3": "A√áILI≈û*", "4": "KAPANI≈û*", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "ƒ∞PEK": {"0": "OFF*", "1": "RAPORLU", "2": "RAPORLU", "3": "RAPORLU", "4": "14:00-23:00", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "ALPER": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "30 EYL√úL -  6 EKƒ∞M", "weekStart": "2024-09-30", "weekEnd": "2024-10-06", "personelShifts": {"ESƒ∞N": {"0": "12:00/21:00", "1": "10:00/19:00", "2": "10:00/19:00", "3": "10:00/19:00", "4": "10:00/19:00", "5": "OFF", "6": "14:00/23:00"}, "ECE": {"0": "10:00/19:00", "1": "*A√áILI≈û", "2": "*OFF", "3": "*KAPANI≈û", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "10:00/19:00"}, "MELƒ∞SA": {"0": "A√áILI≈û", "1": "*KAPANI≈û", "2": "*KAPANI≈û", "3": "*OFF", "4": "*KAPANI≈û", "5": "14:00/23:00", "6": "A√áILI≈û"}, "EYL√úL": {"0": "*14:00/23:00", "1": "OFF", "2": "14:00/23:00", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "10:00/19:00", "6": "KAPANI≈û"}, "BUSE": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "*OFF", "5": "*KAPANI≈û", "6": "14:00/23:00"}}}, {"branch": "Tuzla", "weekLabel": "29 EYL√úL  5 EKƒ∞M", "weekStart": "2024-09-29", "weekEnd": "2024-10-05", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "**B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "SENA": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "14:00-23:00", "5": "14:00-23:00", "6": "14:00-23:00"}, "TUANA": {"0": "A√áILI≈û", "1": "*OFF", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "*KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "ƒ∞PEK": {"0": "OFF", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "ALPER": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "23 EYL√úL-29 EYL√úL", "weekStart": "2024-09-23", "weekEnd": "2024-09-29", "personelShifts": {"ESƒ∞N": {"0": "12:00/21:00", "1": "10:00/19:00", "2": "OFF", "3": "09:00/18:00", "4": "10:00/19:00", "5": "10:00/19:00", "6": "14:00/23:00"}, "ECE": {"0": "14:00/23:00", "1": "14:00/23:00", "2": "*A√áILI≈û", "3": "*OFF", "4": "KAPANI≈û", "5": "12:00/21:00", "6": "KAPANI≈û"}, "MELƒ∞SA": {"0": "10:00/19:00", "1": "*OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "10:00/19:00"}, "EYL√úL": {"0": "A√áILI≈û", "1": "*A√áILI≈û", "2": "*OFF", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "14:00/23:00", "6": "A√áILI≈û"}, "BUSE": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "*A√áILI≈û", "4": "*OFF", "5": "KAPANI≈û", "6": "12:00/21:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "16 EYL√úL- 22 EYL√úL", "weekStart": "2024-09-16", "weekEnd": "2024-09-22", "personelShifts": {"ESƒ∞N": {"0": "12:00/21:00", "1": "14:00/23:00", "2": "KAPANI≈û", "3": "10:00/19:00", "4": "14:00/23:00", "5": "OFF", "6": "12:00/21:00"}, "ECE": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "09:00/18:00", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "MELƒ∞SA": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "EYL√úL": {"0": "10:00/19:00", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "10:00/19:00"}, "BUSE": {"0": "KAPANI≈û", "1": "OFF", "2": "A√áILI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "9 EYL√úL - 15 EYL√úL", "weekStart": "2024-09-09", "weekEnd": "2024-09-15", "personelShifts": {"ESƒ∞N": {"0": "10:00-19:00", "1": "10:00-19:00", "2": "12:00-21:00", "3": "12:00-21:00", "4": "10:00/19:00", "5": "OFF", "6": "14:00/23:00"}, "ECE": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "OFF", "5": "**A√áILI≈û", "6": "A√áILI≈û"}, "MELƒ∞SA": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "KAPANI≈û"}, "EYL√úL": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "OFF", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "BUSE": {"0": "****", "1": "*****", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "10:00/19:00"}, "EYL√úL √ñ.": {"0": "*******", "1": "*****", "2": "14:00/23:00", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "08 EYL√úL  14 EYL√úL", "weekStart": "2024-09-08", "weekEnd": "2024-09-14", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "ECE": {"0": "12.00/21:00", "1": "A√áILI≈û", "2": "12.00/21:00", "3": "A√áILI≈û", "4": "OFF", "5": "10:00/19:00", "6": "12.00/21:00"}, "HAVƒ∞N": {"0": "KAPANI≈û", "1": "12.00/21:00", "2": "A√áILI≈û", "3": "OFF", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "BUSE": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "12.00/21:00", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "MERVE": {"0": "****", "1": "KAPANI≈û", "2": "****", "3": "12.00/21:00", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "****"}}}, {"branch": "≈ûi≈üli", "weekLabel": "2 EYL√úL - 8 EYL√úL", "weekStart": "2024-09-02", "weekEnd": "2024-09-08", "personelShifts": {"ESƒ∞N": {"0": "12:00/21:00", "1": "13:00/22:00", "2": "10:00/19:00", "3": "10:00/19:00", "4": "OFF", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "ECE": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "*OFF", "3": "*KAPANI≈û", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "OFF"}, "MELƒ∞SA": {"0": "*KAPANI≈û", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "*OFF", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "12:00/21:00"}, "EYL√úL": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "*A√áILI≈û", "5": "*OFF* Doƒüum g.", "6": "*KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "01 EYL√úL  07 EYL√úL", "weekStart": "2024-09-01", "weekEnd": "2024-09-07", "personelShifts": {"ESƒ∞N": {"0": "≈ûƒ∞≈ûLƒ∞ (10:00/19:00)", "1": "≈ûƒ∞≈ûLƒ∞(14:00/23:00)", "2": "≈ûƒ∞≈ûLƒ∞ (10:00/19:00)", "3": "≈ûƒ∞≈ûLƒ∞ A√áILI≈û", "4": "TUZLA", "5": "TUZLA", "6": "14:00/23:00"}, "ECE": {"0": "Y.ƒ∞", "1": "Y.ƒ∞", "2": "Y.ƒ∞", "3": "Y.ƒ∞", "4": "Y.ƒ∞", "5": "Y.ƒ∞", "6": "Y.ƒ∞"}, "HAVƒ∞N": {"0": "KAPANI≈û", "1": "OFF", "2": "A√áILI≈û", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "AY≈ûEG√úL": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "KAPANI≈û", "3": "OFF", "4": "A√áILI≈û", "5": "10:00/19:00", "6": "****"}, "BUSE": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "MERVE": {"0": "***", "1": "KAPANI≈û", "2": "***", "3": "***", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "****"}}}, {"branch": "Tuzla", "weekLabel": "1 EYL√úL  7 EYL√úL", "weekStart": "2024-09-01", "weekEnd": "2024-09-07", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "**B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "SENA": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "TUANA": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "13:00/22:00", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}, "SUDE": {"0": "OFF", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "GAYE": {"0": "KAPANI≈û", "1": "13:00/22:00", "2": "13:00/22:00", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "*OFF", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "26 AƒûUSTOS- 1 EYL√úL", "weekStart": "2024-08-26", "weekEnd": "2024-09-01", "personelShifts": {"ESƒ∞N": {"0": "12:00/21:00", "1": "12:00/21:00", "2": "10:00/19:00", "3": "10:00/19:00", "4": "12:00/21:00", "5": "10:00/19:00", "6": "OFF"}, "ECE": {"0": "OFF", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "A√áILI≈û"}, "MELƒ∞SA": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "EYL√úL": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "14:00/23:00"}, "HATƒ∞CE": {"0": "*****", "1": "*******", "2": "******", "3": "******", "4": "14:00/23:00", "5": "12:00/19:00", "6": "10:00/19:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "25 AƒûUSTOS  31 AƒûUSTOS", "weekStart": "2024-08-25", "weekEnd": "2024-08-31", "personelShifts": {"ESƒ∞N": {"0": "TUZLA", "1": "TUZLA", "2": "TUZLA", "3": "TUZLA", "4": "TUZLA", "5": "TUZLA", "6": "TUZLA"}, "ECE": {"0": "14:00/23:00", "1": "OFF", "2": "14:00/23:00", "3": "12:00/21:00", "4": "A√áILI≈û", "5": "12:00/21:00", "6": "A√áILI≈û"}, "HAVƒ∞N": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "AY≈ûEG√úL": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "12:00/21:00", "5": "OFF", "6": "14:00/23:00"}, "MERVE": {"0": "****", "1": "KAPANI≈û", "2": "****", "3": "A√áILI≈û", "4": "****", "5": "A√áILI≈û", "6": "****"}, "BUSE": {"0": "****", "1": "****", "2": "****", "3": "****", "4": "****", "5": "12:00/21:00", "6": "10:00/19:00"}}}, {"branch": "Tuzla", "weekLabel": "25 AƒûUSTOS  31 AƒûUSTOS", "weekStart": "2024-08-25", "weekEnd": "2024-08-31", "personelShifts": {"ESƒ∞N": {"0": "B√ñLGE M√úD√úR√ú", "1": "B√ñLGE M√úD√úR√ú", "2": "B√ñLGE M√úD√úR√ú", "3": "B√ñLGE M√úD√úR√ú", "4": "B√ñLGE M√úD√úR√ú", "5": "B√ñLGE M√úD√úR√ú", "6": "B√ñLGE M√úD√úR√ú"}, "SENA": {"0": "*A√áILI≈û", "1": "*A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "TUANA": {"0": "KAPANI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "*A√áILI≈û", "5": "*A√áILI≈û", "6": "*A√áILI≈û"}, "SUDE": {"0": "OFF", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "*A√áILI≈û", "4": "13:00/22:00", "5": "KAPANI≈û", "6": "12:00/21:00"}, "ELANUR": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "*A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "13:00/22:00", "6": "KAPANI≈û"}, "GAYE": {"0": "****", "1": "****", "2": "****", "3": "****", "4": "****", "5": "****", "6": "14:00/23:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "19 AGUSTOS - 25 AGUSTOS", "weekStart": "2024-08-19", "weekEnd": "2024-08-25", "personelShifts": {"ESƒ∞N": {"0": "12:00/21:00", "1": "12:00/21:00", "2": "14:00/23:00", "3": "10:00/19:00", "4": "10:00/19:00", "5": "OFF", "6": "10:00/19:00"}, "ECE": {"0": "10:00/19:00", "1": "*A√áILI≈û", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "*A√áILI≈û", "6": "*OFF"}, "G√úL": {"0": "A√áILI≈û", "1": "14:00/23:00", "2": "*A√áILI≈û", "3": "*OFF", "4": "*KAPANI≈û", "5": "14:00/23:00", "6": "KAPANI≈û"}, "MELƒ∞SA": {"0": "14:00/23:00", "1": "KAPANI≈û", "2": "10:00/19:00", "3": "A√áILI≈û", "4": "*OFF", "5": "KAPANI≈û", "6": "14:00/23:00"}, "EYL√úL": {"0": "*KAPANI≈û", "1": "*A√áILI≈û", "2": "*OFF", "3": "*KAPANI≈û", "4": "14:00/23:00", "5": "10:00/19:00", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "18 AƒûUSTOS  24 AƒûUSTOS", "weekStart": "2024-08-18", "weekEnd": "2024-08-24", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "A√áILI≈û", "2": "12:00/21:00", "3": "12:00/21:00", "4": "12:00/21:00", "5": "10:00/19:00", "6": "14:00/23:00"}, "ECE": {"0": "OFF", "1": "OFF", "2": "TUZLA", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "14:00/23:00", "6": "10:00/19:00"}, "HAVƒ∞N": {"0": "A√áILI≈û", "1": "TUZLA", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "AY≈ûEG√úL": {"0": "14:00/23:00", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "OFF", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "MERVE": {"0": "KAPANI≈û", "1": "12:00/21:00", "2": "****", "3": "****", "4": "****", "5": "****", "6": "****"}}}, {"branch": "Tuzla", "weekLabel": "18 AƒûUSTOS  24 AƒûUSTOS", "weekStart": "2024-08-18", "weekEnd": "2024-08-24", "personelShifts": {"Nƒ∞LSU": {"0": "14:00/23:00", "1": "KAPANI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "TUANA": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "SUDE": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "12 AGUSTOS - 18 AGUSTOS", "weekStart": "2024-08-12", "weekEnd": "2024-08-18", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "*OFF", "2": "*OFF", "3": "*OFF", "4": "14:00/23:00", "5": "10:00/19:00", "6": "10:00/19:00"}, "ECE": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "KAPANI≈û", "4": "*A√áILI≈û", "5": "*OFF", "6": "*KAPANI≈û"}, "G√úL": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "14:00/23:00", "3": "*A√áILI≈û", "4": "*OFF", "5": "*KAPANI≈û", "6": "14:00/23:00"}, "MELƒ∞SA": {"0": "*OFF", "1": "*KAPANI≈û", "2": "KAPANI≈û", "3": "10:00/19:00", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "A√áILI≈û"}, "EYL√úL": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "KAPANI≈û", "4": "10:00/19:00", "5": "*A√áILI≈û", "6": "*OFF"}}}, {"branch": "≈ûi≈üli", "weekLabel": "11 AƒûUSTOS  17 AƒûUSTOS", "weekStart": "2024-08-11", "weekEnd": "2024-08-17", "personelShifts": {"ESƒ∞N": {"0": "YILLIK ƒ∞Zƒ∞N", "1": "YILLIK ƒ∞Zƒ∞N", "2": "YILLIK ƒ∞Zƒ∞N", "3": "12:00/21:00", "4": "12:00/21:00", "5": "12:00/21:00", "6": "TUZLA"}, "ECE": {"0": "TUZLA", "1": "TUZLA", "2": "TUZLA", "3": "TUZLA", "4": "TUZLA", "5": "TUZLA", "6": "OFF"}, "HAVƒ∞N": {"0": "12:00/21:00", "1": "12:00/21:00", "2": "KAPANI≈û", "3": "OFF", "4": "TUZLA", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "AY≈ûEG√úL": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "12:00/21:00", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "OFF", "6": "KAPANI≈û"}, "MERVE": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "12:00/21:00"}}}, {"branch": "Tuzla", "weekLabel": "11 AƒûUSTOS  17 AƒûUSTOS", "weekStart": "2024-08-11", "weekEnd": "2024-08-17", "personelShifts": {"ESƒ∞N": {"0": "YILLIK ƒ∞Zƒ∞N", "1": "YILLIK ƒ∞Zƒ∞N", "2": "YILLIK ƒ∞Zƒ∞N", "3": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "4": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "5": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "6": "ESƒ∞N (B√ñLGE M√úD√úR√ú)"}, "Nƒ∞LSU": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "TUANA": {"0": "***", "1": "***", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "SUDE": {"0": "***", "1": "***", "2": "***", "3": "***", "4": "***", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "ECE(MAƒûAZA M.)": {"0": "ECE MAƒûAZA M√úD√úR√ú)", "1": "ECE MAƒûAZA M√úD√úR√ú)", "2": "ECE MAƒûAZA M√úD√úR√ú)", "3": "ECE MAƒûAZA M√úD√úR√ú)", "4": "ECE MAƒûAZA M√úD√úR√ú)", "5": "ECE MAƒûAZA M√úD√úR√ú)", "6": "ECE MAƒûAZA M√úD√úR√ú)"}}}, {"branch": "≈ûi≈üli", "weekLabel": "5 AƒûUSTOS - 11 AƒûUSTOS", "weekStart": "2024-08-05", "weekEnd": "2024-08-11", "personelShifts": {"ESƒ∞N": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "***A√áILI≈û", "3": "*A√áILI≈û", "4": "*OFF", "5": "*KAPANI≈û", "6": "14:00/23:00"}, "ECE": {"0": "*14:00/23:00", "1": "*A√áILI≈û", "2": "***OFF", "3": "*KAPANI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "10:00/19:00"}, "G√úL": {"0": "10:00/19:00", "1": "*KAPANI≈û", "2": "***10:00/19:00", "3": "**OFF", "4": "*KAPANI≈û", "5": "14:00/23:00", "6": "A√áILI≈û"}, "MELƒ∞SA": {"0": "*A√áILI≈û", "1": "*OFF", "2": "*KAPANI≈û", "3": "14:00/23:00", "4": "14:00/23:00", "5": "10:00/19:00", "6": "KAPANI≈û"}, "ZEYNEP": {"0": "10:00/19:00", "1": "09:00/18:00", "2": "14:00/23:00", "3": "09:00/18:00", "4": "09:00/18:00", "5": "OFF", "6": "OFF"}}}, {"branch": "≈ûi≈üli", "weekLabel": "04 AƒûUSTOS - 10 AƒûUSTOS", "weekStart": "2024-08-04", "weekEnd": "2024-08-10", "personelShifts": {"ESƒ∞N": {"0": "TUZLA", "1": "TUZLA", "2": "TUZLA", "3": "TUZLA", "4": "TUZLA", "5": "YILLIK ƒ∞Zƒ∞N", "6": "YILLIK ƒ∞Zƒ∞N"}, "ECE": {"0": "14:00/23:00", "1": "12:00/21:00", "2": "OFF", "3": "12:00/21:00", "4": "12:00/21:00", "5": "TUZLA", "6": "TUZLA"}, "HAVƒ∞N": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "12:00/21:00", "6": "A√áILI≈û"}, "AY≈ûEG√úL": {"0": "10:00/19:00", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "MERVE": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "12:00/21:00", "3": "OFF", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "12:00/21:00"}}}, {"branch": "Tuzla", "weekLabel": "04 AƒûUSTOS  10 AƒûUSTOS", "weekStart": "2024-08-04", "weekEnd": "2024-08-10", "personelShifts": {"ESƒ∞N": {"0": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "1": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "2": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "3": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "4": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "5": "YILLIK ƒ∞Zƒ∞N", "6": "YILLIK ƒ∞Zƒ∞N"}, "ƒ∞LAYDA": {"0": "KAPANI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "Nƒ∞LSU": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "29 TEMMUZ - 4 AƒûUSTOS", "weekStart": "2024-07-29", "weekEnd": "2024-08-04", "personelShifts": {"ESƒ∞N": {"0": "*KAPANI≈û", "1": "12:00/21:00", "2": "*10:00/19:00", "3": "12:00/21:00", "4": "*10:00/19:00", "5": "12:00/21:00", "6": "*OFF"}, "ECE": {"0": "10:00/19:00", "1": "A√áILI≈û", "2": "*OFF", "3": "*KAPANI≈û", "4": "*A√áILI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}, "G√úL": {"0": "A√áILI≈û", "1": "*OFF", "2": "*KAPANI≈û", "3": "14:00/23:00", "4": "12:00/21:00", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "MELƒ∞SA": {"0": "14:00/23:00", "1": "09:00/18:00", "2": "A√áILI≈û", "3": "*OFF", "4": "*KAPANI≈û", "5": "14:00/23:00", "6": "12:00 - 21:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "28 TEMMUZ    03 AƒûUSTOS", "weekStart": "2024-07-28", "weekEnd": "2024-08-03", "personelShifts": {"ESƒ∞N": {"0": "TUZLA", "1": "TUZLA", "2": "TUZLA", "3": "TUZLA", "4": "TUZLA", "5": "TUZLA", "6": "TUZLA"}, "ECE": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "14:00/23:00", "3": "OFF", "4": "14:00/23:00", "5": "14:00/23:00", "6": "14:00/23:00"}, "EYL√úL": {"0": "10:00/19:00", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "*****", "5": "*****", "6": "*****"}, "HAVƒ∞N": {"0": "OFF", "1": "KAPANI≈û", "2": "10:00/19:00", "3": "10:00/19:00", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "AY≈ûEG√úL": {"0": "KAPANI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "MERVE": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "10:00/19:00"}}}, {"branch": "Tuzla", "weekLabel": "28 TEMMUZ    03 AƒûUSTOS", "weekStart": "2024-07-28", "weekEnd": "2024-08-03", "personelShifts": {"ESƒ∞N": {"0": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "1": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "2": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "3": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "4": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "5": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "6": "ESƒ∞N (B√ñLGE M√úD√úR√ú)"}, "AY√áA": {"0": "OFF", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "ƒ∞LAYDA": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "NAZ": {"0": "14:00/23:00", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "14:00/23:00", "4": "****", "5": "*****", "6": "****"}, "Nƒ∞LSU": {"0": "****", "1": "KAPANI≈û", "2": "*****", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "ECE(MAƒûAZA M.)": {"0": "****", "1": "****", "2": "****", "3": "****", "4": "ECE MAƒûAZA M√úD√úR√ú)", "5": "ECE MAƒûAZA M√úD√úR√ú)", "6": "ECE MAƒûAZA M√úD√úR√ú)"}}}, {"branch": "≈ûi≈üli", "weekLabel": "22 TEMMUZ - 28 TEMMUZ (2)", "weekStart": "2024-07-22", "weekEnd": "2024-07-28", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "10:00/19:00", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "10:00-19:00", "5": "12:00-21:00", "6": "OFF"}, "ECE": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "G√úL": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "10:00/19:00", "3": "OFF", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "MELƒ∞SA": {"0": "14:00/23:00", "1": "OFF", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "ELƒ∞F": {"0": "OFF", "1": "14:00/23:00", "2": "14:00/23:00", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}}}, {"branch": "Tuzla", "weekLabel": "21 TEMMUZ    27 TEMMUZ", "weekStart": "2024-07-21", "weekEnd": "2024-07-27", "personelShifts": {"ESƒ∞N": {"0": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "1": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "2": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "3": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "4": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "5": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "6": "ESƒ∞N (B√ñLGE M√úD√úR√ú)"}, "NAZ": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "14:00/23:00", "6": "14:00/23:00"}, "AY√áA": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "SAADET": {"0": "OFF", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "ƒ∞LAYDA": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "15 TEMMUZ - 21 TEMMUZ", "weekStart": "2024-07-15", "weekEnd": "2024-07-21", "personelShifts": {"ESƒ∞N": {"0": "14:00/23:00", "1": "KAPANI≈û", "2": "09:00/18:00", "3": "09:00/18:00", "4": "OFF", "5": "KAPANI≈û", "6": "14:00/23:00"}, "ECE": {"0": "KAPANI≈û", "1": "09:00/18:00", "2": "OFF", "3": "12:00/21:00", "4": "A√áILI≈û", "5": "14:00/23:00", "6": "KAPANI≈û"}, "G√úL": {"0": "09:00/18:00", "1": "OFF", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "MELƒ∞SA": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "14:00/23:00", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "OFF", "6": "12:00/21:00"}, "BEYZA": {"0": "OFF", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "14 TEMMUZ    20 TEMMUZ", "weekStart": "2024-07-14", "weekEnd": "2024-07-20", "personelShifts": {"ESƒ∞N": {"0": "OFF", "1": "OFF", "2": "TUZLA", "3": "TUZLA", "4": "TUZLA", "5": "TUZLA", "6": "TUZLA"}, "ECE": {"0": "TUZLA", "1": "TUZLA", "2": "10:00/19:00", "3": "OFF", "4": "14:00/23:00", "5": "14:00/23:00", "6": "10:00/19:00"}, "EYL√úL": {"0": "14:00/23:00", "1": "14:00/23:00", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "14:00/23:00"}, "HAVƒ∞N": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "AY≈ûEG√úL": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "OFF", "6": "KAPANI≈û"}, "MERVE": {"0": "10:00/19:00", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "10:00/19:00", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "OFF"}}}, {"branch": "Tuzla", "weekLabel": "14 TEMMUZ    20 TEMMUZ", "weekStart": "2024-07-14", "weekEnd": "2024-07-20", "personelShifts": {"ESƒ∞N": {"0": "OFF", "1": "OFF", "2": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "3": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "4": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "5": "ESƒ∞N (B√ñLGE M√úD√úR√ú)", "6": "ESƒ∞N (B√ñLGE M√úD√úR√ú)"}, "NAZ": {"0": "OFF", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "AY√áA": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "SAADET": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "ƒ∞LAYDA": {"0": "****", "1": "****", "2": "****", "3": "A√áILI≈û", "4": "12:00/21:00", "5": "14:00/23:00", "6": "14:00/23:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "07 TEMMUZ    13 TEMMUZ", "weekStart": "2024-07-07", "weekEnd": "2024-07-13", "personelShifts": {"ESƒ∞N": {"0": "TUZLA", "1": "TUZLA", "2": "TUZLA", "3": "TUZLA", "4": "TUZLA", "5": "TUZLA", "6": "TUZLA"}, "ECE": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "OFF", "3": "14:00/23:00", "4": "10:00/19:00", "5": "TUZLA", "6": "TUZLA"}, "EYL√úL": {"0": "OFF", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "10:00/19:00"}, "HAVƒ∞N": {"0": "KAPANI≈û", "1": "OFF", "2": "A√áILI≈û", "3": "10:00/19:00", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "14:00/23:00"}, "AY≈ûEG√úL": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "MERVE": {"0": "10:00/19:00", "1": "14:00/23:00", "2": "10:00/19:00", "3": "OFF", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "A√áILI≈û"}}}, {"branch": "Tuzla", "weekLabel": "07 TEMMUZ    13 TEMMUZ", "weekStart": "2024-07-07", "weekEnd": "2024-07-13", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "14:00/23:00", "2": "12:00/21:00", "3": "12:00/21:00", "4": "11:00/22:00", "5": "12:00/21:00", "6": "OFF (ECE)"}, "AHMET": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "ASUDE": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "KAPANI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "SAADET": {"0": "*KAPANI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "AY√áA": {"0": "****", "1": "****", "2": "****", "3": "****", "4": "****", "5": "13:00/22:00", "6": "14:00/23:00"}, "NAZ": {"0": "OFF", "1": "KAPANI≈û", "2": "****", "3": "****", "4": "****", "5": "****", "6": "****"}}}, {"branch": "≈ûi≈üli", "weekLabel": "01 TEMMUZ-07 TEMMUZ", "weekStart": "2024-07-01", "weekEnd": "2024-07-07", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "ECE": {"0": "A√áILI≈û", "1": "14:00/23:00", "2": "KAPANI≈û", "3": "13:00/22:00", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "OFF"}, "G√úL": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "13:00/22:00", "5": "14:00/23:00", "6": "KAPANI≈û"}, "SENA": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "13:00/22:00", "3": "OFF", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "13:00/22:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "30 HAZƒ∞RAN 06 TEMMUZ", "weekStart": "2024-06-30", "weekEnd": "2024-07-06", "personelShifts": {"ESƒ∞N": {"0": "TUZLA", "1": "TUZLA", "2": "TUZLA", "3": "TUZLA", "4": "TUZLA", "5": "TUZLA", "6": "TUZLA"}, "ECE": {"0": "14:00/23:00", "1": "A√áILI≈û", "2": "10:00/19:00", "3": "10:00/19:00", "4": "10:00/19:00", "5": "14:00/23:00", "6": "A√áILI≈û"}, "EYL√úL": {"0": "KAPANI≈û", "1": "TUZLA", "2": "TUZLA", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "OFF", "6": "KAPANI≈û"}, "HAVƒ∞N": {"0": "A√áILI≈û", "1": "13:00/22:00", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "OFF"}, "AY≈ûEG√úL": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "10:00/19:00"}, "MERVE": {"0": "******", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "14:00/23:00", "4": "12:00/21:00", "5": "10:00/19:00", "6": "KAPANI≈û"}, "UMUT": {"0": "A√áILI≈û", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "****", "4": "*****", "5": "*****", "6": "******"}}}, {"branch": "Tuzla", "weekLabel": "30 HAZƒ∞RAN    06 TEMMUZ", "weekStart": "2024-06-30", "weekEnd": "2024-07-06", "personelShifts": {"ESƒ∞N": {"0": "ARA", "1": "ARA", "2": "ARA", "3": "ARA", "4": "ARA", "5": "ARA", "6": "ARA"}, "NAZ": {"0": "10:00/19:00", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "AHMET": {"0": "****", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "ASUDE": {"0": "****", "1": "****", "2": "13:00/22:00", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "SAADET": {"0": "****", "1": "****", "2": "****", "3": "****", "4": "12:00/21:00", "5": "11:00/22:00", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "24 HAZƒ∞RAN-30 HAZƒ∞RAN", "weekStart": "2024-06-24", "weekEnd": "2024-06-30", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "12:00/21:00", "2": "A√áILI≈û", "3": "10:00/19:00", "4": "14:00/23:00", "5": "KAPANI≈û", "6": "OFF"}, "ECE": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "13:00/22:00", "6": "A√áILI≈û"}, "G√úL": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "12:00/21:00", "3": "A√áILI≈û", "4": "10:00/19:00", "5": "OFF", "6": "KAPANI≈û"}, "AZƒ∞Z": {"0": "14:00/23:00", "1": "OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "13:00/22:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "17 HAZƒ∞RAN- 23 HAZƒ∞RAN", "weekStart": "2024-06-17", "weekEnd": "2024-06-23", "personelShifts": {"17 HAZƒ∞RAN/23 HAZƒ∞RAN": {"0": "PAZARTESƒ∞", "1": "SALI", "2": "√áAR≈ûAMBA", "3": "PER≈ûEMBE", "4": "CUMA", "5": "CUMARTESƒ∞", "6": "PAZAR"}, "ESƒ∞N": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "10:00/19:00", "4": "A√áILI≈û", "5": "AK≈ûAM", "6": "AK≈ûAM"}, "ECE": {"0": "OFF", "1": "KAPANI≈û", "2": "12:00/21:00", "3": "A√áILI≈û", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "14:00/23:00"}, "G√úL": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "14:00/23:00", "4": "14:00/23:00", "5": "OFF", "6": "10:00/19:00"}, "AZƒ∞Z": {"0": "12:00/21:00", "1": "OFF", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "12:00/21:00", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "16 HAZƒ∞RAN-22 HAZƒ∞RAN", "weekStart": "2024-06-16", "weekEnd": "2024-06-22", "personelShifts": {"ESƒ∞N": {"0": "TUZLA", "1": "TUZLA", "2": "12:00/21:00 (TUZLA", "3": "12:00/21:00", "4": "12:00/21:00", "5": "14:00/23:00", "6": "OFF"}, "ECE": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "OFF", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "12:00/21:00"}, "EYL√úL": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "*KAPANI≈û", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "OFF", "6": "A√áILI≈û"}, "UMUT": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "EMƒ∞R TALHA": {"0": "OFF", "1": "10:00/19:00", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "14:00/23:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "09 HAZƒ∞RAN 15 HAZƒ∞RAN", "weekStart": "2024-06-09", "weekEnd": "2024-06-15", "personelShifts": {"ESƒ∞N": {"0": "A√áILI≈û", "1": "TUZLA - 10:00", "2": "14:00/23:00", "3": "14:00/23:00", "4": "10:00/19:00", "5": "12:00/21:00", "6": "OFF"}, "ECE": {"0": "10:00/19:00", "1": "A√áILI≈û", "2": "10:00/19:00", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "14:00/23:00"}, "EYL√úL": {"0": "KAPANI≈û", "1": "10:00/23:00", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "10:00/19:00"}, "MELƒ∞S": {"0": "OFF", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "10:00/19:00", "4": "A√áILI≈û", "5": "10:00/19:00", "6": "KAPANI≈û"}, "UMUT": {"0": "14:00/23:00", "1": "TUZLA - 10:00", "2": "OFF", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "ERDEM": {"0": "***", "1": "14:00/23:00", "2": "*OFF"}}}, {"branch": "≈ûi≈üli", "weekLabel": "27 MAYIS-02 HAZƒ∞RAN", "weekStart": "2024-05-27", "weekEnd": "2024-06-02", "personelShifts": {"27 MAYIS/02 HAZƒ∞RAN": {"0": "PAZARTESƒ∞", "1": "SALI", "2": "√áAR≈ûAMBA", "3": "PER≈ûEMBE", "4": "CUMA", "5": "CUMARTESƒ∞", "6": "PAZAR"}, "ESƒ∞N": {"0": "10:00/19:00", "1": "10:00/19:00", "2": "13:00/22:00", "3": "A√áILI≈û", "4": "OFF", "5": "14:00/23:00", "6": "10:00/19:00"}, "ECE": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "10:00/19:00", "6": "A√áILI≈û"}, "G√úL": {"0": "A√áILI≈û", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}, "AZƒ∞Z": {"0": "14:00/23:00", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "13:00/22:00", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "OFF**"}, "YAƒûMUR": {"0": "OFF", "1": "OFF", "2": "OFF", "3": "OFF", "4": "A√áILI≈û", "5": "OFF", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "26 MAYIS-1 HAZƒ∞RAN", "weekStart": "2024-05-26", "weekEnd": "2024-06-01", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "A√áILI≈û", "2": "10:00/19:00", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "OFF", "6": "OFF"}, "ECE": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "OFF", "3": "OFF", "4": "14:00/23:00", "5": "*09:00/19:00", "6": "14:00/23:00"}, "EYL√úL": {"0": "A√áILI≈û", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "OFF", "5": "*KAPANI≈û", "6": "A√áILI≈û"}, "MELƒ∞S": {"0": "12:00/21:00", "1": "*KAPANI≈û", "2": "*KAPANI≈û", "3": "10:00/19:00", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "10:00/19:00"}, "UMUT": {"0": "14:00/23:00", "1": "OFF", "2": "*KAPANI≈û", "3": "*KAPANI≈û", "4": "*KAPANI≈û", "5": "*KAPANI≈û", "6": "*KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "20 MAYIS-26 MAYIS", "weekStart": "2024-05-20", "weekEnd": "2024-05-26", "personelShifts": {"20 MAYIS/26 MAYIS": {"0": "PAZARTESƒ∞", "1": "SALI", "2": "√áAR≈ûAMBA", "3": "PER≈ûEMBE", "4": "CUMA", "5": "CUMARTESƒ∞", "6": "PAZAR"}, "ESƒ∞N": {"0": "KAPANI≈û", "1": "10:00/19:00", "2": "14:00/23:00", "3": "10:00/19:00", "4": "A√áILI≈û", "5": "OFF**", "6": "KAPANI≈û"}, "G√úL": {"0": "10:00/19:00", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "OFF**", "5": "KAPANI≈û", "6": "10:00/19:00"}, "AZƒ∞Z": {"0": "14:00/23:00", "1": "OFF**", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "A√áILI≈û"}, "ECE": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "OFF**", "3": "KAPANI≈û", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "14:00/23:00"}, "YAƒûMUR": {"0": "OFF", "1": "14:00/23:00", "2": "OFF", "3": "OFF", "4": "14:00/23:00", "5": "OFF", "6": "OFF"}}}, {"branch": "≈ûi≈üli", "weekLabel": "19 MAYIS-25 MAYIS", "weekStart": "2024-05-19", "weekEnd": "2024-05-25", "personelShifts": {"ESƒ∞N": {"0": "A√áILI≈û", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "10:00/23:00", "4": "10:00/19:00", "5": "14:00/23:00", "6": "10:00/19:00"}, "ECE": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "KAPANI≈û", "3": "OFF", "4": "14:00/23:00", "5": "10:00/19:00", "6": "KAPANI≈û"}, "EYL√úL": {"0": "RAPOR", "1": "RAPOR", "2": "RAPOR", "3": "RAPOR", "4": "RAPOR", "5": "RAPOR", "6": "RAPOR"}, "MELƒ∞S": {"0": "****", "1": "****", "2": "****", "3": "****", "4": "****", "5": "****", "6": "KAPANI≈û"}, "YUNUS": {"0": "12:00/21:00", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}, "UMUT": {"0": "OFF", "1": "KAPANI≈û", "2": "12:00/21:00", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "13 MAYIS-19 MAYIS", "weekStart": "2024-05-13", "weekEnd": "2024-05-19", "personelShifts": {"13 MAYIS/19 MAYIS": {"0": "PAZARTESƒ∞", "1": "SALI", "2": "√áAR≈ûAMBA", "3": "PER≈ûEMBE", "4": "CUMA", "5": "CUMARTESƒ∞", "6": "PAZAR"}, "ESƒ∞N": {"0": "KAPANI≈û", "1": "KAPANI≈û**", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "10:00/19:00", "6": "OFF"}, "G√úL": {"0": "A√áILI≈û", "1": "14:00/23:00", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "OFF", "5": "14:00/23:00", "6": "A√áILI≈û***"}, "AZƒ∞Z": {"0": "10:00/19:00", "1": "A√áILI≈û", "2": "OFF***", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "ECE": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "OFF***", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "14:00/23:00"}, "YAƒûMUR": {"0": "OFF", "1": "OFF", "2": "OFF***", "3": "OFF***", "4": "KAPANI≈û", "5": "OFF", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "12 MAYIS- 18 MAYIS", "weekStart": "2024-05-12", "weekEnd": "2024-05-18", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "OFF", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "ECE": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "KAPANI≈û", "3": "12:00/21:00", "4": "A√áILI≈û", "5": "OFF", "6": "OFF"}, "EYL√úL": {"0": "A√áILI≈û", "1": "KAPANI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "YUNUS": {"0": "****", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "UMUT": {"0": "****", "1": "****", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "06 MAYIS-12MAYIS", "weekStart": "2024-05-06", "weekEnd": "2024-05-12", "personelShifts": {"06 MAYIS/12 MAYIS": {"0": "PAZARTESƒ∞", "1": "SALI", "2": "√áAR≈ûAMBA", "3": "PER≈ûEMBE", "4": "CUMA", "5": "CUMARTESƒ∞", "6": "PAZAR"}, "ESƒ∞N": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "14:00/23:00", "3": "14:00/23:00", "4": "OFF", "5": "KAPANI≈û", "6": "10:00/19:00"}, "G√úL": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "A√áILI≈û***", "4": "KAPANI≈û", "5": "OFF***", "6": "14:00/23:00"}, "AZƒ∞Z": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "OFF**", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "14:00/23:00", "6": "KAPANI≈û"}, "ECE": {"0": "A√áILI≈û", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "OFF", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "YAƒûMUR": {"0": "OFF", "1": "OFF", "2": "OFF", "3": "OFF", "4": "A√áILI≈û", "5": "10:00/19:00", "6": "OFF"}}}, {"branch": "≈ûi≈üli", "weekLabel": "5 MAYIS-11 MAYIS", "weekStart": "2024-05-05", "weekEnd": "2024-05-11", "personelShifts": {"ESƒ∞N": {"0": "Y.ƒ∞", "1": "Y.ƒ∞", "2": "Y.ƒ∞", "3": "Y.ƒ∞", "4": "Y.ƒ∞", "5": "Y.ƒ∞", "6": "Y.ƒ∞"}, "ECE": {"0": "14:00/23:00", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "14:00/23:00", "6": "10:00/19:00"}, "EYL√úL": {"0": "A√áILI≈û", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "10:00/19:00", "5": "KAPANI≈û", "6": "14:00/23:00"}, "FURKAN": {"0": "10:00/19:00", "1": "A√áILI≈û", "2": "KAPANI≈û", "3": "10:00/19:00", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "KAPANI≈û"}, "Dƒ∞CLE": {"0": "KAPANI≈û", "1": "10:00/19:00", "2": "10:00/19:00", "3": "*KAPANI≈û", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "5 MAYIS-11 MAYIS (2)", "weekStart": "2024-05-05", "weekEnd": "2024-05-11", "personelShifts": {"ESƒ∞N": {"0": "Y.ƒ∞", "1": "Y.ƒ∞", "2": "Y.ƒ∞", "3": "Y.ƒ∞", "4": "Y.ƒ∞", "5": "Y.ƒ∞", "6": "Y.ƒ∞"}, "ECE": {"0": "*10:00 - 23:00", "1": "KAPANI≈û", "2": "*OFF", "3": "A√áILI≈û", "4": "14:00 - 23:00", "5": "A√áILI≈û", "6": "*10:00 - 23:00"}, "EYL√úL": {"0": "A√áILI≈û", "1": "*OFF", "2": "*10:00 - 23:00", "3": "*10:00 - 23:00", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "FURKAN": {"0": "KAPANI≈û", "1": "*10:00 - 23:00", "2": "A√áILI≈û", "3": "*OFF", "4": "KAPANI≈û", "5": "*10:00 - 23:00", "6": "A√áILI≈û"}, "Dƒ∞CLE": {"0": "*OFF", "1": "A√áILI≈û", "2": "KAPANI≈û", "3": "KAPANI≈û", "4": "10:00 - 19:00", "5": "OFF", "6": "OFF"}}}, {"branch": "≈ûi≈üli", "weekLabel": "29 Nƒ∞SAN-05 MAYIS", "weekStart": "2024-04-29", "weekEnd": "2024-05-05", "personelShifts": {"29 Nƒ∞SAN/05 MAYIS": {"0": "PAZARTESƒ∞", "1": "SALI", "2": "√áAR≈ûAMBA", "3": "PER≈ûEMBE", "4": "CUMA", "5": "CUMARTESƒ∞", "6": "PAZAR"}, "ESƒ∞N": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "G√úL": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "ARA", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "ARA"}, "YAƒûMUR": {"0": "OFF", "1": "A√áILI≈û", "2": "OFF", "3": "OFF", "4": "KAPANI≈û", "5": "OFF", "6": "OFF"}, "AZƒ∞Z": {"0": "ARA", "1": "ARA", "2": "OFF", "3": "AK≈ûAM", "4": "ARA", "5": "ARA", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "28 Nƒ∞SAN 04 MAYIS", "weekStart": "2024-04-28", "weekEnd": "2024-05-04", "personelShifts": {"ESƒ∞N": {"0": "14:00/23.00", "1": "14:00/23.00", "2": "10:00/19:00", "3": "*14:00/23.00", "4": "10:00/19:00", "5": "10:00/19:00", "6": "OFF"}, "ECE": {"0": "10:00/19:00", "1": "*A√áILI≈û", "2": "*OFF", "3": "*OFF", "4": "*KAPANI≈û", "5": "14:00/23:00", "6": "14:00/23:00"}, "EYL√úL": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "*10:00/19:00", "4": "*A√áILI≈û", "5": "*KAPANI≈û", "6": "10:00/19:00"}, "FURKAN": {"0": "*KAPANI≈û", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "*A√áILI≈û", "4": "OFF", "5": "*14:00/23.00", "6": "KAPANI≈û"}, "Dƒ∞CLE": {"0": "OFF", "1": "KAPANI≈û", "2": "14:00/23.00", "3": "*KAPANI≈û", "4": "14:00/23.00", "5": "A√áILI≈û", "6": "*A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "22 Nƒ∞SAN-28 Nƒ∞SAN", "weekStart": "2024-04-22", "weekEnd": "2024-04-28", "personelShifts": {"22 Nƒ∞SAN/28 Nƒ∞SAN": {"0": "PAZARTESƒ∞", "1": "SALI", "2": "√áAR≈ûAMBA", "3": "PER≈ûEMBE", "4": "CUMA", "5": "CUMARTESƒ∞", "6": "PAZAR"}, "ESƒ∞N": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "OFF", "6": "KAPANI≈û"}, "MERAL": {"0": "OFF", "1": "OFF", "2": "OFF", "3": "OFF", "4": "OFF", "5": "OFF", "6": "OFF"}, "YAƒûMUR": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "KAPANI≈û", "3": "OFF", "4": "OFF", "5": "SABAH", "6": "OFF"}, "G√úL": {"0": "ARA", "1": "ARA", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "21 Nƒ∞SAN-27 Nƒ∞SAN", "weekStart": "2024-04-21", "weekEnd": "2024-04-27", "personelShifts": {"ESƒ∞N": {"0": "*14:00/23:00", "1": "14:00/23:00", "2": "10:00/19:00", "3": "A√áILI≈û", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "OFF"}, "ECE": {"0": "10:00/19:00", "1": "*A√áILI≈û", "2": "*OFF", "3": "*KAPANI≈û", "4": "10:00/19:00", "5": "KAPANI≈û", "6": "14:00/23:00"}, "EYL√úL": {"0": "*A√áILI≈û", "1": "*OFF", "2": "*KAPANI≈û", "3": "14:00/23:00", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}, "FURKAN": {"0": "*14:00/23:00", "1": "10:00/19:00", "2": "*A√áILI≈û", "3": "*OFF", "4": "*14:00/23:00", "5": "14:00/23:00", "6": "KAPANI≈û"}, "Dƒ∞CLE": {"0": "*KAPANI≈û", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "10:00/19:00", "4": "A√áILI≈û", "5": "OFF", "6": "10:00/19:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "15 Nƒ∞SAN-21 Nƒ∞SAN", "weekStart": "2024-04-15", "weekEnd": "2024-04-21", "personelShifts": {"08 Nƒ∞SAN/14 Nƒ∞SAN": {"0": "PAZARTESƒ∞", "1": "SALI", "2": "√áAR≈ûAMBA", "3": "PER≈ûEMBE", "4": "CUMA", "5": "CUMARTESƒ∞", "6": "PAZAR"}, "ESƒ∞N": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "FULL", "4": "AK≈ûAM", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "MERAL": {"0": "OFF", "1": "OFF", "2": "OFF", "3": "OFF", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "YAƒûMUR": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "OFF", "4": "OFF", "5": "OFF", "6": "OFF"}, "G√úL": {"0": "OFF", "1": "OFF", "2": "OFF", "3": "KAPANI≈û", "4": "ARA", "5": "ARA", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "14 Nƒ∞SAN-20 Nƒ∞SAN", "weekStart": "2024-04-14", "weekEnd": "2024-04-20", "personelShifts": {"ESƒ∞N": {"0": "A√áILI≈û", "1": "14:00/23:00", "2": "10:00/19:00", "3": "10:00/19:00", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "OFF"}, "ECE": {"0": "14:00/23:00", "1": "*A√áILI≈û", "2": "*OFF", "3": "*KAPANI≈û", "4": "10:00/19:00", "5": "14:00/23:00", "6": "14:00/23:00"}, "EYL√úL": {"0": "*KAPANI≈û", "1": "*OFF", "2": "*KAPANI≈û", "3": "14:00/23:00", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}, "FURKAN": {"0": "10:00/19:00", "1": "10:00/19:00", "2": "*A√áILI≈û", "3": "*OFF", "4": "*14:00/23:00", "5": "*14:00/23:00", "6": "KAPANI≈û"}, "Dƒ∞CLE": {"0": "*OFF", "1": "*KAPANI≈û", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "10:00/19:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "08 Nƒ∞SAN-14 Nƒ∞SAN", "weekStart": "2024-04-08", "weekEnd": "2024-04-14", "personelShifts": {"08 Nƒ∞SAN/14 Nƒ∞SAN": {"0": "PAZARTESƒ∞", "1": "SALI", "2": "√áAR≈ûAMBA", "3": "PER≈ûEMBE", "4": "CUMA", "5": "CUMARTESƒ∞", "6": "PAZAR"}, "ESƒ∞N": {"0": "A√áILI≈û", "1": "KAPANI≈û", "2": "14:00-23:00", "3": "14:00-23:00", "4": "A√áILI≈û", "5": "OFF", "6": "KAPANI≈û"}, "FURKAN": {"0": "14:00/23:00", "1": "ARACI", "2": "OFF", "3": "OFF", "4": "OFF", "5": "KAPANI≈û", "6": "OFF"}, "YAƒûMUR": {"0": "OFF", "1": "A√áILI≈û", "2": "OFF", "3": "OFF", "4": "OFF", "5": "A√áILI≈û", "6": "14:00/23:00"}, "MERAL": {"0": "KAPANI≈û", "1": "OFF", "2": "OFF", "3": "OFF", "4": "KAPANI≈û", "5": "ARACI", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "07 Nƒ∞SAN-13 Nƒ∞SAN", "weekStart": "2024-04-07", "weekEnd": "2024-04-13", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "14:00/23:00", "2": "10:00/19:00", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "10:00/19:00"}, "ECE": {"0": "14:00/23:00", "1": "*A√áILI≈û", "2": "*OFF", "3": "*KAPANI≈û", "4": "14:00/23:00", "5": "10:00/19:00", "6": "14:00/23:00"}, "EYL√úL": {"0": "*A√áILI≈û", "1": "*OFF", "2": "*KAPANI≈û", "3": "10:00/19:00", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "*10:00/19:00"}, "FURKAN": {"0": "KAPANI≈û", "1": "10:00/19:00", "2": "*A√áILI≈û", "3": "*OFF", "4": "*KAPANI≈û", "5": "*14:00/23:00", "6": "*KAPANI≈û"}, "Dƒ∞CLE": {"0": "*OFF", "1": "*KAPANI≈û", "2": "14:00/23:00", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "14:00/23:00", "6": "*A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "01 Nƒ∞SAN-07 Nƒ∞SAN", "weekStart": "2024-04-01", "weekEnd": "2024-04-07", "personelShifts": {"ESƒ∞N": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "OFF", "5": "AK≈ûAM", "6": "SABAH"}, "FURKAN": {"0": "AK≈ûAM", "1": "AK≈ûAM", "2": "OFF", "4": "SABAH", "5": "12:00-21:00", "6": "12:00-21:00"}, "YAƒûMUR": {"0": "ARA", "1": "ARA", "2": "AK≈ûAM", "3": "OFF", "4": "ARA", "5": "OFF", "6": "OFF"}, "MERAL": {"0": "OFF", "1": "OFF", "2": "OFF", "3": "OFF", "4": "AK≈ûAM", "5": "SABAH", "6": "AK≈ûAM"}}}, {"branch": "≈ûi≈üli", "weekLabel": "31 MART- 6 Nƒ∞SAN", "weekStart": "2024-03-31", "weekEnd": "2024-04-06", "personelShifts": {"ESƒ∞N": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "10:00/19:00", "3": "A√áILI≈û", "4": "*OFF", "5": "KAPANI≈û", "6": "10:00/19:00"}, "ECE": {"0": "10:00/19:00", "1": "A√áILI≈û", "2": "*OFF", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "EYL√úL": {"0": "A√áILI≈û", "1": "*OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "10:00/19:00", "5": "14:00/23:00", "6": "A√áILI≈û"}, "FURKAN": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "*OFF", "4": "KAPANI≈û", "5": "*14:00/23:00", "6": "*14:00/23:00"}, "Dƒ∞CLE": {"0": "*OFF", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "10:00/19:00", "4": "A√áILI≈û", "5": "10:00/19:00", "6": "14:00/23:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "25 MART-31 MART 2024", "weekStart": "2024-03-25", "weekEnd": "2024-03-31", "personelShifts": {"MERAL": {"0": "AK≈ûAM", "1": "OFF", "2": "AK≈ûAM", "3": "SABAH", "4": "SABAH", "5": "ARA", "6": "SABAH"}, "ESƒ∞N": {"0": "SABAH", "1": "AK≈ûAM", "2": "SABAH", "3": "ARA", "4": "OFF", "5": "AK≈ûAM", "6": "AK≈ûAM"}, "ECE": {"0": "ARA", "1": "SABAH", "2": "OFF", "3": "AK≈ûAM", "4": "AK≈ûAM", "5": "SABAH", "6": "ARA"}}}, {"branch": "≈ûi≈üli", "weekLabel": "24 MART- 30 MART", "weekStart": "2024-03-24", "weekEnd": "2024-03-30", "personelShifts": {"ESƒ∞N": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "10:00/19:00", "3": "A√áILI≈û", "4": "*OFF", "5": "KAPANI≈û", "6": "10:00/19:00"}, "ECE": {"0": "10:00/19:00", "1": "A√áILI≈û", "2": "*OFF", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "EYL√úL": {"0": "A√áILI≈û", "1": "*OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "10:00/19:00", "5": "14:00/23:00", "6": "A√áILI≈û"}, "FURKAN": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "*OFF", "4": "KAPANI≈û", "5": "*14:00/23:00", "6": "*14:00/23:00"}, "Dƒ∞CLE": {"0": "*OFF", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "10:00/19:00", "4": "A√áILI≈û", "5": "10:00/19:00", "6": "*ƒ∞Zƒ∞N"}}}, {"branch": "≈ûi≈üli", "weekLabel": "17 MART - 24 MART 2024", "weekStart": "2024-03-17", "weekEnd": "2024-03-24", "personelShifts": {"MERAL": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "ARA", "6": "A√áILI≈û"}, "ESƒ∞N": {"0": "KAPANI≈û", "1": "ARA", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "ARA"}, "ECE": {"0": "OFF", "1": "KAPANI≈û", "2": "ARA", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "17 MART- 23 MART", "weekStart": "2024-03-17", "weekEnd": "2024-03-23", "personelShifts": {"ESƒ∞N": {"0": "14:00/19:00", "1": "14:00/23:00", "2": "10:00/19:00", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "*OFF"}, "ECE": {"0": "10:00/19:00", "1": "*A√áILI≈û", "2": "*OFF", "3": "*KAPANI≈û", "4": "10:00/19:00", "5": "KAPANI≈û", "6": "14:00/23:00"}, "EYL√úL": {"0": "*A√áILI≈û", "1": "OFF", "2": "*KAPANI≈û", "3": "14:00/23:00", "4": "14:00/23:00", "5": "14:00/23:00", "6": "A√áILI≈û"}, "FURKAN": {"0": "KAPANI≈û", "1": "10:00/19:00", "2": "*A√áILI≈û", "3": "*OFF", "4": "*14:00/23:00", "5": "*14:00/23:00", "6": "10:00/19:00"}, "Dƒ∞CLE": {"0": "OFF", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "10:00/19:00", "4": "*A√áILI≈û", "5": "*A√áILI≈û", "6": "*ƒ∞Zƒ∞N"}}}, {"branch": "≈ûi≈üli", "weekLabel": "11 MART - 16 MART", "weekStart": "2024-03-11", "weekEnd": "2024-03-16", "personelShifts": {"MERAL": {"0": "A√áILI≈û", "1": "*A√áILI≈û", "2": "*KAPANI≈û", "3": "*ƒ∞Zƒ∞N", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "ESƒ∞N": {"0": "KAPANI≈û", "1": "ARACI", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "ƒ∞Zƒ∞N", "5": "KAPANI≈û", "6": "ARACI"}, "ECE": {"0": "ARACI", "1": "KAPANI≈û", "2": "ƒ∞Zƒ∞N", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "ARACI", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "11 MART - 16 MART 2024", "weekStart": "2024-03-11", "weekEnd": "2024-03-16", "personelShifts": {"MERAL": {"0": "SABAH", "1": "OFF*", "2": "AK≈ûAM", "3": "SABAH*", "4": "AK≈ûAM", "5": "ARA", "6": "AK≈ûAM"}, "ESƒ∞N": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "SABAH", "3": "ARA", "4": "OFF*", "5": "AK≈ûAM", "6": "SABAH"}, "ECE": {"0": "ARA", "1": "SABAH", "2": "OFF*", "3": "AK≈ûAM", "4": "SABAH", "5": "SABAH", "6": "ARA"}}}, {"branch": "≈ûi≈üli", "weekLabel": "10 MART - 16 MART", "weekStart": "2024-03-10", "weekEnd": "2024-03-16", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "14:00/23:00", "2": "10:00/19:00", "3": "10:00/19:00", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "OFF"}, "ECE": {"0": "14:00/23:00", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "10:00/19:00", "5": "14:00/23:00", "6": "14:00/23:00"}, "EYL√úL": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}, "FURKAN": {"0": "KAPANI≈û", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "OFF", "4": "*14:00/23:00", "5": "*14:00/23:00", "6": "KAPANI≈û"}, "Dƒ∞CLE": {"0": "OFF", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "10:00/19:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "4 MART - 10 MART", "weekStart": "2024-03-04", "weekEnd": "2024-03-10", "personelShifts": {"MERAL": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "KAPANI≈û", "3": "ƒ∞Zƒ∞N", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "KAPANI≈û"}, "ESƒ∞N": {"0": "KAPANI≈û", "1": "ARACI", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "ƒ∞Zƒ∞N", "5": "KAPANI≈û", "6": "ARACI"}, "ECE": {"0": "ARACI", "1": "KAPANI≈û", "2": "ƒ∞Zƒ∞N", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "ARACI", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "03 MART- 09 MART", "weekStart": "2024-03-03", "weekEnd": "2024-03-09", "personelShifts": {"ESƒ∞N": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "10:00/19:00", "3": "A√áILI≈û", "4": "10:00/19:00", "5": "14:00/23:00", "6": "OFF"}, "ECE": {"0": "10:00/19:00", "1": "10:00/19:00", "2": "OFF", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "14:00/23:00"}, "EYL√úL": {"0": "A√áILI≈û", "1": "*OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}, "FURKAN": {"0": "14:00/23:00", "1": "*A√áILI≈û", "2": "A√áILI≈û", "3": "OFF", "4": "*14:00/23:00", "5": "*14:00/23:00", "6": "KAPANI≈û"}, "Dƒ∞CLE": {"0": "OFF", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "10:00/19:00", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "10:00/19:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "24 ≈ûUBAT - 02 MART", "weekStart": "2024-02-24", "weekEnd": "2024-03-02", "personelShifts": {"ESƒ∞N": {"0": "*14:00/23:00", "1": "10:00/19:00", "2": "10:00/19:00", "3": "A√áILI≈û", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "OFF"}, "ECE": {"0": "*OFF", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "*KAPANI≈û", "4": "10:00/19:00", "5": "KAPANI≈û", "6": "14:00/23:00"}, "EYL√úL": {"0": "A√áILI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "10:00/19:00", "4": "A√áILI≈û", "5": "12:00/21:00", "6": "10:00/19:00"}, "FURKAN": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "KAPANI≈û"}, "Dƒ∞CLE": {"0": "10:00/19:00", "1": "A√áILI≈û", "2": "*OFF", "3": "14:00/23:00", "4": "12:00/21:00", "5": "10:00/19:00", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "17 ≈ûUBAT-23 ≈ûUBAT", "weekStart": "2024-02-17", "weekEnd": "2024-02-23", "personelShifts": {"ESƒ∞N": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "10:00/19:00", "4": "A√áILI≈û", "5": "OFF", "6": "12:00/21:00"}, "ECE": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "12:00/21:00", "5": "A√áILI≈û", "6": "*KAPANI≈û"}, "EYL√úL": {"0": "10:00/19:00", "1": "OFF", "2": "KAPANI≈û", "3": "12:00/21:00", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "FURKAN": {"0": "*OFF", "1": "*KAPANI≈û", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}, "Dƒ∞CLE": {"0": "14:00/23:00", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "OFF", "4": "A√áILI≈û", "5": "12:00/21:00", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "10 ≈ûUBAT- 16 ≈ûUBAT", "weekStart": "2024-02-10", "weekEnd": "2024-02-16", "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "14:00/23:00", "2": "10:00/19:00", "3": "A√áILI≈û", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "OFF"}, "ECE": {"0": "14:00/23:00", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "10:00/9:00"}, "EYL√úL": {"0": "A√áILI≈û", "1": "KAPANI≈û", "2": "KAPANI≈û", "3": "10:00/19:00", "4": "*OFF", "5": "10:00/19:00", "6": "KAPANI≈û"}, "FURKAN": {"0": "KAPANI≈û", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "*OFF", "6": "A√áILI≈û"}, "Dƒ∞CLE": {"0": "****", "1": "14:00/23:00", "2": "10:00/19:00", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}}}, {"branch": "≈ûi≈üli", "weekLabel": "3 ≈ûUBAT-9 ≈ûUBAT", "weekStart": "2024-02-03", "weekEnd": "2024-02-09", "personelShifts": {"ESƒ∞N": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "OFF", "6": "14:00/23:00"}, "ECE": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "KAPANI≈û", "5": "14:00/23:00", "6": "OFF"}, "EYL√úL": {"0": "10:00/19:00", "1": "KAPANI≈û", "2": "12:00/21:00", "3": "KAPANI≈û", "4": "OFF", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "FURKAN": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "**OFF", "3": "10:00/19:00", "4": "14:00/23:00", "5": "KAPANI≈û", "6": "KAPANI≈û"}, "DURU": {"0": "***", "1": "***", "2": "***", "3": "***", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "26 ≈ûUB - 3 MART", "weekStart": null, "weekEnd": null, "personelShifts": {"ESƒ∞N": {"0": "ARACI", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "ARACI", "4": "KAPANI≈û", "5": "A√áILI≈û", "6": "ƒ∞Zƒ∞NLƒ∞"}, "MERAL": {"0": "A√áILI≈û", "1": "ƒ∞Zƒ∞NLƒ∞", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "ARACI", "5": "KAPANI≈û", "6": "A√áILI≈û"}, "ECE": {"0": "KAPANI≈û", "1": "A√áILI≈û", "2": "ARACI", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "ƒ∞Zƒ∞NLƒ∞", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "HAZƒ∞RAN-", "weekStart": null, "weekEnd": null, "personelShifts": {"10 HAZƒ∞RAN/16 HAZƒ∞RAN": {"0": "PAZARTESƒ∞", "1": "SALI", "2": "√áAR≈ûAMBA", "3": "PER≈ûEMBE", "4": "CUMA", "5": "CUMARTESƒ∞", "6": "PAZAR"}, "ESƒ∞N": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "11:00/20:00", "3": "11:00/20:00", "4": "OFF", "5": "KAPANI≈û", "6": "14:00/23:00"}, "ECE": {"0": "KAPANI≈û", "1": "11:00/20:00", "2": "OFF", "3": "KAPANI≈û", "4": "A√áILI≈û", "5": "14:00/23:00", "6": "10:00/19:00"}, "G√úL": {"0": "10:00/19:00", "1": "KAPANI≈û", "2": "A√áILI≈û", "3": "OFF", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}, "AZƒ∞Z": {"0": "15:00/00:00", "1": "OFF", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "16-22 ARALIK", "weekStart": null, "weekEnd": null, "personelShifts": {"ESƒ∞N": {"0": "A√áILI≈û", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "10:00/19:00", "4": "10:00/19:00", "5": "OFF", "6": "14:00/23:00"}, "ECE": {"0": "*14:00/23:00", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "14:00/23:00", "5": "10:00/19:00", "6": "10:00/19:00"}, "MELƒ∞SA": {"0": "KAPANI≈û", "1": "*KAPANI≈û", "2": "KAPANI≈û", "3": "*OFF", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "A√áILI≈û"}, "EYL√úL": {"0": "*12:00:21:00", "1": "OFF", "2": "14:00/23:00", "3": "A√áILI≈û", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "*KAPANI≈û"}, "FURKAN": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "A√áILI≈û", "3": "KAPANI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "23-29 ARALIK", "weekStart": null, "weekEnd": null, "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "14:00/23:00", "2": "10:00/19:00", "3": "10:00/19:00", "4": "10:00/19:00", "5": "OFF", "6": "14:00/23:00"}, "ECE": {"0": "14:00/23:00", "1": "A√áILI≈û", "2": "OFF", "3": "KAPANI≈û", "4": "KAPANI≈û", "5": "10:00/19:00", "6": "A√áILI≈û"}, "MELƒ∞SA": {"0": "12:00/21:00", "1": "*KAPANI≈û", "2": "*14:00/23:00", "3": "*OFF", "4": "14:00/23:00", "5": "A√áILI≈û", "6": "10:00/19:00"}, "EYL√úL": {"0": "KAPANI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "14:00/23:00", "4": "A√áILI≈û", "5": "14:00/23:00", "6": "12:00/21:00"}, "FURKAN": {"0": "A√áILI≈û", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "KAPANI≈û"}}}, {"branch": "≈ûi≈üli", "weekLabel": "02 HAZƒ∞RAN-08 HAZƒ∞RA", "weekStart": null, "weekEnd": null, "personelShifts": {"ESƒ∞N": {"0": "10:00/19:00", "1": "10:00/19:00", "2": "OFF", "3": "A√áILI≈û", "4": "12:00/21:00", "5": "10:00/19:00", "6": "12:00/21:00"}, "ECE": {"0": "OFF", "1": "KAPANI≈û", "2": "12:00/21:00", "3": "A√áILI≈û", "4": "OFF", "5": "KAPANI≈û", "6": "14:00/23:00"}, "EYL√úL": {"0": "KAPANI≈û", "1": "OFF", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "14:00/23:00", "6": "A√áILI≈û"}, "MELƒ∞S": {"0": "KAPANI≈û", "1": "14:00/23:00", "2": "A√áILI≈û", "3": "12:00/21:00", "4": "10:00/19:00", "5": "A√áILI≈û", "6": "10:00/19:00"}, "UMUT": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "10:00/19:00", "3": "KAPANI≈û", "4": "OFF", "5": "OFF", "6": "KAPANI≈û"}, "EMƒ∞R": {"0": "OFF", "1": "KAPANI≈û", "2": "14:00/23:00", "3": "14:00/23:00", "4": "KAPANI≈û", "5": "OFF", "6": "OFF"}}}, {"branch": "≈ûi≈üli", "weekLabel": "Sayfa1", "weekStart": null, "weekEnd": null, "personelShifts": {"ESƒ∞N": {"0": "TUZLA", "1": "TUZLA", "2": "12:00/21:00 (TUZLA", "3": "TUZLA", "4": "TUZLA", "5": "TUZLA", "6": "TUZLA"}, "ECE": {"0": "14:00/23:00", "1": "10:00/19:00", "2": "A√áILI≈û", "3": "12:00/23:00", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}, "EYL√úL": {"0": "KAPANI≈û", "1": "KAPANI≈û", "2": "*KAPANI≈û", "3": "KAPANI≈û", "4": "OFF", "5": "12:00/21:00", "6": "KAPANI≈û"}, "UMUT": {"0": "A√áILI≈û", "1": "A√áILI≈û", "2": "OFF", "3": "10:00/19:00", "4": "10:00/19:00", "5": "10:00/19:00", "6": "A√áILI≈û"}, "EMƒ∞R TALHA": {"0": "A√áILI≈û", "1": "10:00/19:00", "2": "KAPANI≈û", "3": "A√áILI≈û", "4": "A√áILI≈û", "5": "A√áILI≈û", "6": "OFF"}, "HAVƒ∞N": {"0": "*****", "1": "****", "2": "14:00/23:00", "3": "12:00/21:00", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}, "AY≈ûEG√úL": {"0": "****", "1": "****", "2": "14:00/23:00", "3": "13:00/22:00", "4": "KAPANI≈û", "5": "KAPANI≈û", "6": "14:00/23:00"}}}];

const EXCEL_PERSONEL = {
    '≈ûi≈üli': ["ESƒ∞N", "ESMA", "ECE"],
    'Tuzla': ["B√ú≈ûRA", "ESƒ∞N", "BALRA", "TUANA", "BARAN", "ELƒ∞F"]
};

// Firebase'e y√ºkle
async function uploadExcelToFirebase() {
    if (currentUser?.role !== 'yonetici') {
        toast('Sadece y√∂netici yapabilir', 'error');
        return;
    }
    
    const btn = event.target;
    btn.disabled = true;
    btn.innerHTML = '‚è≥ Y√ºkleniyor...';
    
    // Branch isim d√∂n√º≈ü√ºm√º
    const branchMap = {
        '≈ûi≈üli': '≈ûi≈üli (Merkez)',
        'Tuzla': 'Tuzla Port'
    };
    
    try {
        // 1. Personel ekle (son 2 hafta kadrosu)
        let pAdded = 0;
        for (const [excelBranch, names] of Object.entries(EXCEL_PERSONEL)) {
            const dbBranch = branchMap[excelBranch] || excelBranch;
            for (const name of names) {
                const existing = await db.collection('personel').where('name', '==', name).where('branch', '==', dbBranch).get();
                if (existing.empty) {
                    await db.collection('personel').add({
                        name: name,
                        branch: dbBranch,
                        position: 'Barista',
                        status: 'aktif',
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    pAdded++;
                }
            }
        }
        
        // 2. Shiftleri ekle
        let sAdded = 0, sSkipped = 0;
        for (const shift of EXCEL_SHIFTS) {
            if (!shift.weekStart) { sSkipped++; continue; }
            
            const dbBranch = branchMap[shift.branch] || shift.branch;
            
            const existing = await db.collection('shifts')
                .where('branch', '==', dbBranch)
                .where('weekStart', '==', shift.weekStart)
                .get();
            
            if (existing.empty) {
                await db.collection('shifts').add({
                    branch: dbBranch,
                    weekStart: shift.weekStart,
                    weekEnd: shift.weekEnd,
                    weekLabel: shift.weekLabel,
                    personelShifts: shift.personelShifts,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    source: 'excel'
                });
                sAdded++;
            } else {
                sSkipped++;
            }
        }
        
        toast(`‚úì ${pAdded} personel, ${sAdded} shift eklendi`, 'success');
        loadShiftList();
        
    } catch (e) {
        console.error(e);
        toast('Hata: ' + e.message, 'error');
    }
    
    btn.disabled = false;
    btn.innerHTML = 'üì• Excel Verilerini Y√ºkle';
}

// getWeekOptions fonksiyonu (hafta listesi i√ßin)// getWeekOptions fonksiyonu (hafta listesi i√ßin)
function getWeekOptions() {
    const options = [];
    const today = new Date();
    for (let i = -12; i <= 2; i++) {
        const monday = new Date(today);
        monday.setDate(today.getDate() - today.getDay() + 1 + (i * 7));
        const sunday = new Date(monday);
        sunday.setDate(monday.getDate() + 6);
        const label = `${monday.toLocaleDateString('tr-TR', { day: 'numeric', month: 'short' })} - ${sunday.toLocaleDateString('tr-TR', { day: 'numeric', month: 'short' })}`;
        const value = monday.toISOString().split('T')[0];
        options.push({ value, label, monday, sunday, isCurrent: i === 0 });
    }
    return options;
}
    </script>
</body>
</html>
