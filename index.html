<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="robots" content="noindex, nofollow">
    <title>Moonberry Coffee | Y√∂netim Paneli</title>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%23008c95'/%3E%3Ctext x='50' y='65' font-size='50' text-anchor='middle' fill='white'%3E‚òï%3C/text%3E%3C/svg%3E">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <!-- PDFMake -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <!-- CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="app">
        <!-- ===== SIDEBAR ===== -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img src="https://static.wixstatic.com/media/760af2_dcf4da76f14d462db5e4fcab7732727e~mv2.png" alt="Logo" class="sidebar-logo">
                <span class="sidebar-title">Moonberry ƒ∞K</span>
            </div>
            
            <nav class="sidebar-nav">
                <!-- Ana Men√º -->
                <div class="nav-item active" data-page="dashboard" onclick="goTo('dashboard')">
                    <span class="icon"><svg viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></span> Ana Sayfa
                </div>
                <div class="nav-item" data-page="puantaj" onclick="goTo('puantaj')">
                    <span class="icon"><svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></span> Puantaj
                </div>
                <div class="nav-item" data-page="shift" onclick="goTo('shift')">
                    <span class="icon"><svg viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></span> Shift Planƒ±
                </div>
                <div class="nav-item" data-page="checklist" onclick="goTo('checklist')">
                    <span class="icon"><svg viewBox="0 0 24 24"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/></svg></span> Checklist
                </div>
                <div class="nav-item" data-page="personel" onclick="goTo('personel')">
                    <span class="icon"><svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg></span> Personel
                </div>
                
                <!-- Belgeler Grubu -->
                <div class="nav-group">
                    <div class="nav-group-header" onclick="toggleNavGroup(this)">
                        <span class="icon"><svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg></span>
                        Belgeler
                        <span class="nav-group-arrow">‚ñæ</span>
                    </div>
                    <div class="nav-group-items">
                        <div class="nav-item" data-page="sozlesme" onclick="goTo('sozlesme')">
                            <span class="icon">üìÑ</span> ƒ∞≈ü S√∂zle≈ümesi
                        </div>
                        <div class="nav-item" data-page="tutanak" onclick="goTo('tutanak')">
                            <span class="icon">üìã</span> Tutanak
                        </div>
                        <div class="nav-item" data-page="savunma" onclick="goTo('savunma')">
                            <span class="icon">üìù</span> Savunma ƒ∞stem
                        </div>
                        <div class="nav-item" data-page="fesih" onclick="goTo('fesih')">
                            <span class="icon">üìë</span> Fesih Bildirimi
                        </div>
                        <div class="nav-item" data-page="istifa" onclick="goTo('istifa')">
                            <span class="icon">‚úçÔ∏è</span> ƒ∞stifa Dilek√ßesi
                        </div>
                        <div class="nav-item" data-page="ibraname" onclick="goTo('ibraname')">
                            <span class="icon">‚úÖ</span> ƒ∞braname
                        </div>
                    </div>
                </div>
                
                <!-- Diƒüer Belgeler Grubu -->
                <div class="nav-group">
                    <div class="nav-group-header" onclick="toggleNavGroup(this)">
                        <span class="icon"><svg viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg></span>
                        Diƒüer Belgeler
                        <span class="nav-group-arrow">‚ñæ</span>
                    </div>
                    <div class="nav-group-items">
                        <div class="nav-item" data-page="borc" onclick="goTo('borc')">
                            <span class="icon">üí∞</span> Bor√ß Senedi
                        </div>
                        <div class="nav-item" data-page="avans" onclick="goTo('avans')">
                            <span class="icon">üíµ</span> Avans Talebi
                        </div>
                        <div class="nav-item" data-page="zimmet" onclick="goTo('zimmet')">
                            <span class="icon">üì¶</span> Zimmet Tutanaƒüƒ±
                        </div>
                    </div>
                </div>
                
                <!-- Katalog ve Admin -->
                <div class="nav-item" data-page="katalog" onclick="goTo('katalog')">
                    <span class="icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg></span> Katalog
                </div>
                <div class="nav-item" data-page="admin" onclick="openAdminWithPin()">
                    <span class="icon"><svg viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></span> Y√∂netim
                </div>
            </nav>
            
            <!-- User Info -->
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">?</div>
                    <div class="user-details">
                        <div class="user-name" id="userName">Y√ºkleniyor...</div>
                        <div class="user-role" id="userRole">-</div>
                    </div>
                </div>
                <div class="sidebar-actions">
                    <button class="btn-icon" onclick="toggleTheme()" title="Tema Deƒüi≈ütir">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                        </svg>
                    </button>
                    <button class="btn-icon" onclick="logout()" title="√áƒ±kƒ±≈ü">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                    </button>
                </div>
            </div>
        </aside>
        
        <!-- ===== MAIN CONTENT ===== -->
        <main class="main-content">
            <!-- Mobile Header -->
            <header class="mobile-header">
                <button class="hamburger" onclick="toggleSidebar()">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/>
                    </svg>
                </button>
                <span class="mobile-title">Moonberry ƒ∞K</span>
            </header>
            
            <!-- Page Container - Sayfalar buraya y√ºklenecek -->
            <div id="pageContainer" class="page-container">
                <div style="display:flex;align-items:center;justify-content:center;height:50vh;flex-direction:column;gap:20px">
                    <div class="loading-spinner"></div>
                    <div style="color:var(--tx2)">Uygulama ba≈ülatƒ±lƒ±yor...</div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- ===== MODAL ===== -->
    <div id="modalOverlay" class="modal-overlay" onclick="if(event.target===this)closeModal()">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Modal Ba≈ülƒ±k</h3>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
            <div class="modal-footer" id="modalFooter"></div>
        </div>
    </div>
    
    <!-- ===== TOAST CONTAINER ===== -->
    <div id="toastContainer"></div>
    
    <!-- ===== SCRIPTS ===== -->
    <script>
        // Nav Group Toggle
        function toggleNavGroup(header) {
            const group = header.parentElement;
            group.classList.toggle('open');
        }
        
        // Sidebar Toggle (Mobile)
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }
        
        // Admin PIN kontrol√º
        function openAdminWithPin() {
            if (!STATE.currentUser) return;
            
            if (STATE.currentUser.role === 'yonetici') {
                goTo('admin');
            } else {
                const pin = prompt('Y√∂netici PIN kodunu girin:');
                if (pin === '1234') { // Ger√ßek uygulamada Firebase'den kontrol edilmeli
                    goTo('admin');
                } else if (pin !== null) {
                    showToast('Yanlƒ±≈ü PIN!', 'error');
                }
            }
        }
    </script>
    
    <!-- Ana Uygulama -->
    <!-- Utils: Ortak yardƒ±mcƒ± fonksiyonlar (t√ºm mod√ºller tarafƒ±ndan kullanƒ±lƒ±r) -->
    <script src="js/modules/utils.js"></script>
    <!-- App: Router, Auth, State Management -->
    <script src="js/app.js"></script>
</body>
</html>
